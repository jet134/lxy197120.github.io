<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>AJAX</title>
      <link href="/2021/11/23/AJAX/"/>
      <url>/2021/11/23/AJAX/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211123172832648.png"></p><h1 id="⼀、Ajax技术与原理"><a href="#⼀、Ajax技术与原理" class="headerlink" title="⼀、Ajax技术与原理"></a>⼀、Ajax技术与原理</h1><h2 id="1-1-Ajax简介"><a href="#1-1-Ajax简介" class="headerlink" title="1.1 Ajax简介"></a>1.1 Ajax简介</h2><p>AJAX = Asynchronous JavaScript and XML（异步的 JavaScript 和 XML）。<br>​AJAX 不是新的编程语⾔，⽽是⼀种使⽤现有标准的新⽅法。<br>​AJAX 是与服务器交换数据并更新部分⽹⻚的艺术，在不重新加载整个⻚⾯的情况下。</p><h2 id="1-2-Ajax所包含的技术"><a href="#1-2-Ajax所包含的技术" class="headerlink" title="1.2 Ajax所包含的技术"></a>1.2 Ajax所包含的技术</h2><p>⼤家都知道ajax并⾮⼀种新的技术，⽽是⼏种原有技术的结合体。它由下列技术组合⽽成。</p><pre class="line-numbers language-none"><code class="language-none">1.使⽤CSS和XHTML来表示。2.使⽤DOM模型来交互和动态显示。3.使⽤XMLHttpRequest来和服务器进⾏异步通信。4.使⽤javascript来绑定和调⽤。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>AJAX 的核⼼是 XMLHttpRequest 对象。<br>不同的浏览器创建 XMLHttpRequest 对象的⽅法是有差异的。<br><strong>IE 浏览器使⽤ ActiveXObject，⽽其他的浏览器使⽤名为 XMLHttpRequest 的 JavaScript 内建对象</strong></p><h2 id="1-3-Ajax的⼯作原理"><a href="#1-3-Ajax的⼯作原理" class="headerlink" title="1.3 Ajax的⼯作原理"></a>1.3 Ajax的⼯作原理</h2><p>​    Ajax的⼯作原理相当于在⽤户和服务器之间加了—个中间层(AJAX引擎)，使⽤户操作与服务器响应异步<br>化。并不是所有的⽤户请求都提交给服务器。像—些数据验证和数据处理等都交给Ajax引擎⾃⼰来做,，<br>只有确定需要从服务器读取新数据时再由Ajax引擎代为向服务器提交请求。</p><h2 id="1-4-XMLHttpRequest常⽤属性"><a href="#1-4-XMLHttpRequest常⽤属性" class="headerlink" title="1.4 XMLHttpRequest常⽤属性"></a>1.4 XMLHttpRequest常⽤属性</h2><h3 id="1-onreadystatechange-属性"><a href="#1-onreadystatechange-属性" class="headerlink" title="1. onreadystatechange 属性"></a>1. onreadystatechange 属性</h3><p>onreadystatechange 属性存有处理服务器响应的函数。<br>下⾯的代码定义⼀个空的函数，可同时对 onreadystatechange 属性进⾏设置：</p><pre class="line-numbers language-none"><code class="language-none">xmlHttp.onreadystatechange &#x3D; function() &#123; &#x2F;&#x2F;我们需要在这写⼀些代码&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2-readyState-属性"><a href="#2-readyState-属性" class="headerlink" title="2. readyState 属性"></a>2. readyState 属性</h3><p>readyState 属性存有服务器响应的状态信息。每当 readyState 改变时，onreadystatechange 函数就会<br>被执⾏。<br>readyState 属性可能的值：</p><table><thead><tr><th><strong>状态</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>0</td><td>请求未初始化（在调⽤ open() 之前）</td></tr><tr><td>1</td><td>请求已提出（调⽤ send() 之前）</td></tr><tr><td>2</td><td>请求已发送（这⾥通常可以从响应得到内容头部）</td></tr><tr><td>3</td><td>请求处理中（响应中通常有部分数据可⽤，但是服务器还没有完成响应）</td></tr><tr><td>4</td><td>请求已完成（可以访问服务器响应并使⽤它）</td></tr></tbody></table><p>我们要向这个 onreadystatechange 函数添加⼀条 If 语句，来测试我们的响应是否已完成(意味着可获得数据)：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">xmlHttp<span class="token punctuation">.</span>onreadystatechange <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlHttp<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">//从服务器的response获得数据 </span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-responseText-属性"><a href="#3-responseText-属性" class="headerlink" title="3. responseText 属性"></a>3. responseText 属性</h3><p>可以通过 responseText 属性来取回由服务器返回的数据。<br>在我们的代码中，我们将把时间⽂本框的值设置为等于 responseText：</p><pre class="line-numbers language-none"><code class="language-none">xmlHttp.onreadystatechange &#x3D; function() &#123;  if (xmlHttp.readyState &#x3D;&#x3D; 4) &#123;  document.myForm.time.value &#x3D; xmlHttp.responseText;  &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其它属性如下：</p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121221447015.png"></p><h2 id="1-5-XMLHttpRequest⽅法"><a href="#1-5-XMLHttpRequest⽅法" class="headerlink" title="1.5 XMLHttpRequest⽅法"></a>1.5 XMLHttpRequest⽅法</h2><h3 id="1-open-⽅法"><a href="#1-open-⽅法" class="headerlink" title="1. open() ⽅法"></a>1. open() ⽅法</h3><p>open() 有三个参数。第⼀个参数定义发送请求所使⽤的⽅法，第⼆个参数规定服务器端脚本的URL，第<br>三个参数规定应当对请求进⾏异步地处理。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">xmlHttp<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span><span class="token string">"test.php"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2-send-⽅法"><a href="#2-send-⽅法" class="headerlink" title="2. send() ⽅法"></a>2. send() ⽅法</h3><p>send() ⽅法将请求送往服务器。如果我们假设 HTML ⽂件和 PHP ⽂件位于相同的⽬录，那么代码是这<br>样的：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">xmlHttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>其它⽅法如下：</p><p><strong><img src="C:/Users/10452/AppData/Roaming/Typora/typora-user-images/image-20211121221720353.png"></strong></p><h1 id="二、-Ajax编程步骤"><a href="#二、-Ajax编程步骤" class="headerlink" title="二、 Ajax编程步骤"></a>二、 Ajax编程步骤</h1><p>为了⽅便理解，我给AJAX统⼀了⼀个流程，要想实现AJAX，就要按照以后步骤⾛：</p><ol><li>创建XMLHttpRequest对象。</li><li>设置请求⽅式。</li><li>调⽤回调函数。</li><li>发送请求。<br>下⾯来看下具体步骤：</li></ol><h2 id="2-1-创建XMLHttpRequest对象"><a href="#2-1-创建XMLHttpRequest对象" class="headerlink" title="2.1 创建XMLHttpRequest对象"></a>2.1 创建XMLHttpRequest对象</h2><p>创建XMLHttp对象的语法是：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">var</span> xmlHttp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果是IE5或者IE6浏览器，则使⽤<strong>ActiveX</strong>对象，创建⽅法是：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">var</span> xmlHttp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>⼀般我们⼿写AJAX的时候，⾸先要判断该浏览器是否⽀持XMLHttpRequest对象，如果⽀持则创建该对</p><p>象，如果不⽀持则创建ActiveX对象。JS代码如下：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//第⼀步：创建XMLHttpRequest对象</span><span class="token keyword">var</span> xmlHttp<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">window<span class="token punctuation">.</span></span>XMLHttpRequest</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">//⾮IE </span> xmlHttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">window<span class="token punctuation">.</span></span>ActiveXObject</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">//IE </span> xmlHttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-2-设置请求⽅式"><a href="#2-2-设置请求⽅式" class="headerlink" title="2.2 设置请求⽅式"></a>2.2 设置请求⽅式</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//第⼆步：设置和服务器端交互的相应参数，向路径</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8080</span><span class="token operator">/</span><span class="token class-name">JsLearning3</span><span class="token operator">/</span>getAjax准备发送数据 <span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">"http://localhost:8080/JsLearning3/getAjax"</span><span class="token punctuation">;</span>xmlHttp<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token string">"POST"</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>open⽅法如下：</p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121222655186.png"></p><p><strong>GET 还是 POST？</strong><br>与 POST 相⽐，GET 更简单也更快，并且在⼤部分情况下都能⽤。然⽽，在以下情况中，请使⽤ POST<br>请求：<br>    ⽆法使⽤缓存⽂件（更新服务器上的⽂件或数据库）<br>    向服务器发送⼤量数据（POST 没有数据量限制）<br>    发送包含未知字符的⽤户输⼊时，POST ⽐ GET 更稳定也更可靠</p><p><strong>异步 - True 或 False？</strong><br>    AJAX 指的是异步 JavaScript 和 XML（Asynchronous JavaScript and XML）。XMLHttpRequest 对<br>象如果要⽤于 AJAX 的话，其 open() ⽅法的 async 参数必须设置为 true：对于 web 开发⼈员来说，发<br>送异步请求是⼀个巨⼤的进步。很多在服务器执⾏的任务都相当费时。AJAX 出现之前，这可能会引起应<br>⽤程序挂起或停⽌。<br>通过 AJAX，JavaScript ⽆需等待服务器的响应，⽽是：<br>在等待服务器响应时执⾏其他脚本<br>当响应就绪后对响应进⾏处理</p><h2 id="2-3-调⽤回调函数"><a href="#2-3-调⽤回调函数" class="headerlink" title="2.3 调⽤回调函数"></a>2.3 调⽤回调函数</h2><p>​    所谓回调函数，就是请求在后台处理完，再返回到前台所实现的功能。在这个例⼦⾥，我们的回调<br>函数要实现的功能就是接收后台处理后反馈给前台的数据，然后将这个数据显示到指定的div上。因为从<br>后台返回的数据可能是错误的，所以在回调函数中⾸先要判断后台返回的信息是否正确，如果正确才可<br>以继续执⾏。代码如下：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//第三步：注册回调函数</span>xmlHttp<span class="token punctuation">.</span>onreadystatechange <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlHttp<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlHttp<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">var</span> obj <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>  obj<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> xmlHttp<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"AJAX服务器返回错误！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>​    这段代码就是回调函数的核⼼内容，就是获取后台返回的数据，然后将这个数据赋值给id为testid的<br>div。xmlHttp对象有两个属性都可以获取后台返回的数据，分别是：responseText和responseXML，<br>其中responseText是⽤来获得字符串形式的响应数据，responseXML是⽤来获得 XML 形式的响应数<br>据。⾄于选择哪⼀个是取决于后台给返回的数据的，这个例⼦⾥我们只是显示⼀条字符串数据所以选择<br>的是responseText。</p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">var obj &#x3D; document.getElementById(testid);obj.innerHTML &#x3D; xmlHttp.responseText;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="2-4-发送请求"><a href="#2-4-发送请求" class="headerlink" title="2.4 发送请求"></a>2.4 发送请求</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//第四步：设置发送请求的内容和发送报送。然后发送请求</span><span class="token keyword">var</span> uname<span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByName</span><span class="token punctuation">(</span><span class="token string">"userName"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span><span class="token keyword">var</span> upass<span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByName</span><span class="token punctuation">(</span><span class="token string">"userPass"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token punctuation">;</span><span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token string">"userName="</span> <span class="token operator">+</span> uname<span class="token operator">+</span> <span class="token string">"&amp;userPass="</span> <span class="token operator">+</span>upass<span class="token operator">+</span> <span class="token string">"&amp;time="</span> <span class="token operator">+</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 增加time随机参数，防⽌读取缓存 </span>xmlHttp<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"Content-type"</span><span class="token punctuation">,</span> <span class="token string">"application/x-www-form-urlencoded;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 向请求添加 HTTP 头，POST如果有数据⼀定加加！！！！</span>xmlHttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-5-完整代码"><a href="#2-5-完整代码" class="headerlink" title="2.5 完整代码"></a>2.5 完整代码</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//dopost方法</span><span class="token comment">//为了防止给前台输出乱码，所以指定响应的编码格式</span>resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">PrintWriter</span> writer <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    writer<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"账户已被注册"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    writer<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"账户可用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token generics"><span class="token punctuation">&lt;</span>html<span class="token punctuation">></span></span>  <span class="token generics"><span class="token punctuation">&lt;</span>head<span class="token punctuation">></span></span>    <span class="token generics"><span class="token punctuation">&lt;</span>title<span class="token punctuation">></span></span>$<span class="token class-name">Title</span>$<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>  <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">></span>    function <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      <span class="token comment">//发送异步请求</span>      <span class="token comment">//1.创建XMLHttpRequest对象</span>      <span class="token keyword">var</span> xmlHttp<span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">window<span class="token punctuation">.</span></span>XMLHttpRequest</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//非IE</span>        xmlHttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">window<span class="token punctuation">.</span></span>ActiveXObject</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        xmlHttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHttP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token comment">//2.打开连接</span>      <span class="token keyword">var</span> uname <span class="token operator">=</span> window<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"uname"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>      <span class="token comment">//xmlHttp.open("get","/testuname?username="+uname,true);//true表示通过异步的方式进行请求</span>      xmlHttp<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token string">"post"</span><span class="token punctuation">,</span><span class="token string">"/testuname"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//3.指定回调函数,这个属性有处理服务器响应的函数</span>      xmlHttp<span class="token punctuation">.</span>onreadystatechange<span class="token operator">=</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//3.1判断状态,4代表可以访问的状态，也就是200的那个状态码</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlHttp<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>          <span class="token comment">//3.2接收返回的数据</span>          <span class="token keyword">var</span> responseText <span class="token operator">=</span> xmlHttp<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>          document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"rs"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> responseText<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>      <span class="token comment">//4.发送数据</span>      <span class="token comment">//post的请求</span>      <span class="token comment">//请求的头信息</span>      xmlHttp<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"Content-type"</span><span class="token punctuation">,</span><span class="token string">"application/x-www-form-urlencoded;charset=UTE-8"</span><span class="token punctuation">)</span>      xmlHttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"username="</span><span class="token operator">+</span>uname<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//get的请求不要伪装请求头信息</span>      <span class="token comment">//xmlHttp.send();</span>    <span class="token punctuation">&#125;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>  <span class="token generics"><span class="token punctuation">&lt;</span>body<span class="token punctuation">></span></span>  <span class="token generics"><span class="token punctuation">&lt;</span>h1<span class="token punctuation">></span></span>index<span class="token punctuation">.</span>jsp<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>  username<span class="token operator">:</span> <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> id<span class="token operator">=</span><span class="token string">"uname"</span> onblur<span class="token operator">=</span><span class="token string">"test()"</span><span class="token operator">></span><span class="token operator">&lt;</span>span id<span class="token operator">=</span><span class="token string">"rs"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121225056619.png"> </p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121225107739.png"> </p><h1 id="三、-jquery的ajax操作"><a href="#三、-jquery的ajax操作" class="headerlink" title="三、 jquery的ajax操作"></a>三、 jquery的ajax操作</h1><h2 id="3-1传统⽅式实现Ajax的不⾜"><a href="#3-1传统⽅式实现Ajax的不⾜" class="headerlink" title="3.1传统⽅式实现Ajax的不⾜"></a>3.1传统⽅式实现Ajax的不⾜</h2><p>步骤繁琐</p><p> ⽅法、属性、常⽤值较多不好记忆</p><h2 id="3-2-ajax-⽅法"><a href="#3-2-ajax-⽅法" class="headerlink" title="3.2 ajax()⽅法"></a>3.2 ajax()⽅法</h2><p>可以通过发送 HTTP请求加载远程数据，是 jQuery 最底层的 Ajax 实现，具有较⾼灵活性。<br>$.ajax( [settings] ); //参数 settings 是$.ajax ( )⽅法的参数列表，⽤于配置 Ajax 请求的键值对集合;</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> url<span class="token operator">:</span>请求地址 type<span class="token operator">:</span><span class="token string">"get | post | put | delete "</span> 默认是get<span class="token punctuation">,</span> data<span class="token operator">:</span>请求参数 <span class="token punctuation">&#123;</span><span class="token string">"id"</span><span class="token operator">:</span><span class="token string">"123"</span><span class="token punctuation">,</span><span class="token string">"pwd"</span><span class="token operator">:</span><span class="token string">"123456"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> dataType<span class="token operator">:</span>请求数据类型<span class="token string">"html | text | json | xml | script | jsonp "</span><span class="token punctuation">,</span> success<span class="token operator">:</span><span class="token function">function</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span>dataTextStatus<span class="token punctuation">,</span>jqxhr<span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token comment">//请求成功时 </span>error<span class="token operator">:</span><span class="token function">function</span><span class="token punctuation">(</span>jqxhr<span class="token punctuation">,</span>textStatus<span class="token punctuation">,</span>error<span class="token punctuation">)</span><span class="token comment">//请求失败时</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-3-get-post-⽅法通过远程-HTTP-GET-请求载⼊信息。"><a href="#3-3-get-post-⽅法通过远程-HTTP-GET-请求载⼊信息。" class="headerlink" title="3.3 get() ,post()⽅法通过远程 HTTP GET 请求载⼊信息。"></a>3.3 get() ,post()⽅法通过远程 HTTP GET 请求载⼊信息。</h2><p>这是⼀个简单的 GET 请求功能以取代复杂 $.ajax</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>data<span class="token punctuation">,</span><span class="token function">function</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">//省略将服务器返回的数据显示到⻚⾯的代码</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java">$<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>data<span class="token punctuation">,</span><span class="token function">function</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">//省略将服务器返回的数据显示到⻚⾯的代码</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>url:请求的路径</p><p>data:发送的数据</p><p>success:成功函数</p><p>datatype 返回的数据 </p><h2 id="3-4代码"><a href="#3-4代码" class="headerlink" title="3.4代码"></a>3.4代码</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token generics"><span class="token punctuation">&lt;</span>html<span class="token punctuation">></span></span><span class="token generics"><span class="token punctuation">&lt;</span>head<span class="token punctuation">></span></span>    <span class="token generics"><span class="token punctuation">&lt;</span>title<span class="token punctuation">></span></span>$<span class="token class-name">Title</span>$<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>    <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span> src<span class="token operator">=</span><span class="token string">"js/jquery-1.8.0.min.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>    <span class="token generics"><span class="token punctuation">&lt;</span>script<span class="token punctuation">></span></span>        $<span class="token punctuation">(</span><span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            $<span class="token punctuation">(</span><span class="token string">"#uname"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">blur</span><span class="token punctuation">(</span><span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token comment">//1获得value值</span>                <span class="token keyword">var</span> uname <span class="token operator">=</span> $<span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//2.发送请求</span><span class="token comment">/*                $.ajax(&#123;                    url:"/testuname",                    data:"username="+uname,                    type:"post",                    dataType:"text",//指的是服务器会返回一个text的文本数据                    //回调函数，处理服务器响应                    success:function(rs)&#123;                        $("#rs").html(rs)                    &#125;                &#125;)*/</span>                $<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"testuname"</span><span class="token punctuation">,</span><span class="token string">"username="</span><span class="token operator">+</span>uname<span class="token punctuation">,</span><span class="token function">function</span><span class="token punctuation">(</span>rs<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    $<span class="token punctuation">(</span><span class="token string">"#rs"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>rs<span class="token punctuation">)</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token generics"><span class="token punctuation">&lt;</span>body<span class="token punctuation">></span></span><span class="token generics"><span class="token punctuation">&lt;</span>h1<span class="token punctuation">></span></span><span class="token class-name">JqueryForAjax</span><span class="token punctuation">.</span>jsp<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>username<span class="token operator">:</span> <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> id<span class="token operator">=</span><span class="token string">"uname"</span><span class="token operator">></span><span class="token operator">&lt;</span>span id<span class="token operator">=</span><span class="token string">"rs"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="四、-JSON"><a href="#四、-JSON" class="headerlink" title="四、 JSON"></a>四、 JSON</h1><h2 id="4-1、什么是JSON"><a href="#4-1、什么是JSON" class="headerlink" title="4.1、什么是JSON"></a>4.1、什么是JSON</h2><pre><code>     (JavaScript Object Notation) 是⼀种轻量级的数据交换格式。 易于⼈阅读和编写。同时也易于</code></pre><p>机器解析和⽣成。 它基于JavaScript Programming Language, Standard ECMA-262 3rd Edition -<br>December 1999的⼀个⼦集。 JSON采⽤完全独⽴于语⾔的⽂本格式，但是也使⽤了类似于C语⾔家族的<br>习惯（包括C, C++, C#, Java, JavaScript, Perl, Python等）。 这些特性使JSON成为理想的数据交换语<br>⾔。</p><h2 id="4-2、JSON对象定义和基本使⽤"><a href="#4-2、JSON对象定义和基本使⽤" class="headerlink" title="4.2、JSON对象定义和基本使⽤"></a>4.2、JSON对象定义和基本使⽤</h2><p>​    在标准的json格式中，json对象由在括号括起来，对象中的属性也就是json的key是⼀个字符串，所以<br>⼀定要使⽤双引号引起来。每组key之间使⽤逗号进⾏分隔。</p><h3 id="4-2-1、JSON的定义"><a href="#4-2-1、JSON的定义" class="headerlink" title="4.2.1、JSON的定义"></a>4.2.1、JSON的定义</h3><p>Json定义格式：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">var</span> 变量名 <span class="token operator">=</span> <span class="token punctuation">&#123;</span>“key” <span class="token operator">:</span> value <span class="token punctuation">,</span> <span class="token comment">// Number类型</span>“key2” <span class="token operator">:</span> “value” <span class="token punctuation">,</span> <span class="token comment">// 字符串类型</span>“key3” <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token comment">// 数组类型</span>“key4” <span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">// json 对象类型</span>“key5” <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span> <span class="token comment">// json 数组</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-3、JSON在java中的使⽤-重要"><a href="#4-3、JSON在java中的使⽤-重要" class="headerlink" title="4.3、JSON在java中的使⽤(重要)"></a>4.3、JSON在java中的使⽤(重要)</h2><p>我们要使⽤json和java中使⽤，我们需要使⽤到⼀个第三⽅的包。它就是</p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121230328117.png"> </p><h2 id="4-4、java对象和json之间的转换"><a href="#4-4、java对象和json之间的转换" class="headerlink" title="4.4、java对象和json之间的转换"></a>4.4、java对象和json之间的转换</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//java->json</span><span class="token class-name">Users</span> users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Users</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">"aaa"</span><span class="token punctuation">,</span><span class="token string">"197120"</span><span class="token punctuation">,</span><span class="token number">123.456</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">fromObject</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonObject<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//json->java</span><span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">"&#123;\"money\":123.456,\"password\":\"197120\",\"uid\":10,\"username\":\"aaa\"&#125;"</span><span class="token punctuation">;</span><span class="token class-name">JSONObject</span> jsonObject1 <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">fromObject</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Object</span> o <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toBean</span><span class="token punctuation">(</span>jsonObject1<span class="token punctuation">,</span> <span class="token class-name">Users</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//java集合->json</span><span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Users</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">"aaa"</span><span class="token punctuation">,</span><span class="token string">"197120"</span><span class="token punctuation">,</span><span class="token number">123.456</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Users</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token string">"bbb"</span><span class="token punctuation">,</span><span class="token string">"197120"</span><span class="token punctuation">,</span><span class="token number">1.23</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Users</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token string">"ccc"</span><span class="token punctuation">,</span><span class="token string">"197120"</span><span class="token punctuation">,</span><span class="token number">12.23</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">JSONArray</span> jsonArray <span class="token operator">=</span> <span class="token class-name">JSONArray</span><span class="token punctuation">.</span><span class="token function">fromObject</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonArray<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//json-?java集合</span><span class="token class-name">String</span> str2 <span class="token operator">=</span> <span class="token string">"[&#123;\"money\":123.456,\"password\":\"197120\","</span> <span class="token operator">+</span>        <span class="token string">"\"uid\":10,\"username\":\"aaa\"&#125;,&#123;\"money\":1.23,\"password\""</span> <span class="token operator">+</span>        <span class="token string">":\"197120\",\"uid\":11,\"username\":\"bbb\"&#125;,&#123;\"money\":12.23,"</span> <span class="token operator">+</span>        <span class="token string">"\"password\":\"197120\",\"uid\":12,\"username\":\"ccc\"&#125;]"</span><span class="token punctuation">;</span><span class="token class-name">JSONArray</span> jsonArray1 <span class="token operator">=</span> <span class="token class-name">JSONArray</span><span class="token punctuation">.</span><span class="token function">fromObject</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Object</span> o1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token class-name">JSONArray</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span>jsonArray1<span class="token punctuation">,</span> <span class="token class-name">Users</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o2 <span class="token operator">:</span> jsonArray1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-5实例代码"><a href="#4-5实例代码" class="headerlink" title="4.5实例代码"></a>4.5实例代码</h2><h3 id="4-5-1-服务器代码"><a href="#4-5-1-服务器代码" class="headerlink" title="4.5.1 服务器代码"></a>4.5.1 服务器代码</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/getuser"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetUsersServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token function">doPost</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//为了防止给前台输出乱码，所以指定响应的编码格式</span>        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> uid <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"uid"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> userid <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Users</span> users <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">switch</span> <span class="token punctuation">(</span>userid<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Users</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"张三"</span><span class="token punctuation">,</span><span class="token string">"abc"</span><span class="token punctuation">,</span><span class="token number">1.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Users</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"张三2"</span><span class="token punctuation">,</span><span class="token string">"abc2"</span><span class="token punctuation">,</span><span class="token number">2.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Users</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"张三3"</span><span class="token punctuation">,</span><span class="token string">"abc3"</span><span class="token punctuation">,</span><span class="token number">3.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Users</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"张三4"</span><span class="token punctuation">,</span><span class="token string">"abc4"</span><span class="token punctuation">,</span><span class="token number">4.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">default</span><span class="token operator">:</span>users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Users</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>                <span class="token comment">//java -> json</span>        <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">fromObject</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">PrintWriter</span> printWriter <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonObject<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-5-2-jsp代码"><a href="#4-5-2-jsp代码" class="headerlink" title="4.5.2 jsp代码"></a>4.5.2 jsp代码</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token generics"><span class="token punctuation">&lt;</span>html<span class="token punctuation">></span></span><span class="token generics"><span class="token punctuation">&lt;</span>head<span class="token punctuation">></span></span>    <span class="token generics"><span class="token punctuation">&lt;</span>title<span class="token punctuation">></span></span><span class="token class-name">Title</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span> src<span class="token operator">=</span><span class="token string">"js/jquery-1.11.1.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token generics"><span class="token punctuation">&lt;</span>script<span class="token punctuation">></span></span>    $<span class="token punctuation">(</span><span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        $<span class="token punctuation">(</span><span class="token string">"#uid"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">blur</span><span class="token punctuation">(</span><span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">//1获得value值</span>            <span class="token keyword">var</span> uid <span class="token operator">=</span> $<span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/*            $.ajax(&#123;                url:"/getuser",                data:"uid="+uid,                type:"post",                dataType:"text",//指的是服务器会返回一个text的文本数据                //回调函数，处理服务器响应                success:function(rs)&#123;                    $("#uname").val(rs.username);                    $("#pass").val(rs.password);                    $("#money").val(rs.money);                &#125;            &#125;)*/</span>            $<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/getuser"</span><span class="token punctuation">,</span><span class="token string">"uid="</span><span class="token operator">+</span>uid<span class="token punctuation">,</span><span class="token function">function</span><span class="token punctuation">(</span>rs<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token comment">//转换成可以处理的json</span>                rs <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">"("</span><span class="token operator">+</span>rs<span class="token operator">+</span><span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//此时的rs是json格式的对象</span>                $<span class="token punctuation">(</span><span class="token string">"#uname"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>                $<span class="token punctuation">(</span><span class="token string">"#pass"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>                $<span class="token punctuation">(</span><span class="token string">"#money"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token generics"><span class="token punctuation">&lt;</span>body<span class="token punctuation">></span></span>    uid<span class="token operator">:</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> id<span class="token operator">=</span><span class="token string">"uid"</span><span class="token operator">></span><span class="token generics"><span class="token punctuation">&lt;</span>br<span class="token punctuation">></span></span>    uname<span class="token operator">:</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> id<span class="token operator">=</span><span class="token string">"uname"</span><span class="token operator">></span><span class="token generics"><span class="token punctuation">&lt;</span>br<span class="token punctuation">></span></span>    pass<span class="token operator">:</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> id<span class="token operator">=</span><span class="token string">"pass"</span><span class="token operator">></span><span class="token generics"><span class="token punctuation">&lt;</span>br<span class="token punctuation">></span></span>    money<span class="token operator">:</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> id<span class="token operator">=</span><span class="token string">"money"</span><span class="token operator">></span><span class="token generics"><span class="token punctuation">&lt;</span>br<span class="token punctuation">></span></span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-5-3-结果展示"><a href="#4-5-3-结果展示" class="headerlink" title="4.5.3 结果展示"></a>4.5.3 结果展示</h3><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121230918033.png"></p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> json </tag>
            
            <tag> Ajax </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SmartUpload工具包对文件上传与下载</title>
      <link href="/2021/11/23/SmartUpload%E5%B7%A5%E5%85%B7%E5%8C%85%E5%AF%B9%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8E%E4%B8%8B%E8%BD%BD/"/>
      <url>/2021/11/23/SmartUpload%E5%B7%A5%E5%85%B7%E5%8C%85%E5%AF%B9%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8E%E4%B8%8B%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211123114234523.png"></p><h1 id="SmartUpload-jar实现文件上传"><a href="#SmartUpload-jar实现文件上传" class="headerlink" title="SmartUpload.jar实现文件上传"></a>SmartUpload.jar实现文件上传</h1><h2 id="1-将jar包添加到项目中-smartupload-jar"><a href="#1-将jar包添加到项目中-smartupload-jar" class="headerlink" title="1.将jar包添加到项目中:smartupload.jar"></a>1.将jar包添加到项目中:smartupload.jar</h2><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211123111702797.png"> </p><h2 id="2-准备上传的页面"><a href="#2-准备上传的页面" class="headerlink" title="2.准备上传的页面"></a>2.准备上传的页面</h2><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;!--FileUpload.jsp--&gt;&lt;form action&#x3D;&quot;uploadtest&quot; method&#x3D;&quot;post&quot; enctype&#x3D;&quot;multipart&#x2F;form-data&quot;&gt;    姓名: &lt;input type&#x3D;&quot;text&quot; name&#x3D;&quot;uname&quot;&gt;&lt;br&gt;    图片: &lt;input type&#x3D;&quot;file&quot; name&#x3D;&quot;pic&quot;&gt;&lt;br&gt;    &lt;input type&#x3D;&quot;submit&quot; value&#x3D;&quot;上传&quot;&gt;&lt;&#x2F;form&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>注:</strong></p><p>(1)form标签中要添加enctype属性 </p><p>(2)提交方式必须是post</p><h2 id="3-开始获取数据-保存文件"><a href="#3-开始获取数据-保存文件" class="headerlink" title="3.开始获取数据,保存文件"></a>3.开始获取数据,保存文件</h2><p><strong>实例代码</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/uploadtest"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UploadServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token function">doPost</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//1.创建上传文件的操作对象</span>            <span class="token class-name">SmartUpload</span> smartUpload <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SmartUpload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//2.初始化上传操作</span>            <span class="token class-name">PageContext</span> pageContext <span class="token operator">=</span> <span class="token class-name">JspFactory</span><span class="token punctuation">.</span><span class="token function">getDefaultFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getPageContext                    <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> req<span class="token punctuation">,</span> resp<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            smartUpload<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span>pageContext<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//2.1设置编码</span>            smartUpload<span class="token punctuation">.</span><span class="token function">setCharset</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//3.上传</span>            smartUpload<span class="token punctuation">.</span><span class="token function">upload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//4.获取文件信息</span>            <span class="token class-name">File</span> file <span class="token operator">=</span> smartUpload<span class="token punctuation">.</span><span class="token function">getFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> fileName <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> contentType <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//获取文本信息</span>            <span class="token class-name">String</span> uname <span class="token operator">=</span> smartUpload<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"uname"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"uname="</span> <span class="token operator">+</span> uname<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//5.指定上传路径</span>            <span class="token class-name">String</span> uploadpath <span class="token operator">=</span> <span class="token string">"/uploadfiles/"</span><span class="token operator">+</span>fileName<span class="token punctuation">;</span>            <span class="token comment">//6.保存到指定位置</span>            file<span class="token punctuation">.</span><span class="token function">saveAs</span><span class="token punctuation">(</span>uploadpath<span class="token punctuation">,</span><span class="token class-name">File</span><span class="token punctuation">.</span>SAVEAS_VIRTUAL<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//7.跳转到成功页面</span>            req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"filename"</span><span class="token punctuation">,</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>            req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"success.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SmartUploadException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>注：</strong></p><p>（1)此时如果表单中有其他数据时，不能通过request直接获取，需要通过SmartUpload对象获取<br> String name=su.getRequest().getParameter(“bookName”);<br> 并且该代码要在SmartUpload操作完成后添加<br> (2)解决乱码:<br> new String(name.getBytes(“GBK”),”utf-8”)</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//内置参数按顺序含义如下图</span><span class="token class-name">PageContext</span> pageContext <span class="token operator">=</span> <span class="token class-name">JspFactory</span><span class="token punctuation">.</span><span class="token function">getDefaultFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getPageContext<span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> req<span class="token punctuation">,</span> resp<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211123112247453.png"></p><h1 id="SmartUpload-jar实现文件下载"><a href="#SmartUpload-jar实现文件下载" class="headerlink" title="SmartUpload.jar实现文件下载"></a>SmartUpload.jar实现文件下载</h1><h2 id="1-下载页面"><a href="#1-下载页面" class="headerlink" title="1.下载页面"></a>1.下载页面</h2><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;!--success.jsp--&gt;&lt;body&gt;  &lt;h1&gt;success.jsp&lt;&#x2F;h1&gt;  &lt;a href&#x3D;&quot;downimg?filename&#x3D;$&#123;filename&#125;&quot;&gt;下载&lt;&#x2F;a&gt;  &lt;img src&#x3D;&quot;uploadfiles&#x2F;$&#123;filename&#125;&quot; alt&#x3D;&quot;&quot;&gt;&lt;&#x2F;body&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-服务器代码"><a href="#2-服务器代码" class="headerlink" title="2.服务器代码"></a>2.服务器代码</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/downimg"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DownServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token function">doPost</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> filename <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"filename"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">"/uploadfiles/"</span><span class="token operator">+</span>filename<span class="token punctuation">;</span>        <span class="token comment">//设置响应头和响应类型</span>        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/octet-stream"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//表示返回过来的是一个流</span>        <span class="token comment">//attachment 告诉浏览器以附件的方式下载文件(弹出下载框)</span>        resp<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Disposition"</span><span class="token punctuation">,</span><span class="token string">"attachment;filename="</span><span class="token operator">+</span> <span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//跳转页面</span>        req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//清空缓冲区:将服务端缓冲区的文件内容,立即权并不传送给客户端</span>        resp<span class="token punctuation">.</span><span class="token function">flushBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="上传下载上述实例展示"><a href="#上传下载上述实例展示" class="headerlink" title="上传下载上述实例展示"></a>上传下载上述实例展示</h1><h2 id="1-上传"><a href="#1-上传" class="headerlink" title="1.上传"></a>1.上传</h2><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211123113031893.png"></p><h2 id="2展示并下载"><a href="#2展示并下载" class="headerlink" title="2展示并下载"></a>2展示并下载</h2><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211123113213331.png"></p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> smartupload.jar </tag>
            
            <tag> 文件上传下载 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MVC的Demo</title>
      <link href="/2021/11/21/MVC%E7%9A%84Demo/"/>
      <url>/2021/11/21/MVC%E7%9A%84Demo/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121162532008.png"> </p><h1 id="MVC的简单demo"><a href="#MVC的简单demo" class="headerlink" title="MVC的简单demo"></a>MVC的简单demo</h1><h2 id="简单了解MVC"><a href="#简单了解MVC" class="headerlink" title="简单了解MVC"></a>简单了解MVC</h2><p>M：(Model) 模型 : 应⽤程序的核⼼功能，管理这个模块中⽤的数据和值（bean,dao）；</p><p>V(View )视图: 视图提供模型的展示，管理模型如何显示给⽤户，它是应⽤程序的外观；（jsp/html）</p><p>C(Controller)控制器: 对⽤户的输⼊做出反应，管理⽤户和视图的交互，是连接模型和视图的枢纽。</p><p>（servlet/service）</p><p>MVC⽤于将web（UI）层进⾏职责解耦</p><p><strong>说明:mvc设计模式(不属于23种设计模式)</strong></p><h2 id="这里我不打算写一些理论知识直接上代码咯"><a href="#这里我不打算写一些理论知识直接上代码咯" class="headerlink" title="这里我不打算写一些理论知识直接上代码咯"></a>这里我不打算写一些理论知识直接上代码咯</h2><h3 id="一、分层（包含M和C）"><a href="#一、分层（包含M和C）" class="headerlink" title="一、分层（包含M和C）"></a>一、分层（包含M和C）</h3><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121155442696.png"> </p><h4 id="1-bean"><a href="#1-bean" class="headerlink" title="1.bean"></a>1.bean</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//实体类包主要存放于数据库对应的实体类</span><span class="token comment">//类名=表名</span><span class="token comment">//属性名=列名</span><span class="token comment">//实体类需要包含：属性，构造（无参，全参），getter，setter</span><span class="token comment">//属于Model（M）</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student1</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> stuid<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> stuname<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> sex<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Student1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getStuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> stuid<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStuid</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> stuid<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>stuid <span class="token operator">=</span> stuid<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getStuname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> stuname<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStuname</span><span class="token punctuation">(</span><span class="token class-name">String</span> stuname<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>stuname <span class="token operator">=</span> stuname<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> age<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getSex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> sex<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSex</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> sex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-dao"><a href="#2-dao" class="headerlink" title="2.dao"></a>2.dao</h4><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121155735864.png"> </p><h5 id="2-1接口"><a href="#2-1接口" class="headerlink" title="2.1接口"></a>2.1接口</h5><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//实体类+Dao=当前接口名</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentDao</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//定义操作数据库的方法</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student1</span><span class="token punctuation">></span></span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="2-2实现类"><a href="#2-2实现类" class="headerlink" title="2.2实现类"></a>2.2实现类</h5><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//接口名+Impl=当前类名</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentDaoImpl</span> <span class="token keyword">extends</span> <span class="token class-name">DruidUtil</span> <span class="token keyword">implements</span> <span class="token class-name">StudentDao</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student1</span><span class="token punctuation">></span></span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatement</span> pps <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            connection <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            pps <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">"select * from student1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            resultSet <span class="token operator">=</span> pps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token class-name">Student1</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                student<span class="token punctuation">.</span><span class="token function">setStuid</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"stuid"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                student<span class="token punctuation">.</span><span class="token function">setStuname</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"stuname"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                student<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                student<span class="token punctuation">.</span><span class="token function">setSex</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"sex"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            throwables<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            <span class="token function">close</span><span class="token punctuation">(</span>connection<span class="token punctuation">,</span>pps<span class="token punctuation">,</span>resultSet<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> list<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-service"><a href="#3-service" class="headerlink" title="3.service"></a>3.service</h4><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121155830655.png"> </p><h5 id="3-1接口"><a href="#3-1接口" class="headerlink" title="3.1接口"></a>3.1接口</h5><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//bean类名+Service=当前类名</span><span class="token comment">//service层主要定义业务逻辑，现阶段主要调取dao层</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentService</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//查询全部</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student1</span><span class="token punctuation">></span></span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="3-2实现类"><a href="#3-2实现类" class="headerlink" title="3.2实现类"></a>3.2实现类</h5><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentService</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">StudentDao</span> studentDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StudentDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student1</span><span class="token punctuation">></span></span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> studentDao<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-servlet"><a href="#4-servlet" class="headerlink" title="4.servlet"></a>4.servlet</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//C-->Controller 控制层</span><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/getstus"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//即使是get请求也会执行post</span>        <span class="token function">doPost</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//1.接收请求参数</span>        <span class="token comment">//2.调取service层方法</span>        <span class="token class-name">StudentService</span> studentService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StudentServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student1</span><span class="token punctuation">></span></span> stulist <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            stulist <span class="token operator">=</span> studentService<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            throwables<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//3.跳转页面</span>        <span class="token comment">//后台传递数据给前台</span>        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"stulist"</span><span class="token punctuation">,</span>stulist<span class="token punctuation">)</span><span class="token punctuation">;</span>        req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/show.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="5-util-连接数据库的工具包"><a href="#5-util-连接数据库的工具包" class="headerlink" title="5.util(连接数据库的工具包)"></a>5.util(连接数据库的工具包)</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DruidUtil</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DataSource</span> ds<span class="token punctuation">;</span>    <span class="token keyword">static</span><span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Properties</span> ppt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ppt<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">DruidUtil</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"druid.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ds <span class="token operator">=</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>ppt<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * 从连接池中取出一个连接给用户     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> ds<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            throwables<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> conn<span class="token punctuation">,</span> <span class="token class-name">Statement</span> state<span class="token punctuation">,</span> <span class="token class-name">ResultSet</span> rs<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            throwables<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            state<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            throwables<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            throwables<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="5-1配置文件"><a href="#5-1配置文件" class="headerlink" title="5.1配置文件"></a>5.1配置文件</h5><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121160155870.png"> </p><pre class="line-numbers language-java" data-language="java"><code class="language-java">url<span class="token operator">=</span>jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>javaweb<span class="token operator">?</span>useUnicode<span class="token operator">=</span><span class="token boolean">true</span><span class="token operator">&amp;</span>characterEncoding<span class="token operator">=</span>utf<span class="token operator">-</span><span class="token number">8</span><span class="token operator">&amp;</span>serverTimezone<span class="token operator">=</span><span class="token class-name">UTC</span>username<span class="token operator">=</span>rootpassword<span class="token operator">=</span>lxy18750112980driverClassName<span class="token operator">=</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span>initialSize<span class="token operator">=</span><span class="token number">5</span>maxActive<span class="token operator">=</span><span class="token number">10</span>minIdle<span class="token operator">=</span><span class="token number">5</span>maxWait<span class="token operator">=</span><span class="token number">3000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="二、V的部分"><a href="#二、V的部分" class="headerlink" title="二、V的部分"></a>二、V的部分</h3><h4 id="1-导包"><a href="#1-导包" class="headerlink" title="1.导包"></a>1.导包</h4><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121160408647.png"> </p><h4 id="2-index-jsp"><a href="#2-index-jsp" class="headerlink" title="2.index.jsp"></a>2.index.jsp</h4><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;&lt;html&gt;  &lt;head&gt;    &lt;title&gt;$Title$&lt;&#x2F;title&gt;  &lt;&#x2F;head&gt;  &lt;body&gt;  &lt;a href&#x3D;&quot;&#x2F;getstus&quot;&gt;查询学生列表&lt;&#x2F;a&gt;  &lt;&#x2F;body&gt;&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-show-jsp"><a href="#3-show-jsp" class="headerlink" title="3.show.jsp"></a>3.show.jsp</h4><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;&lt;%@taglib prefix&#x3D;&quot;c&quot; uri&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;jsp&#x2F;jstl&#x2F;core&quot; %&gt;&lt;html&gt;&lt;head&gt;    &lt;title&gt;Title&lt;&#x2F;title&gt;&lt;&#x2F;head&gt;&lt;body&gt;    &lt;h1&gt;show.jsp&lt;&#x2F;h1&gt;    &lt;table border&#x3D;&quot;1&quot; width&#x3D;&quot;500px&quot; bgcolor&#x3D;&quot;aqua&quot;&gt;        &lt;tr&gt;            &lt;td&gt;id&lt;&#x2F;td&gt;            &lt;td&gt;name&lt;&#x2F;td&gt;            &lt;td&gt;age&lt;&#x2F;td&gt;            &lt;td&gt;sex&lt;&#x2F;td&gt;        &lt;&#x2F;tr&gt;    &lt;c:forEach items&#x3D;&quot;$&#123;requestScope.stulist&#125;&quot; var&#x3D;&quot;stu&quot;&gt;        &lt;tr&gt;            &lt;td&gt;$&#123;stu.stuid&#125;&lt;&#x2F;td&gt;            &lt;td&gt;$&#123;stu.stuname&#125;&lt;&#x2F;td&gt;            &lt;td&gt;$&#123;stu.age&#125;&lt;&#x2F;td&gt;            &lt;td&gt;$&#123;stu.sex&#x3D;&#x3D;1?&#39;男&#39;:&#39;女&#39;&#125;&lt;&#x2F;td&gt;        &lt;&#x2F;tr&gt;    &lt;&#x2F;c:forEach&gt;    &lt;&#x2F;table&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="三、数据库"><a href="#三、数据库" class="headerlink" title="三、数据库"></a>三、数据库</h3><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121160705836.png"> </p><h3 id="四、样例展示"><a href="#四、样例展示" class="headerlink" title="四、样例展示"></a>四、样例展示</h3><h4 id="1-直接访问show-jsp"><a href="#1-直接访问show-jsp" class="headerlink" title="1.直接访问show.jsp"></a>1.直接访问show.jsp</h4><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121160922344.png"> </p><h4 id="2-index-jsp-1"><a href="#2-index-jsp-1" class="headerlink" title="2.index.jsp"></a>2.index.jsp</h4><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121160938416.png"> </p><h4 id="3-通过点击index-jsp内超链接访问show-jsp"><a href="#3-通过点击index-jsp内超链接访问show-jsp" class="headerlink" title="3.通过点击index.jsp内超链接访问show.jsp"></a>3.通过点击index.jsp内超链接访问show.jsp</h4><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121160957029.png"> </p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>会话跟踪和过滤器拦截器</title>
      <link href="/2021/11/21/%E4%BC%9A%E8%AF%9D%E8%B7%9F%E8%B8%AA%E5%92%8C%E8%BF%87%E6%BB%A4%E5%99%A8%E6%8B%A6%E6%88%AA%E5%99%A8/"/>
      <url>/2021/11/21/%E4%BC%9A%E8%AF%9D%E8%B7%9F%E8%B8%AA%E5%92%8C%E8%BF%87%E6%BB%A4%E5%99%A8%E6%8B%A6%E6%88%AA%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121161816512.png"></p><h1 id="Session和Cookie"><a href="#Session和Cookie" class="headerlink" title="Session和Cookie"></a>Session和Cookie</h1><h2 id="什么是会话跟踪技术"><a href="#什么是会话跟踪技术" class="headerlink" title="什么是会话跟踪技术"></a>什么是会话跟踪技术</h2><p>会话跟踪是Web程序中常⽤的技术，⽤来跟踪⽤户的整个会话。保持对⽤户会话期间的数据管理。常⽤<br>的会话跟踪技术是Cookie与Session。<br>Cookie通过在客户端记录信息确定⽤户身份<br>Session通过在服务器端记录信息确定⽤户身份。</p><h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><h3 id="1-什么是Cookie"><a href="#1-什么是Cookie" class="headerlink" title="1.什么是Cookie"></a>1.什么是Cookie</h3><pre class="line-numbers language-none"><code class="language-none"> Cookie是客户端(⼀般指浏览器)请求服务器后,服务器发给客户端的⼀个辨认标识，保存在客户端，当客户端再次向服务器发送请求时，会携带着这个辨认标识，服务器就可以通过这个标识来识别客户端的身份或状态等。 Cookie的作⽤：跟踪会话，记录⼀次会话中(即Session，⼀次会话可能会有多次请求，当然也可以有多个Cookie来跟踪不同的信息)的信息，这样服务器就会知道⽤户的状态，⽐如有没有登录成功，付款时购物⻋中的东⻄等，就相当于贴在客户端脑⻔上的纸条，浏览器看不到，但服务器看得到。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-Cookie的应⽤"><a href="#2-Cookie的应⽤" class="headerlink" title="2.Cookie的应⽤"></a>2.Cookie的应⽤</h3><h4 id="2-1-保持⽤户登录状态"><a href="#2-1-保持⽤户登录状态" class="headerlink" title="2.1 保持⽤户登录状态"></a>2.1 保持⽤户登录状态</h4><p>​    将⽤户的信息保存到Cookie中，并发送给浏览器，并且将有效时间设置为⼀个较⻓的时间，这样浏览器<br>在以后访问⽹站时，都会带着该Cookie，服务器以此来辨识⽤户，⽤户就不再需要输⼊⽤户名和密码等<br>信息。</p><h4 id="2-2-记录⽤户名"><a href="#2-2-记录⽤户名" class="headerlink" title="2.2 记录⽤户名"></a>2.2 记录⽤户名</h4><p> ⼀旦⽤户登录成功以后，下次再登录时，直接将Cookie中的⽤户名读取并显示出来，这样⽤户就不<br>需要再次输⼊⽤户名，只输⼊密码即可。</p><h3 id="3-Cookie的设置和获取"><a href="#3-Cookie的设置和获取" class="headerlink" title="3. Cookie的设置和获取"></a>3. Cookie的设置和获取</h3><h4 id="3-1-通过HttpServletResponse-addCookie的⽅式设置Cookie"><a href="#3-1-通过HttpServletResponse-addCookie的⽅式设置Cookie" class="headerlink" title="3.1 通过HttpServletResponse.addCookie的⽅式设置Cookie"></a>3.1 通过HttpServletResponse.addCookie的⽅式设置Cookie</h4><p>注意:new Cookie()时两个参数都是字符串</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//接收参数</span><span class="token class-name">String</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1.后台创建cookie</span><span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"uname"</span><span class="token punctuation">,</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//cookie.setMaxAge();</span><span class="token comment">//2.返回给前端</span>resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"index.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-2-服务端获取客户端携带的cookie：通过HttpServletRequest获取"><a href="#3-2-服务端获取客户端携带的cookie：通过HttpServletRequest获取" class="headerlink" title="3.2 服务端获取客户端携带的cookie：通过HttpServletRequest获取"></a>3.2 服务端获取客户端携带的cookie：通过HttpServletRequest获取</h4><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%  &#x2F;&#x2F;这里用request取是后端相对于前端是请求过来的！！!  Cookie[] cookies &#x3D; request.getCookies();  String value &#x3D; &quot;&quot;;  &#x2F;&#x2F;有cookie就从后端取出来&quot;uname&quot;是后端给cookie去的别名  if (cookies!&#x3D;null &amp;&amp; cookies.length&gt;0)&#123;    for (Cookie cookie : cookies) &#123;      if (cookie.getName().equals(&quot;uname&quot;))&#123;        value &#x3D; cookie.getValue();        break;      &#125;;    &#125;  &#125;  pageContext.setAttribute(&quot;unameCookie&quot;,value);%&gt;&lt;!--这样实现利用cookie保存上一次的用户名--&gt;用户名：&lt;input type&#x3D;&quot;text&quot; name&#x3D;&quot;username&quot; value&#x3D;&quot;$&#123;unameCookie&#125;&quot;&gt;&lt;br&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-删除Cookie"><a href="#4-删除Cookie" class="headerlink" title="4.删除Cookie"></a>4.删除Cookie</h3><p>通过设置同名Cookie的最⼤存活时间为0，删除Cookie是指使浏览器不再保存Cookie，使Cookie⽴即失效</p><p>举例：使name为username的Cookie⽴即失效</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//1.创建⼀个name为username的Cookie</span><span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token string">"aaa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2.设置Cookie的有效时间为0</span>cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//删除cookie的关键</span><span class="token comment">//3.将cookie发送给浏览器，来替换同名Cookie</span>response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-Cookie的有效时间"><a href="#5-Cookie的有效时间" class="headerlink" title="5.Cookie的有效时间"></a>5.Cookie的有效时间</h3><p> Cookie发送给浏览器以后，浏览器并不会永久保存，也就是到了⼀定的时间以后浏览器会⾃动销毁Cookie。Cookie的默认有效时间为⼀次会话(⼀次打开关闭浏览器的过程)，我们也可以⼿动指定Cookie的有效时间</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//setMaxAge⽤来设置Cookie的最⼤有效时间，需要int型的参数，代表有效的秒数</span>cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span>秒数<span class="token punctuation">)</span>；<span class="token comment">//当参数⼤于0时，会设置为指定的秒数</span>cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当参数等于0时,浏览器不会保存Cookie,Cookie⽴即失效</span>cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当参数⼩于0时，和不设置是⼀样，当前会话有效</span>cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置⼀个永久有效的Cookie，并⾮永久，只是使Cookie的⽣命很⻓⽽已</span>cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">24</span><span class="token operator">*</span><span class="token number">365</span><span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2><h3 id="1-什么是Session"><a href="#1-什么是Session" class="headerlink" title="1.什么是Session"></a>1.什么是Session</h3><p>​    Session是另⼀种记录客户状态的机制，不同的是<strong>Cookie保存在客户端浏览器</strong>中，⽽<strong>Session保存在服务器</strong>上。客户端浏览器访问服务器的时候，服务器把客户端信息以某种形式记录在服务器上。这就是Session。客户端浏览器再次访问时只需要从该Session中查找该客户的状态就可以了。<br>​    如果说Cookie机制是通过检查客户身上的“通⾏证”来确定客户身份的话，那么Session机制就是通过检查服务器上的“客户明细表”来确认客户身份。Session相当于程序在服务器上建⽴的⼀份客户档案，客户来访的时候只需要查询客户档案表就可以了。</p><h3 id="2-创建Session的格式"><a href="#2-创建Session的格式" class="headerlink" title="2.创建Session的格式"></a>2.创建Session的格式</h3><p>​     Session对应的类为javax.servlet.http.HttpSession类。每个来访者对应⼀个Session对象，所有该客户的状态信息都保存在这个Session对象⾥。<strong>Session对象是在客户端第⼀次请求服务器的时候创建的。</strong></p><p>​    Session也是⼀种key-value的属性对，通过getAttribute(Stringkey)和setAttribute(String key，Objectvalue)⽅法读写客户状态信息。Servlet⾥通过request.getSession()⽅法获取该客户的 Session</p><p>例如：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取Session对象</span>session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"loginTime"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置Session中的属性</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"登录时间为："</span> <span class="token operator">+</span><span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">)</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"loginTime"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取</span><span class="token class-name">Session</span>属性<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-Session的⽣命周期"><a href="#3-Session的⽣命周期" class="headerlink" title="3.Session的⽣命周期"></a>3.Session的⽣命周期</h3><p>​    Session保存在服务器端。<strong>为了获得更⾼的存取速度，服务器⼀般把Session放在内存⾥。每个⽤户都会</strong><br><strong>有⼀个独⽴的Session。如果Session内容过于复杂，当⼤量客户访问服务器时可能会导致内存溢出。因</strong><br><strong>此，Session⾥的信息应该尽量精简。</strong></p><p>​    Session在⽤户第⼀次访问服务器的时候⾃动创建。需要注意只有访问<strong>JSP、Servlet等程序时才会创建</strong><br><strong>Session</strong>，只访问<strong>HTML、IMAGE等静态资源并不会创建Session</strong>。如果尚未⽣成Session，也可以使<br>request.getSession(true)强制⽣成Session。<br>​    Session⽣成后，只要⽤户继续访问，服务器就会更新Session的最后访问时间，并维护该Session。⽤户<br>每访问服务器⼀次，⽆论是否读写Session，服务器都认为该⽤户的Session“活跃（active）”了⼀次。<br>​    由于会有越来越多的⽤户访问服务器，因此Session也会越来越多。为防⽌内存溢出，服务器会把⻓时间<br>内没有活跃的Session从内存删除。这个时间就是Session的超时时间。如果超过了超时时间没访问过服<br>务器，Session就⾃动失效了。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>用标签的形式在web<span class="token punctuation">.</span>xml里面设置session的最大活动时间<span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>session<span class="token operator">-</span>config<span class="token operator">></span>    <span class="token operator">&lt;</span>session<span class="token operator">-</span>timeout<span class="token operator">></span><span class="token number">30</span><span class="token operator">&lt;</span><span class="token operator">/</span>session<span class="token operator">-</span>timeout<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>session<span class="token operator">-</span>config<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//通过代码设置session的最大活动时间.单位（秒）</span>session<span class="token punctuation">.</span><span class="token function">setMaxInactiveInterval</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="4-Session常⽤的⽅法"><a href="#4-Session常⽤的⽅法" class="headerlink" title="4.Session常⽤的⽅法"></a>4.Session常⽤的⽅法</h3><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121145517213.png"> </p><h3 id="5-Sesssion的应⽤场景"><a href="#5-Sesssion的应⽤场景" class="headerlink" title="5.Sesssion的应⽤场景"></a>5.Sesssion的应⽤场景</h3><p>​    代码演示：1.登录 2.退出(创建Session和消除Session)</p><h3 id="6-Session和Cookie的区别"><a href="#6-Session和Cookie的区别" class="headerlink" title="6.Session和Cookie的区别"></a>6.Session和Cookie的区别</h3><p>​    (1) Cookie数据保存在客户端，Session数据保存在服务器端。<br>​    (2) Session是由应⽤服务器维持的⼀个服务器端的存储空间，⽤户在连接服务器时，会由服务器⽣成⼀<br>个唯⼀的SessionID,⽤该SessionID 为标识符来存取服务器端的Session存储空间。⽽SessionID这⼀数据<br>则是保存到客户端，⽤<strong>Cookie保存</strong>的，⽤户提交⻚⾯时，会将这⼀SessionID提交到服务器端，来存取<br>Session数据。这⼀过程，是不⽤开发⼈员⼲预的。所以⼀旦客户端禁⽤Cookie，那么Session也会失<br>效。<br>​    (3) Cookies是属于Session对象的⼀种。但有不同，Cookies不会占服务器资源，是存在客服端内存或者<br>⼀个Cookie的⽂本⽂件中；⽽Session则会占⽤服务器资源。所以，尽量不要使⽤Session，⽽使⽤<br>Cookies。但是我们⼀般认为Cookie是不可靠的，Cookies是保存在本机上的，但是其信息的完全可⻅性<br>且易于本地编辑性，往往可以引起很多的安全问题Session是可靠地。但是⽬前很多著名的站点也都⽤<br>Cookie</p><h2 id="Cookie和Session样例说明"><a href="#Cookie和Session样例说明" class="headerlink" title="Cookie和Session样例说明"></a>Cookie和Session样例说明</h2><p>​    话不多说，直接上代码：</p><h3 id="1-index-jsp"><a href="#1-index-jsp" class="headerlink" title="1.index.jsp"></a>1.index.jsp</h3><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;!--index.jsp页面--&gt;&lt;body&gt;&lt;%  &#x2F;&#x2F;这里用request取是后端相对于前端是请求过来的！！!  Cookie[] cookies &#x3D; request.getCookies();  String value &#x3D; &quot;&quot;;  &#x2F;&#x2F;有cookie就从后端取出来   &quot;uname&quot;是后端给cookie去的别名  if (cookies!&#x3D;null &amp;&amp; cookies.length&gt;0)&#123;    for (Cookie cookie : cookies) &#123;      if (cookie.getName().equals(&quot;uname&quot;))&#123;        value &#x3D; cookie.getValue();        break;      &#125;;    &#125;  &#125;  pageContext.setAttribute(&quot;unameCookie&quot;,value);%&gt;  &lt;form action&#x3D;&quot;login&quot; method&#x3D;&quot;post&quot;&gt;    用户名：&lt;input type&#x3D;&quot;text&quot; name&#x3D;&quot;username&quot; value&#x3D;&quot;$&#123;unameCookie&#125;&quot;&gt;&lt;br&gt;    密码：&lt;input type&#x3D;&quot;password&quot; name&#x3D;&quot;pass&quot;&gt;&lt;br&gt;    &lt;input type&#x3D;&quot;submit&quot; value&#x3D;&quot;login&quot;&gt;  &lt;&#x2F;form&gt;&lt;&#x2F;body&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121151208990.png"> </p><p>​    <strong>输入错误的用户名会重定向到首页，并且cookie会保存用户名</strong></p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121151301385.png"> </p><h3 id="2-success-jsp"><a href="#2-success-jsp" class="headerlink" title="2.success.jsp"></a>2.success.jsp</h3><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;!--这是success.jsp页面--&gt;&lt;body&gt;  &lt;h1&gt;success(testSession) 只有用户登录以后才能访问的页面&lt;&#x2F;h1&gt;当前登录用户是:$&#123;sessionScope.username&#125;&lt;br&gt;  &lt;a href&#x3D;&quot;loginout&quot;&gt;退出&lt;&#x2F;a&gt;&lt;&#x2F;body&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>​    <strong>取出session里的成功登陆用户名并且显示</strong></p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121151556018.png"> </p><h3 id="3-index-jsp里表单请求地址"><a href="#3-index-jsp里表单请求地址" class="headerlink" title="3.index.jsp里表单请求地址"></a>3.index.jsp里表单请求地址</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"/login"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"error.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"login-Servlet被执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//1.接收参数</span>        <span class="token class-name">String</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> pass <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2.判断正误</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"123456"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>pass<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">//session存值</span>            <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>            session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span>pass<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//通过代码设置session的最大活动时间.单位（秒）</span>            session<span class="token punctuation">.</span><span class="token function">setMaxInactiveInterval</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//登录成功</span>            <span class="token comment">//不管是重定向还是转发，session数据是不会丢失的，重定向时request中的数据会丢失</span>            resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"success.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//1.后台创建cookie</span>            <span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"uname"</span><span class="token punctuation">,</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//cookie.setMaxAge();</span>            <span class="token comment">//2.返回给前端</span>            resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>            resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"index.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-success-jsp超链接的请求地址"><a href="#4-success-jsp超链接的请求地址" class="headerlink" title="4.success.jsp超链接的请求地址"></a>4.success.jsp超链接的请求地址</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/loginout"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginOutServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//使session失效</span>        req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"index.jsp "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="Filter和Listener"><a href="#Filter和Listener" class="headerlink" title="Filter和Listener"></a>Filter和Listener</h1><h2 id="过滤器-Filter"><a href="#过滤器-Filter" class="headerlink" title="过滤器(Filter)"></a>过滤器(Filter)</h2><h3 id="1-什么是过滤器"><a href="#1-什么是过滤器" class="headerlink" title="1.什么是过滤器"></a>1.什么是过滤器</h3><p>​    过滤器实际上就是对web资源进⾏拦截，做⼀些处理后再交给下⼀个过滤器或servlet处理，通常都</p><p>是⽤来拦截request进⾏处理的，也可以对返回的response进⾏拦截处理</p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121152206804.png"></p><h3 id="2-过滤器的语法格式"><a href="#2-过滤器的语法格式" class="headerlink" title="2.过滤器的语法格式"></a>2.过滤器的语法格式</h3><h4 id="2-1-创建⼀个类实现Filter接⼝"><a href="#2-1-创建⼀个类实现Filter接⼝" class="headerlink" title="2.1.创建⼀个类实现Filter接⼝"></a>2.1.创建⼀个类实现Filter接⼝</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FirstFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="2-2-重写接⼝中的⽅法"><a href="#2-2-重写接⼝中的⽅法" class="headerlink" title="2.2.重写接⼝中的⽅法"></a>2.2.重写接⼝中的⽅法</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//当服务器启动时执行init</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"初始化filter"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//请求和响应时都会执行这个方法</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"过滤器开始"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span>servletRequest<span class="token punctuation">;</span>    <span class="token class-name">HttpServletResponse</span> response <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">)</span>servletResponse<span class="token punctuation">;</span><span class="token comment">//处理乱码</span>    request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//防止用户在未登录的情况下访问资源</span>    <span class="token class-name">String</span> requestURI <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获得请求地址</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"requestURI="</span><span class="token operator">+</span>requestURI<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Object</span> username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>requestURI<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"success.jsp"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> username<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"index.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//调取下一个过滤器,或者调取Servlet</span>    filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>servletRequest<span class="token punctuation">,</span>servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"过滤器结束"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"销毁filter"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-3-在web-xml⽂件中配置"><a href="#2-3-在web-xml⽂件中配置" class="headerlink" title="2.3.在web.xml⽂件中配置"></a>2.3.在web.xml⽂件中配置</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token generics"><span class="token punctuation">&lt;</span>filter<span class="token punctuation">></span></span>    <span class="token operator">&lt;</span>filter<span class="token operator">-</span>name<span class="token operator">></span>f1<span class="token operator">&lt;</span><span class="token operator">/</span>filter<span class="token operator">-</span>name<span class="token operator">></span>    <span class="token operator">&lt;</span>filter<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">></span><span class="token class-name"><span class="token namespace">util<span class="token punctuation">.</span></span>FirstFilter</span><span class="token operator">&lt;</span><span class="token operator">/</span>filter<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>filter<span class="token operator">></span><span class="token operator">&lt;</span>filter<span class="token operator">-</span>mapping<span class="token operator">></span>    <span class="token operator">&lt;</span>filter<span class="token operator">-</span>name<span class="token operator">></span>f1<span class="token operator">&lt;</span><span class="token operator">/</span>filter<span class="token operator">-</span>name<span class="token operator">></span>    <span class="token operator">&lt;</span>url<span class="token operator">-</span>pattern<span class="token operator">></span><span class="token comment">/*&lt;/url-pattern>   &lt;!--/*表示不管从哪里访问都会执行util.FirstFilter拦截器的操作-->&lt;/filter-mapping></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-使⽤场景"><a href="#3-使⽤场景" class="headerlink" title="3.使⽤场景"></a>3.使⽤场景</h3><p>3.1.如何防⽌⽤户未登录就执⾏后续操作<br>     String name=(String)session.getAttribute(“key”);<br>     if(name==null){ //跳转到登录⻚⾯ }<br>3.2.设置编码⽅式–统⼀设置编码<br>3.3.加密解密(密码的加密和解密)<br>3.4.⾮法⽂字筛选<br>3.5.下载资源的限制<br>过滤器的特点:在servlet之前和之后都会被执⾏</p><h2 id="监听器-Listener"><a href="#监听器-Listener" class="headerlink" title="监听器(Listener)"></a>监听器(Listener)</h2><h3 id="1-什么是监听器"><a href="#1-什么是监听器" class="headerlink" title="1.什么是监听器"></a>1.什么是监听器</h3><p> 监听器就是监听某个域对象的的状态变化的组件<br> 监听器的相关概念：<br>     事件源：被监听的对象(三个域对象 request、session、servletContext)<br>     监听器：监听事件源对象事件源对象的状态的变化都会触发监听器<br>     注册监听器：将监听器与事件源进⾏绑定<br>     响应⾏为：监听器监听到事件源的状态变化时所涉及的功能代码（程序员编写代码）</p><h3 id="2-监听器分类"><a href="#2-监听器分类" class="headerlink" title="2.监听器分类"></a>2.监听器分类</h3><p> 第⼀维度按照被监听的对象划分：ServletRequest域、HttpSession域、ServletContext域<br> 第⼆维度按照监听的内容分：监听域对象的创建与销毁的、监听域对象的属性变化的</p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211121153945620.png"></p><h3 id="3-监听三⼤域对象的创建与销毁的监听器"><a href="#3-监听三⼤域对象的创建与销毁的监听器" class="headerlink" title="3.监听三⼤域对象的创建与销毁的监听器"></a>3.监听三⼤域对象的创建与销毁的监听器</h3><p>​        <strong>监听器的编写步骤（重点）：</strong></p><p>​             编写⼀个监听器类去实现监听器接⼝<br>​             覆盖监听器的⽅法<br>​             需要在web.xml中进⾏配置—注册</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>配置监听器<span class="token operator">--</span><span class="token operator">></span><span class="token generics"><span class="token punctuation">&lt;</span>listener<span class="token punctuation">></span></span>    <span class="token operator">&lt;</span>listener<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">></span><span class="token class-name"><span class="token namespace">util<span class="token punctuation">.</span></span>SessionListener</span><span class="token operator">&lt;</span><span class="token operator">/</span>listener<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>listener<span class="token operator">></span><span class="token generics"><span class="token punctuation">&lt;</span>listener<span class="token punctuation">></span></span>    <span class="token operator">&lt;</span>listener<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">></span><span class="token class-name"><span class="token namespace">util<span class="token punctuation">.</span></span>AttributeListener</span><span class="token operator">&lt;</span><span class="token operator">/</span>listener<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>listener<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SessionListener</span> <span class="token keyword">implements</span> <span class="token class-name">HttpSessionListener</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sessionCreated</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionEvent</span> httpSessionEvent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"session的创建"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        httpSessionEvent<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sessionDestroyed</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionEvent</span> httpSessionEvent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"session的销毁"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AttributeListener</span> <span class="token keyword">implements</span> <span class="token class-name">HttpSessionAttributeListener</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attributeAdded</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionBindingEvent</span> httpSessionBindingEvent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"session存值,"</span><span class="token operator">+</span>httpSessionBindingEvent<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span>httpSessionBindingEvent<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attributeRemoved</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionBindingEvent</span> httpSessionBindingEvent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"session移除数据"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attributeReplaced</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionBindingEvent</span> httpSessionBindingEvent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Servlet </tag>
            
            <tag> Cookie </tag>
            
            <tag> Session </tag>
            
            <tag> Filter </tag>
            
            <tag> Listener </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jsp简单入门必备知识</title>
      <link href="/2021/11/18/Jsp%E7%AE%80%E5%8D%95%E5%85%A5%E9%97%A8%E5%BF%85%E5%A4%87%E7%9F%A5%E8%AF%86/"/>
      <url>/2021/11/18/Jsp%E7%AE%80%E5%8D%95%E5%85%A5%E9%97%A8%E5%BF%85%E5%A4%87%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211118153900486.png"></p><h2 id="一、什么是Jsp"><a href="#一、什么是Jsp" class="headerlink" title="一、什么是Jsp"></a>一、什么是Jsp</h2><p>​    JSP全名为Java Server Pages，中⽂名叫java服务器⻚⾯，其根本是⼀个简化的Servlet设计，它 是由</p><p>Sun Microsystems公司倡导、许多公司参与⼀起建⽴的⼀种动态⽹⻚技术标准。JSP技术有点类似ASP技</p><p>术，它是在传统的⽹⻚HTML⽂件(<em>.htm,</em>.html)中插⼊Java程序段(Scriptlet)和JSP标记(tag)，从⽽形成</p><p>JSP⽂件，后缀名为(*.jsp)。 ⽤JSP开发的Web应⽤是跨平台的，既能在Linux下运⾏，也能在其他操作系</p><p>统上运⾏。</p><p>​     JSP将⽹⻚逻辑与⽹⻚设计的显示分离，⽀持可重⽤的基于组件的设计，使基于Web的应⽤程序的开</p><p>发变得迅速和容易。</p><p>*.html 静态⻚⾯(包含固定的⻚⾯内容)</p><p>*.jsp 动态⻚⾯(⻚⾯数据可以动态更新,⽀持嵌套java代码和html代码)</p><h2 id="二、为什么会出现Jsp"><a href="#二、为什么会出现Jsp" class="headerlink" title="二、为什么会出现Jsp"></a>二、为什么会出现Jsp</h2><p>​    1.servlet展示信息的不⽅便，引⼊了JSP。</p><p>​    2.JSP本质上也是⼀个servlet！！！！！！</p><p>​    3.JSP就是在HTML⻚⾯中嵌⼊了java代码。</p><h2 id="三、Jsp如何嵌套Java代码"><a href="#三、Jsp如何嵌套Java代码" class="headerlink" title="三、Jsp如何嵌套Java代码"></a>三、Jsp如何嵌套Java代码</h2><p>​    答案:⼩脚本(&lt;% java代码%&gt;)</p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">声明标签 &lt;%!变量或者⽅法声明%&gt;表达式标签 &lt;%&#x3D; 表达式%&gt; 在⻚⾯上显示的效果程序代码标签 &lt;%java代码%&gt; ⻚⾯上动态展示内容<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>​    page指令:</p><p>​    &lt;%@ page language=”java” import=”java.util.*” pageEncoding=”UTF-8”%&gt;</p><pre class="line-numbers language-none"><code class="language-none">&lt;body&gt; &lt;%! int i&#x3D;10;%&gt;&lt;!--成员变量--&gt; &lt;%! public void show()&#123;&#125;%&gt; &lt;!--成员⽅法--&gt; &lt;%&#x3D;i%&gt; &lt;!--输出变量值--&gt; &lt;&#x2F;body&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>​    如果把⼀个数据存在request域(其他域也是一样)中，取值操作如下：</p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%request.setAttribute(&quot;a1&quot;,&quot;AAA&quot;);%&gt;request&#x3D;&lt;%&#x3D;request.getAttribute(&quot;a1&quot;)%&gt;&lt;br&gt;&lt;%    &#x2F;&#x2F;response.sendRedirect();    response.getWriter();%&gt;&lt;%    session.setAttribute(&quot;b1&quot;,&quot;bbb&quot;);%&gt;session:&lt;%&#x3D;session.getAttribute(&quot;b1&quot;)%&gt; &lt;br&gt;&lt;%    &#x2F;&#x2F;application表示的是整个程序在运行期间    application.setAttribute(&quot;c1&quot;,&quot;ccc&quot;);%&gt;application:&lt;%&#x3D;application.getAttribute(&quot;c1&quot;)%&gt; &lt;br&gt;&lt;%    &#x2F;&#x2F;page&#x3D;this，表示当前页面    pageContext.setAttribute(&quot;d1&quot;,&quot;ddd&quot;);%&gt;pageContext:&lt;%&#x3D;pageContext.getAttribute(&quot;d1&quot;)%&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211118131923632.png"><br>    另外开一个jsp页面取这些值：（因为服务端没有存储处理请求，直接返回页面所以request为空，因为不是同一个页面所以在前一个页面用pageContext存的值在新开的页面也是为空)</p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;h1&gt;test2.jsp&lt;&#x2F;h1&gt;request&#x3D;&lt;%&#x3D;request.getAttribute(&quot;a1&quot;)%&gt;&lt;br&gt;session:&lt;%&#x3D;session.getAttribute(&quot;b1&quot;)%&gt; &lt;br&gt;application:&lt;%&#x3D;application.getAttribute(&quot;c1&quot;)%&gt; &lt;br&gt;pageContext:&lt;%&#x3D;pageContext.getAttribute(&quot;d1&quot;)%&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211118132149734.png"> </p><h2 id="四、Jsp的工作原理"><a href="#四、Jsp的工作原理" class="headerlink" title="四、Jsp的工作原理"></a>四、Jsp的工作原理</h2><p>​    当浏览器访问tomcat服务器.jsp页面会翻译成index_jsp.java⽂件，对这个java⽂件进⾏编译，产⽣⼀个</p><p>index.jsp⽂件，会将index.jsp翻译成index_jsp.java⽂件，对这个java⽂件进⾏编译，产⽣⼀个</p><p>index_jsp.class⽂件，将class⽂件加载运⾏。将JSP翻译成java⽂件，它是将JSP中的所有的HTML代码通</p><p>过流进⾏输出，也就是说最终翻译成class，被虚拟机加载，它本质是servlet，它就会往回响应，响应回</p><p>去就是把JSP中的HTML代码以流的⽅式写回浏览器。所以在JSP中展示出了HTML代码</p><h2 id="五、JSP的九大内置对象"><a href="#五、JSP的九大内置对象" class="headerlink" title="五、JSP的九大内置对象"></a>五、JSP的九大内置对象</h2><p>​     JSP中⼀共预先定义了9个这样的对象，分别为：request、response、session、application、out、</p><p>pagecontext、config、page、exception</p><h3 id="1-request对象"><a href="#1-request对象" class="headerlink" title="1.request对象"></a>1.request对象</h3><p>​    request 对象是 javax.servlet.httpServletRequest类型的对象。 该对象代表了客户端的请求信</p><p>息，主要⽤于接受通过HTTP协议传送到服务器的数据。（包括头信息、系统信息、请求⽅式以及请求参</p><p>数等）。request对象的作⽤域为⼀次请求。</p><h3 id="2-response对象"><a href="#2-response对象" class="headerlink" title="2.response对象"></a>2.response对象</h3><p>​    response 代表的是对客户端的响应，主要是将JSP容器处理过的对象传回到客户端。response</p><p>对象也具有作⽤域，它只在JSP⻚⾯内有效。所属类型:HttpServletResponse</p><h3 id="3-session对象"><a href="#3-session对象" class="headerlink" title="3. session对象"></a>3. session对象</h3><p>​    session 对象是由服务器⾃动创建的与⽤户请求相关的对象。服务器为每个⽤户都⽣成⼀个</p><p>session对象，⽤于保存该⽤户的信息，跟踪⽤户的操作状态。session对象内部使⽤Map类来保存数</p><p>据，因此保存数据的格式为 “Key/value”。 session对象的value可以使复杂的对象类型，⽽不仅仅局限</p><p>于字符串类型。HttpSession</p><h3 id="4-application对象"><a href="#4-application对象" class="headerlink" title="4.application对象"></a>4.application对象</h3><p>​    application 对象可将信息保存在服务器中，直到服务器关闭，否则application对象中保存的信息</p><p>会在整个应⽤中都有效。与session对象相⽐，application对象⽣命周期更⻓，类似于系统的“全局变量”</p><p>ServletContext</p><p>区别：</p><p> request:单次请求</p><p> session:浏览器访问期间(会话期间)</p><p> application:服务器启动期间,所存的数据可以跨浏览器</p><h3 id="5-out对象"><a href="#5-out对象" class="headerlink" title="5.out对象"></a>5.out对象</h3><p>​    out 对象⽤于在Web浏览器内输出信息，并且管理应⽤服务器上的输出缓冲区。在使⽤ out 对</p><p>象输出数据时，可以对数据缓冲区进⾏操作，及时清除缓冲区中的残余数据，为其他的输出让出缓冲空</p><p>间。待数据输出完毕后，要及时关闭输出流。</p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%out.print(&quot;&lt;script&gt;alert(&#39;success&#39;)&lt;&#x2F;script&gt;&quot;);%&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="6-pageContext对象"><a href="#6-pageContext对象" class="headerlink" title="6.pageContext对象"></a>6.pageContext对象</h3><p>​    pageContext 对象的作⽤是取得任何范围的参数，通过它可以获取 JSP⻚⾯的out、</p><p>request、reponse、session、application 等对象。pageContext对象的创建和初始化都是由容器来完</p><p>成的，在JSP⻚⾯中可以直接使⽤ pageContext对象。（也就是打开jsp本页面对象）</p><h3 id="7-config对象"><a href="#7-config对象" class="headerlink" title="7.config对象"></a>7.config对象</h3><p>​    config 对象的主要作⽤是取得服务器的配置信息。通过 pageConext对象的 getServletConfig() ⽅法</p><p>可以获取⼀个config对象。当⼀个Servlet 初始化时，容器把某些信息通过config对象传递给这个</p><p>Servlet。 开发者可以在web.xml ⽂件中为应⽤程序环境中的Servlet程序和JSP⻚⾯提供初始化参数。</p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&#x2F;&#x2F;将image路径转换成服务器端的路径String url&#x3D; config.getServletContext().getRealPath(&quot;&#x2F;image&quot;);&lt;h1&gt;url&#x3D;&lt;%&#x3D;url %&gt;&lt;&#x2F;h1&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="8-page对象"><a href="#8-page对象" class="headerlink" title="8.page对象"></a>8.page对象</h3><p>​    page 对象代表JSP本身，只有在JSP⻚⾯内才是合法的。 page隐含对象本质上包含当前 Servlet</p><p>接⼝引⽤的变量，类似于Java编程中的 this 指针。</p><h3 id="9-exception对象"><a href="#9-exception对象" class="headerlink" title="9.exception对象"></a>9.exception对象</h3><p>​    　exception 对象的作⽤是显示异常信息，只有在包含 isErrorPage=”true” 的⻚⾯中才可以被使⽤，</p><p>在⼀般的JSP⻚⾯中使⽤该对象将⽆法编译JSP⽂件。excepation对象和Java的所有对象⼀样，都具有系</p><p>统提供的继承结构。exception 对象⼏乎定义了所有异常情况。在Java程序中，可以使⽤try/catch关键</p><p>字来处理异常情况； 如果在JSP⻚⾯中出现没有捕获到的异常，就会⽣成 exception 对象，并把</p><p>exception 对象传送到在page指令中设定的错误⻚⾯中，然后在错误⻚⾯中处理相应的 exception 对</p><p>象。</p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; errorPage&#x3D;&quot;test2.jsp&quot;&lt;--表示的是当这个页面有异常的时候，会跳转到test2.jsp--&gt;        &lt;%&#x3D;6&#x2F;0%&gt;  &lt;--这个页面的除0异常错误--&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; isErrorPage&#x3D;&quot;true&quot; %&gt;&lt;--声明错误的页面isErrorPage要为&#39;true&#39;--&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211118134640646.png"> </p><p>发现当访问有错误信息的test.jsp页面时，会自动跳转到test2.jsp页面，并且显示出报错信息。/ by zero</p><p>jsp的作⽤域:</p><p>pageContext -&gt; request -&gt; session -&gt; application</p><p>当前⻚⾯ 单次请求有效 当前会话期间 服务器运⾏期间有效</p><h2 id="六、Jsp的指令"><a href="#六、Jsp的指令" class="headerlink" title="六、Jsp的指令"></a>六、Jsp的指令</h2><p>JSP指令⽤来设置整个JSP⻚⾯相关的属性，如⽹⻚的编码⽅式和脚本语⾔。</p><p>语法格式如下：</p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ directive attribute&#x3D;&quot;value&quot; %&gt;directive：指令名称 attribute 属性名 value:属性值<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="1-page指令"><a href="#1-page指令" class="headerlink" title="1.page指令"></a>1.page指令</h3><p>Page指令为容器提供当前⻚⾯的使⽤说明<strong>⼀个JSP⻚⾯</strong>可以包含多个page指令</p><p>Page指令的语法格式：</p><p><strong>&lt;%@ page attribute=”value” %&gt;</strong></p><p>举例：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">%</span>@ page <span class="token keyword">import</span><span class="token operator">=</span><span class="token string">"java.util.List"</span> <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span>@ page <span class="token keyword">import</span><span class="token operator">=</span><span class="token string">"java.util.ArrayList"</span> <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span>@ page <span class="token keyword">import</span><span class="token operator">=</span><span class="token string">"java.util.Date"</span> <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">--</span>java<span class="token operator">:</span>解释该JSP⽂件时采⽤的语⾔，⼀般为java语⾔，默认为java<span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">--</span><span class="token function">contentType</span><span class="token punctuation">(</span>有效的⽂档类型<span class="token punctuation">)</span>客户端浏览器根据该属性判断⽂档类型，例如 HTML格式为text<span class="token operator">/</span>html、纯⽂本格式为text<span class="token operator">/</span>plain、JPG图像为image<span class="token operator">/</span>jpeg、GIF图像为image<span class="token operator">/</span>gifWORD⽂档为application<span class="token operator">/</span>msword，该属性常跟着charset设置编码⼀起，作⽤是通知服务器和浏览器都使⽤同⼀个码表<span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span>@ page contentType<span class="token operator">=</span><span class="token string">"text/html;charset=UTF-8"</span> language<span class="token operator">=</span><span class="token string">"java"</span> <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">-</span>errorpage<span class="token operator">:</span>指明⼀个错误⻚⾯，如果该JSP程序抛出⼀个未捕捉的异常，则转到errorPage指定的⻚⾯，errorPage指定的⻚isErrorPage属性为<span class="token boolean">true</span>，且内置的exception对象为未捕捉的异常<span class="token operator">--</span><span class="token operator">-></span><span class="token operator">&lt;</span><span class="token operator">%</span>@ page contentType<span class="token operator">=</span><span class="token string">"text/html;charset=UTF-8"</span> language<span class="token operator">=</span><span class="token string">"java"</span> errorPage<span class="token operator">=</span><span class="token string">"test2.jsp"</span><span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>isErrorPage<span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%</span>@ page contentType<span class="token operator">=</span><span class="token string">"text/html;charset=UTF-8"</span> language<span class="token operator">=</span><span class="token string">"java"</span> isErrorPage<span class="token operator">=</span><span class="token string">"true"</span> <span class="token operator">%</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-include指令"><a href="#2-include指令" class="headerlink" title="2.include指令"></a>2.include指令</h3><p>JSP可以通过include指令来包含其他⽂件。<strong>被包含的⽂件可以是JSP⽂件、HTML⽂件或⽂本⽂件</strong>。包含的⽂件就好像是该JSP⽂件的⼀部分，会被同时编译执⾏。</p><p>Include指令的语法格式如下：</p><p>&lt;%@ include file=”⽂件相对 url 地址” %&gt;</p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ include file&#x3D;&quot;⽂件相对 url 地址&quot; %&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>include 指令中的⽂件名实际上是⼀个相对的 URL 地址。</p><p>如果您没有给⽂件关联⼀个路径，JSP编译器默认在当前路径下寻找。</p><p>举例：</p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;body&gt;    &lt;%@include file&#x3D;&quot;top.jsp&quot;%&gt;    &lt;%@include file&#x3D;&quot;middle.jsp&quot;%&gt;    &lt;%@include file&#x3D;&quot;buttom.jsp&quot;%&gt;&lt;&#x2F;body&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211118140651558.png"> </p><h3 id="3-taglib指令"><a href="#3-taglib指令" class="headerlink" title="3.taglib指令"></a>3.taglib指令</h3><pre><code> JSP API允许⽤户⾃定义标签，⼀个⾃定义标签库就是⾃定义标签的集合。</code></pre><p>​     Taglib指令引⼊⼀个⾃定义标签集合的定义，包括库路径、⾃定义标签。</p><p>格式：</p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ taglib uri&#x3D;&quot;uri&quot; prefix&#x3D;&quot;&quot; %&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="七、状态码"><a href="#七、状态码" class="headerlink" title="七、状态码"></a>七、状态码</h2><p>常见举例：</p><p>200 OK 请求被确认</p><p>400 Bad Request 服务器⽆法识别请求</p><p>403 Forbidden 禁⽌访问所请求的⻚⾯</p><p>404 Not Found 服务器⽆法找到所请求的⻚⾯</p><p>500 Internal Server Error 请求不完整，服务器遇⻅了出乎意料的状况</p><p>501 Not Implemented     请求不完整，服务器不提供所需要的功能</p><h2 id="八、EL表达式"><a href="#八、EL表达式" class="headerlink" title="八、EL表达式"></a>八、EL表达式</h2><p><strong>（1）</strong>什么Expression Language表达式语⾔</p><p>最初定义于JSTL1.0部分</p><p>在JSP2.0中，EL从JSTL中剥离出来，放置在JSP规范中，称为JSP2.0规范的⼀部分</p><p>在JSP中使⽤EL表达式，可以简化对象和变量的访问是EL表达式</p><p><strong>（2）</strong>EL表达式语法</p><p>语法格式：**${需要展示信息的名字}**</p><p>注意：</p><p><strong>当表达式没有指定变量或者对象的范围时，</strong></p><p><strong>那么容器会依次从pageContext—&gt;request—&gt;session—&gt;application中查找该变量或对象,我们可以</strong></p><p><strong>通过隐含对象获得指定作⽤域的值:</strong></p><p>pageScope对象，⽤于获取当前⻚⾯的属性值</p><p>requestScope对象，⽤于获取请求范围的属性值</p><p>sessionScope对象，⽤于获取会话范围的属性值</p><p>applicationScope对象，⽤于获取程序范围的属性值</p><p><strong>语法:</strong></p><p> ${requestScope.key}</p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;body&gt;    &lt;h1&gt;top.jsp&lt;&#x2F;h1&gt;    &lt;%        &#x2F;&#x2F;EL表达式如果要读取变量，该变量一定要在作用域中：        &#x2F;&#x2F;pageContext,request,session,application        int a &#x3D; 10;        pageContext.setAttribute(&quot;a1&quot;,a);        List list &#x3D; new ArrayList();        list.add(&quot;abc&quot;);        pageContext.setAttribute(&quot;a2&quot;,list);        Map map &#x3D; new HashMap();        map.put(&quot;k1&quot;,&quot;key&quot;);        pageContext.setAttribute(&quot;a3&quot;,map);        &#x2F;&#x2F;如果在相同key的前提下，不同作用域，el表达式会选择展示哪一个值?        pageContext.setAttribute(&quot;a4&quot;,&quot;pageContext内容&quot;);        request.setAttribute(&quot;a4&quot;,&quot;request内容&quot;);        session.setAttribute(&quot;a4&quot;,&quot;session内容&quot;);        application.setAttribute(&quot;a4&quot;,&quot;application内容&quot;);    %&gt;    $&#123;20+30&#125;&lt;br&gt;    $&#123;20&gt;30&#125;&lt;br&gt;    $&#123;20&lt;30&#125;&lt;br&gt;    $&#123;20&gt;30?&quot;aaa&quot;:&quot;bbb&quot;&#125;&lt;br&gt;    a&#x3D;$&#123;a1&#125;&lt;br&gt;    abc&#x3D;$&#123;a2[0]&#125;&lt;br&gt;    k1&#x3D;$&#123;a3.k1&#125;&lt;br&gt;    不指定作用域a4&#x3D;$&#123;a4&#125;&lt;!--会显示pageContext内容，el表达式会默认从低到高范围找，找到就不在访问后面的--&gt;&lt;br&gt;    指定作用域session的a4&#x3D;$&#123;sessionScope.a4&#125;&lt;br&gt;    request作用域的a4&#x3D;$&#123;requestScope.a4&#125;&lt;br&gt;    pageContext的a4&#x3D;$&#123;pageScope.a4&#125;&lt;br&gt;    application的a4&#x3D;$&#123;applicationScope.a4&#125;&lt;&#x2F;body&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211118141959989.png"> </p><h2 id="九、JSTL"><a href="#九、JSTL" class="headerlink" title="九、JSTL"></a>九、JSTL</h2><h3 id="1-什么是JSTL"><a href="#1-什么是JSTL" class="headerlink" title="(1)什么是JSTL"></a><strong>(1)什么是JSTL</strong></h3><p>JSP标准标签库（JSTL）是⼀个JSP标签集合，它封装了JSP应⽤的通⽤核⼼功能。</p><p>JSTL⽀持通⽤的、结构化的任务，⽐如迭代，条件判断，XML⽂档操作，国际化标签SQL标签。 除了</p><p><strong>这些，它还提供了⼀个框架来使⽤集成JSTL的⾃定义标签。</strong></p><p>根据JSTL标签所提供的功能，可以将其分为5个类别。<strong>核⼼标签 格式化标签 sql标签xml标签jstl函数</strong></p><h3 id="2-JSTL的作⽤和语法格式"><a href="#2-JSTL的作⽤和语法格式" class="headerlink" title="(2) JSTL的作⽤和语法格式"></a><strong>(2) JSTL的作⽤和语法格式</strong></h3><p><strong>作⽤：简化jsp⻚⾯编写代码</strong></p><p><strong>语法格式：</strong></p><ol><li>下载 jakarta-taglibs-standard-1.1.2.zip 包并解压，将 jakarta-taglibs-standard-1.1.2/lib/ 下的两</li></ol><p>个 jar ⽂件：standard.jar 和 jstl.jar ⽂件拷⻉到 /WEB-INF/lib/ 下。</p><p>​    <img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211118142602885.png"></p><ol start="2"><li>在JSP⻚⾯中引⼊&lt;%@ taglib prefix=”⻚⾯使⽤的名称” uri=”功能范围的路径”%&gt;    </li></ol><table><thead><tr><th><strong>功能范围</strong></th><th><strong>Uri</strong></th><th><strong>前缀</strong></th></tr></thead><tbody><tr><td>core</td><td><a href="http://java.sun.com/jsp/jstl/core">http://java.sun.com/jsp/jstl/core</a></td><td>c</td></tr><tr><td>i18n</td><td><a href="http://java.sun.com/jsp/jstl/fmt">http://java.sun.com/jsp/jstl/fmt</a></td><td>fmt</td></tr><tr><td>sql</td><td><a href="http://java.sun.com/jsp/jstl/sql">http://java.sun.com/jsp/jstl/sql</a></td><td>sql</td></tr><tr><td>xml</td><td><a href="http://java.sun.com/jsp/jstl/xml">http://java.sun.com/jsp/jstl/xml</a></td><td>x</td></tr><tr><td>functions</td><td><a href="http://java.sun.com/jsp/jstl/function">http://java.sun.com/jsp/jstl/function</a></td><td>fn</td></tr></tbody></table><h3 id="3-核⼼标签"><a href="#3-核⼼标签" class="headerlink" title="(3) 核⼼标签"></a><strong>(3)</strong> <strong>核⼼标签</strong></h3><p>①核⼼标签是最常⽤的 JSTL标签。引⽤核⼼标签库的语法如下：</p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ taglib prefix&#x3D;&quot;c&quot; uri&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;jsp&#x2F;jstl&#x2F;core&quot; %&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>② 核⼼标签的分类</strong></p><p><strong>表达式操作</strong> <strong>out</strong>、<strong>set</strong>、<strong>remove</strong>、<strong>catch</strong></p><p><strong>流程控制</strong> <strong>if</strong>、<strong>choose</strong>、<strong>when</strong>、<strong>otherwise</strong></p><p><strong>迭代操作</strong> <strong>forEach</strong>、<strong>forTokens</strong></p><p><strong>URL</strong> <strong>操作</strong> <strong>import</strong>、<strong>param</strong>、<strong>url</strong>、<strong>redirect</strong></p><p><strong>Set</strong> <strong>标签</strong></p><p><strong>＜c:set&gt;主要⽤来将变量存储⾄JSP范围中 或是JavaBean的属性或Map对象中</strong></p><p><strong>＜c:out&gt;主要⽤来显示数据的内容</strong></p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;c:set var&#x3D;&quot;uname&quot; value&#x3D;&quot;张三&quot; scope&#x3D;&quot;session&quot;&gt;&lt;&#x2F;c:set&gt;&lt;c:out value&#x3D;&quot;$&#123;sessionScope.uname&#125;&quot;&gt;&lt;&#x2F;c:out&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>＜:remove&gt;主要负责移除变量</strong></p><p><strong>＜c:if&gt;主要⽤于进⾏if判断,如果为true,则输出标签体中的内容</strong> </p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;c:if test&#x3D;&quot;$&#123;uname&#x3D;&#x3D;&#39;张三&#39;&#125;&quot;&gt;    这是张三&lt;&#x2F;c:if&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>＜c:choose&gt;,＜c:when&gt;,＜c:otherwise&gt;作⽤相当于if-else</strong> </p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;c:choose&gt;    &lt;c:when test&#x3D;&quot;$&#123;uname&#x3D;&#x3D;&#39;张三&#39;&#125;&quot;&gt;        c-choose:张三    &lt;&#x2F;c:when&gt;    &lt;c:otherwise&gt;        c-choose:不是张三    &lt;&#x2F;c:otherwise&gt;&lt;&#x2F;c:choose&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>＜c:forEach&gt;循环控制，它可以将数组,集合(Collection)中的成员循序浏览⼀遍。</strong></p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%    List list &#x3D; new ArrayList();    list.add(&quot;abc&quot;);    list.add(&quot;bcd&quot;);    list.add(&quot;李四&quot;);    pageContext.setAttribute(&quot;ulist&quot;,list);%&gt;&lt;h4&gt;循环数据&lt;&#x2F;h4&gt;&lt;c:forEach items&#x3D;&quot;$&#123;ulist&#125;&quot; var&#x3D;&quot;user&quot; varStatus&#x3D;&quot;sta&quot;&gt;    $&#123;sta.count&#125;-$&#123;sta.index&#125;$&#123;user&#125;&lt;br&gt;&lt;&#x2F;c:forEach&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>(4)格式化标签</strong></p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;!--格式化数据fmt--&gt;&lt;%@taglib prefix&#x3D;&quot;fmt&quot; uri&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;jsp&#x2F;jstl&#x2F;fmt&quot; %&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%    pageContext.setAttribute(&quot;mytime&quot;,new Date());%&gt;date&#x3D;$&#123;mytime&#125;&lt;br&gt;格式化后的date&#x3D;&lt;fmt:formatDate value&#x3D;&quot;$&#123;mytime&#125;&quot; pattern&#x3D;&quot;yyyy-MM-dd&quot;&gt;&lt;&#x2F;fmt:formatDate&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>上述举例代码输出实例：</strong></p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211118144212383.png"> </p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsp </tag>
            
            <tag> jstl </tag>
            
            <tag> el表达式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java反射机制</title>
      <link href="/2021/10/30/Java%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6/"/>
      <url>/2021/10/30/Java%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211030025908336.png"></p><h1 id="Java反射机制"><a href="#Java反射机制" class="headerlink" title="Java反射机制"></a>Java反射机制</h1><h2 id="一、什么是Java反射机制？"><a href="#一、什么是Java反射机制？" class="headerlink" title="一、什么是Java反射机制？"></a>一、什么是Java反射机制？</h2><p>​        Java的反射(reflection)机制是指在程序的运行状态中，可以构造任意一个类的对象，可以了解任意一个对象所属的类，可以了解任意一个类的成员变量和方法，可以调用任意一个对象的属性和方法。这种动态获取程序信息以及动态调用对象的功能称为Java语言的反射机制。反射被视为动态语言的关键。</p><p>​        Java反射机制主要提供了以下功能： 在运行时判断任意一个对象所属的类;在运行时构造任意一个类的对象;在运行时判断任意一个类所具有的成员变量和方法;在运行时调用任意一个对象的方法;生成动态代理。</p><p>​        反射技术大量用于Java设计模式和框架技术，最常见的设计模式就是工厂模式和单例模式。</p><p>​        单例模式(Singleton)：这个模式主要作用是保证在Java应用程序中，一个类Class只有一个实例存在。在很多操作中，比如建立目录 数据库连接都需要这样的单线程操作。这样做就是为了节省内存空间，保证我们所访问到的都是同一个对象。</p><p>​        工厂模式(Factory)：工厂模式利用Java反射机制和Java多态的特性可以让我们的程序更加具有灵活性。用工厂模式进行大型项目的开发，可以很好的进行项目并行开发。 </p><h2 id="二、类加载器"><a href="#二、类加载器" class="headerlink" title="二、类加载器"></a>二、类加载器</h2><ul><li><p>​        Java类加载器（Java Classloader）是Java运行时环境（Java Runtime Environment）的一部分， 负责动态加载Java类到Java虚拟机的内存空间中。 </p></li><li><p>​        java默认有三种类加载器，BootstrapClassLoader、ExtensionClassLoader、App ClassLoader。 </p></li><li><p>​        BootstrapClassLoader（引导启动类加载器）： </p></li></ul><p>​                嵌在JVM内核中的加载器，该加载器是用C++语言写的，主要负载加载JAVA_HOME/lib下的类库，引 导启动类加载器无法被应用程序直接使用。 </p><ul><li>​        ExtensionClassLoader（扩展类加载器）： </li></ul><p>​                ExtensionClassLoader是用JAVA编写，且它的父类加载器是Bootstrap。 </p><p>​                是由sun.misc.Launcher$ExtClassLoader实现的，主要加载JAVA_HOME/lib/ext目录中的类库。 </p><p>​                它的父加载器是BootstrapClassLoader </p><ul><li>​        App ClassLoader（应用类加载器）： </li></ul><p>​                App ClassLoader是应用程序类加载器，负责加载应用程序classpath目录下的所有jar和class文 件。它的父加载器为Ext ClassLoader</p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211030025508894.png"> </p><pre class="line-numbers language-none"><code class="language-none">类通常是按需加载，即第一次使用该类时才加载。由于有了类加载器，Java运行时系统不需要知道文件与 文件系统。学习类加载器时，掌握Java的委派概念很重要。 双亲委派模型：如果一个类加载器收到了一个类加载请求，它不会自己去尝试加载这个类，而是把这个请求 转交给父类加载器去完成。每一个层次的类加载器都是如此。因此所有的类加载请求都应该传递到最顶层的 启动类加载器中，只有到父类加载器反馈自己无法完成这个加载请求（在它的搜索范围没有找到这个类） 时，子类加载器才会尝试自己去加载。委派的好处就是避免有些类被重复加载。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="1-加载配置文件"><a href="#1-加载配置文件" class="headerlink" title="1.加载配置文件"></a>1.加载配置文件</h3><p>​        如何通过java反射机制加载配置文件呢？这里我们通过一个简单的小例子来说明!</p><ol><li>首先我们在项目下建立一个source文件目录，如何设置为资源根目录</li></ol><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211030010218043.png"> </p><p>​    2.如何通过类.class获取类加载器进而加载配置文件</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Demo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"config.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> s <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>s <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>    s <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>br<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211030010257026.png"> </p><p>​    <strong>值得注意的是默认加载的是src路径下的文件，但是当项目存在resource root目录时，就变为了加载resource root下的文件了。</strong></p><h2 id="三、Class对象的相关操作"><a href="#三、Class对象的相关操作" class="headerlink" title="三、Class对象的相关操作"></a>三、Class对象的相关操作</h2><p>要想了解一个类,必须先要获取到该类的字节码文件对象.</p><p>在Java中，每一个字节码文件，被夹在到内存后，都存在一个对应的Class类型的对象</p><h3 id="1-得到Class的几种方式"><a href="#1-得到Class的几种方式" class="headerlink" title="1.得到Class的几种方式"></a>1.得到Class的几种方式</h3><p>如果在编写代码时,指导类的名称,且类已经存在,可以通过</p><p><strong>包名.类名.class得到一个类的类对象</strong></p><p>如果拥有类的对象,可以通过 <strong>Class对象.getClass()得到一个类的类对象</strong></p><p>如果在编写代码时,知道类的名称,可以通过</p><p><strong>Class.forName(包名+类名):得到一个类的类对象</strong></p><p>上述的三种方式,在调用时,如果类在内存中不存在,则会加载到内存!如果类已经在内存中存在,不会重复加载,而是重复利用!</p><p><strong>(一个class文件在内存中不会存在两个类对象)</strong></p><ul><li><p>了解</p><p>  基本数据类型的类对象:基本数据类型.clss 、包装类.type</p><p>  基本数据类型包装类对象:包装类.class</p></li></ul><h3 id="2-获取Constructor-构造器）"><a href="#2-获取Constructor-构造器）" class="headerlink" title="2.获取Constructor(构造器）"></a>2.获取Constructor(构造器）</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//加载类</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">People</span><span class="token punctuation">></span></span> c <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">People</span><span class="token punctuation">></span></span><span class="token punctuation">)</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.java.reflect.People"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//找到无参构造方法</span><span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">People</span><span class="token punctuation">></span></span> cs <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//使用无参数构造方法创建对象</span><span class="token class-name">People</span> p <span class="token operator">=</span> cs<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">";"</span> <span class="token operator">+</span>p<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//使用两个参数传入的构造方法(有参构造)</span><span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">People</span><span class="token punctuation">></span></span> cs2 <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取属性</span><span class="token class-name">People</span> p2 <span class="token operator">=</span> cs2<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取所有权限的构造方法</span><span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">People</span><span class="token punctuation">></span></span> cs3 <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//在类中是私有构造，只有这样才可以找得到私有的方法</span>cs3<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//找到了私有的构造方法不代表可以访问，所以得设置权限</span><span class="token class-name">People</span> p3 <span class="token operator">=</span> cs3<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token string">"法外狂徒张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p3<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>People类中三个构造方法</strong></p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211030012012654.png" style="zoom: 67%;" /> <p><strong>输出结果</strong></p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211030011713738.png"> </p><h3 id="3-获取Method-方法"><a href="#3-获取Method-方法" class="headerlink" title="3.获取Method(方法)"></a>3.获取Method(方法)</h3><ol><li>getMethod(StringmethodName,class..clss)</li></ol><p>根据参数列表的类型和方法名,得到一个方法(public修饰的)</p><ol start="2"><li>getMethods();</li></ol><p>得到一个类的所有方法(public修饰的)</p><ol start="3"><li>getDeclaredMethod(StringmethodName,class..clss)</li></ol><p>根据参数列表的类型和方法名,得到一个方法(除继承以外所有的:包含私有,共有,保护,默认)</p><ol start="4"><li>getDeclaredMethods();</li></ol><p>得到一个类的所有方法(除继承以外所有的:包含私有,共有,保护,默认)</p><p>如何执行Method方法呢？</p><p>​    得到的方法.invoke(Object o,Object…para):</p><p>参数1.要调用方法的对象</p><p>参数2.要传递的参数列表‘</p><p>​    setAccessible(boolean flag)</p><p>如果flag为true，则表示忽略访问权限检查!(可以访问任何权限的方法)</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//加载类</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">People</span><span class="token punctuation">></span></span> c1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">People</span><span class="token punctuation">></span></span><span class="token punctuation">)</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.java.reflect.People"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取类的构造方法</span><span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">People</span><span class="token punctuation">></span></span> c <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取对象</span><span class="token class-name">People</span> p <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取类的方法</span><span class="token class-name">Method</span> setName <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"setName"</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Method</span> setAge <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">"setAge"</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取各种权限方法</span>setAge<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置可以访问私有权限</span><span class="token comment">//参数1：哪个对象要执行setname方法;参数二：调用方法时传递的参数0-n(可变参数)</span>setName<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span><span class="token string">"法外狂徒张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>setAge<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span><span class="token number">666</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211030012827224.png"> </p><h3 id="4-获取Field-属性"><a href="#4-获取Field-属性" class="headerlink" title="4.获取Field(属性)"></a>4.获取Field(属性)</h3><ol><li>getDeclaredField(String filedName) </li></ol><p>根据属性的名称, 获取一个属性对象 (可以获取到私有的属性) </p><ol start="2"><li>getDeclaredFields() </li></ol><p>获取所有属性 (包括私有)</p><ol start="3"><li>getField(String filedName) </li></ol><p>根据属性的名称, 获取一个属性对象 (public属性) </p><ol start="4"><li>getFields() </li></ol><p>获取所有属性 (public)</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Class</span> c <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.java.reflect.People"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Constructor</span> c1 <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//构造方法</span><span class="token class-name">Object</span> o <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//对象</span><span class="token class-name">Field</span> phoneNumber <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"phoneNumber"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取私有属性对象</span>phoneNumber<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置操作权限</span>phoneNumber<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span><span class="token string">"18750112980"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//给o这个对象里的phoneNumber属性赋值</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211030013733194.png"> </p><h2 id="四、关于反射和注解"><a href="#四、关于反射和注解" class="headerlink" title="四、关于反射和注解"></a>四、关于反射和注解</h2><h3 id="1-获取类，属性，方法的全部注解对象"><a href="#1-获取类，属性，方法的全部注解对象" class="headerlink" title="1.获取类，属性，方法的全部注解对象"></a>1.获取类，属性，方法的全部注解对象</h3><pre class="line-numbers language-none"><code class="language-none">Annotation[] annotations01 &#x3D; Class&#x2F;Field&#x2F;Method.getAnnotations(); for (Annotation annotation : annotations01) &#123;System.out.println(annotation); &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-根据类型获取类-属性-方法的注解对象"><a href="#2-根据类型获取类-属性-方法的注解对象" class="headerlink" title="2.根据类型获取类,属性,方法的注解对象"></a>2.根据类型获取类,属性,方法的注解对象</h3><pre class="line-numbers language-none"><code class="language-none">注解类型 对象名 &#x3D; (注解类型) c.getAnnotation(注解类型.class);&#x2F;&#x2F;这个c是该注解所在的类的class对象<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3-具体操作示例"><a href="#3-具体操作示例" class="headerlink" title="3.具体操作示例"></a>3.具体操作示例</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*表注解*/</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">)</span><span class="token comment">//允许使用在类上面</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span><span class="token comment">//持久化策略</span><span class="token annotation punctuation">@Documented</span><span class="token comment">//允许使用在文档里</span><span class="token annotation punctuation">@Inherited</span><span class="token comment">//允许继承</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">TableAnnotation</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//用于标注类对应的表格名称</span>    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*属性注解*/</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>FIELD<span class="token punctuation">)</span><span class="token comment">//可以是用在属性上面</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span><span class="token comment">//策略</span><span class="token annotation punctuation">@Documented</span><span class="token comment">//可以使用在文档里</span><span class="token annotation punctuation">@Inherited</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">ColumnAnnotation</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//描述列名</span>    <span class="token class-name">String</span> <span class="token function">columnName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//描述类型</span>    <span class="token class-name">String</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//描述数据的长度</span>    <span class="token class-name">String</span> <span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211030014654221.png"> </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Class</span> c <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.java.reflectandInterface.Book"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">TableAnnotation</span> ta <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TableAnnotation</span><span class="token punctuation">)</span> c<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">TableAnnotation</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"表名:"</span> <span class="token operator">+</span> ta<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fs <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> f <span class="token operator">:</span> fs<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">ColumnAnnotation</span> ca <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">ColumnAnnotation</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"属性，对于数据库的字段："</span> <span class="token operator">+</span>    ca<span class="token punctuation">.</span><span class="token function">columnName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"，数据类型："</span> <span class="token operator">+</span> ca<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"，数据长度："</span> <span class="token operator">+</span>    ca<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211030014750369.png"> </p><h2 id="五、内省-现阶段了解"><a href="#五、内省-现阶段了解" class="headerlink" title="五、内省(现阶段了解)"></a>五、内省(现阶段了解)</h2><h3 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h3><p>基于反射 , java所提供的一套应用到JavaBean的API </p><p>一个定义在包中的类 , 拥有<strong>无参构造器</strong> 所有<strong>属性私有</strong>, 所有属性提供<strong>get/set方法</strong> 实现了<strong>序列化接口</strong> 这种类, 我们称其为 bean类 . </p><p>Java提供了一套java.beans包的api , 对于反射的操作, 进行了封装 ! </p><h3 id="2-Introspector"><a href="#2-Introspector" class="headerlink" title="2.Introspector"></a>2.Introspector</h3><pre class="line-numbers language-none"><code class="language-none">获取Bean类信息 方法:BeanInfo getBeanInfo(Class cls) 通过传入的类信息, 得到这个Bean类的封装对象 .<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="3-BeanInfo"><a href="#3-BeanInfo" class="headerlink" title="3.BeanInfo"></a>3.BeanInfo</h3><pre class="line-numbers language-none"><code class="language-none">常用的方法: MethodDescriptor[] getPropertyDescriptors(): 获取bean类的 get&#x2F;set方法 数组，即这个数组里存放的一个对象同时包含着get set方法<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="4-MethodDescriptor"><a href="#4-MethodDescriptor" class="headerlink" title="4.MethodDescriptor"></a>4.MethodDescriptor</h3><pre class="line-numbers language-none"><code class="language-none">常用方法: 1. Method getReadMethod(); 获取一个get方法 2. Method getWriteMethod(); 获取一个set方法 有可能返回null 注意 ,加判断 !<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-实例操作"><a href="#5-实例操作" class="headerlink" title="5.实例操作"></a>5.实例操作</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Class</span> c <span class="token operator">=</span> <span class="token class-name">Express</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span><span class="token class-name">BeanInfo</span> bi <span class="token operator">=</span> <span class="token class-name">Introspector</span><span class="token punctuation">.</span><span class="token function">getBeanInfo</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取bean的信息</span><span class="token class-name">PropertyDescriptor</span><span class="token punctuation">[</span><span class="token punctuation">]</span> pds <span class="token operator">=</span> bi<span class="token punctuation">.</span><span class="token function">getPropertyDescriptors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取所有get set 方法</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyDescriptor</span> pd <span class="token operator">:</span> pds<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Method</span> get <span class="token operator">=</span> pd<span class="token punctuation">.</span><span class="token function">getReadMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Method</span> set <span class="token operator">=</span> pd<span class="token punctuation">.</span><span class="token function">getWriteMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>get<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>pd<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>pd<span class="token punctuation">.</span><span class="token function">getPropertyType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211030015632212.png"></p>]]></content>
      
      
      <categories>
          
          <category> JavaSe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 反射 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XML和JSON知识点</title>
      <link href="/2021/10/20/XML%E5%92%8CJSON%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
      <url>/2021/10/20/XML%E5%92%8CJSON%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211020234358063.png"></p><h1 id="XML与JSON"><a href="#XML与JSON" class="headerlink" title="XML与JSON"></a>XML与JSON</h1><h2 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h2><p>业务目标： </p><p>学习数据格式，便于后续更好的进行开发 </p><p>技能目标： </p><p>掌握 XML/JSON 语法（绝对重点） </p><p>掌握 XML 解析（熟悉即可） </p><p>掌握 JSON 解析（绝对重点）</p><h2 id="一、XML"><a href="#一、XML" class="headerlink" title="一、XML"></a>一、XML</h2><h3 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h3><p>可扩展标记语言（eXtensible Markup Language）。 </p><p>特性:</p><ol><li><p>xml具有平台无关性, 是一门独立的标记语言. </p></li><li><p>xml具有自我描述性</p></li></ol><h3 id="2-为什么要学习XML捏？"><a href="#2-为什么要学习XML捏？" class="headerlink" title="2.为什么要学习XML捏？"></a>2.为什么要学习XML捏？</h3><ol><li><p>网络数据传输. </p></li><li><p>数据存储 </p></li><li><p>配置文件</p></li></ol><p>XML文件是保存XML数据的一种方式 </p><p>XML数据也可以以其他的方式存在（如在内存中构建XML数据）。 </p><p>不要将XML语言狭隘的理解成XML文件！</p><h3 id="3-XML的格式"><a href="#3-XML的格式" class="headerlink" title="3.XML的格式"></a>3.XML的格式</h3><p><strong>1.XML文档声明：</strong></p><?xml version="1.0" encoding="UTF-8"?><p><strong>2.样例：</strong></p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>persons</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>person</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10001<span class="token punctuation">"</span></span> <span class="token attr-name">groupid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>李四<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>age</span><span class="token punctuation">></span></span>18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>age</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>person</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>person</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10002<span class="token punctuation">"</span></span> <span class="token attr-name">groupid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>李四<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>age</span><span class="token punctuation">></span></span>20<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>age</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>person</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>persons</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--在内存里可以看成是一个文档树--></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>3.注释：</strong></p><p>1.注释不能写在文档文档声明前 2.注释不能嵌套注释 </p><p>格式:</p><p>注释开始: &lt;!– </p><p>注释结束: –&gt; </p><h3 id="4-XML解析"><a href="#4-XML解析" class="headerlink" title="4.XML解析"></a>4.XML解析</h3><ul><li><strong>接下来的操作需要导入jar包</strong></li></ul><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211020232951725.png"> </p><h4 id="DOM4J解析XML-掌握"><a href="#DOM4J解析XML-掌握" class="headerlink" title="DOM4J解析XML(掌握)"></a>DOM4J解析XML(掌握)</h4><h5 id="1-主要步骤"><a href="#1-主要步骤" class="headerlink" title="1.主要步骤"></a>1.主要步骤</h5><pre class="line-numbers language-none"><code class="language-none">1. 引入jar文件 dom4j.jar 2. 创建一个指向XML文件的输入流 FileInputStream fis &#x3D; new FileInputStream(&quot;xml文件的地址&quot;); 3. 创建一个XML读取工具对象 SAXReader sr &#x3D; new SAXReader(); 4. 使用读取工具对象, 读取XML文档的输入流 , 并得到文档对象--&gt; 指的是加载到内存的 整个XML文档.Document doc &#x3D; sr.read(fis); 5. 通过文档对象, 获取XML文档中的根元素对象 Element root &#x3D; doc.getRootElement();<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="2-解析本地文件"><a href="#2-解析本地文件" class="headerlink" title="2.解析本地文件"></a>2.解析本地文件</h5><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//1.获取输入流</span><span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"E://developer//kaikeba//课件与笔记xml//课件与笔记//工具//Demo1.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2.创建XML读取对象</span><span class="token class-name">SAXReader</span> sr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SAXReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3.读取并且得到文档对象(相当于把流指向的文件加载到了内存变成树状结构)</span><span class="token class-name">Document</span> doc <span class="token operator">=</span> sr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>fis<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4.通过文档获取根元素</span><span class="token class-name">Element</span> root <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">getRootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//5.解析元素</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/*Element book = root.element("book");Element name = book.element("name");Element info = book.element("info");System.out.println(name.getText());System.out.println(info.getText());*/</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">></span></span> es <span class="token operator">=</span> root<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> es<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Element</span> book <span class="token operator">=</span> es<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">elementText</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">elementText</span><span class="token punctuation">(</span><span class="token string">"info"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"----------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211020225940605.png" style="zoom:67%;" /> <h5 id="3-解析网络文件"><a href="#3-解析网络文件" class="headerlink" title="3.解析网络文件"></a>3.解析网络文件</h5><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> phone <span class="token operator">=</span> <span class="token string">"13860690901"</span><span class="token punctuation">;</span><span class="token comment">//1.获取XML资源的输入流</span><span class="token class-name">URL</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">URL</span><span class="token punctuation">(</span><span class="token string">"https://apis.juhe.cn/mobile/get?%20phone="</span><span class="token operator">+</span>phone<span class="token operator">+</span><span class="token string">"&amp;dtype=xml&amp;key=9f3923e8f87f1ea50ed4ec8c39cc9253"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">URLConnection</span> conn <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">openConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//打开连接</span><span class="token class-name">InputStream</span> is <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//连接获取流对象</span><span class="token comment">//2.创建一个XML读取对象</span><span class="token class-name">SAXReader</span> sr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SAXReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3.通过读取对象，读取XML数据，返回文档对象</span><span class="token class-name">Document</span> doc <span class="token operator">=</span> sr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4.获取根节点</span><span class="token class-name">Element</span> root <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">getRootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//5.解析内容</span><span class="token class-name">String</span> code <span class="token operator">=</span> root<span class="token punctuation">.</span><span class="token function">elementText</span><span class="token punctuation">(</span><span class="token string">"resultcode"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"200"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">Element</span> result <span class="token operator">=</span> root<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span><span class="token string">"result"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> province <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">elementText</span><span class="token punctuation">(</span><span class="token string">"province"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> city <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">elementText</span><span class="token punctuation">(</span><span class="token string">"city"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>province<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>city<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"手机号码归属地为："</span> <span class="token operator">+</span> city<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"手机号码归属地为："</span> <span class="token operator">+</span> province <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> city<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">elementText</span><span class="token punctuation">(</span><span class="token string">"areacode"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">elementText</span><span class="token punctuation">(</span><span class="token string">"zip"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">elementText</span><span class="token punctuation">(</span><span class="token string">"company"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请输入正确的手机号码！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211020232233837.png"> </p><h4 id="DOM4J-XPATH解析XML"><a href="#DOM4J-XPATH解析XML" class="headerlink" title="DOM4J - XPATH解析XML"></a>DOM4J - XPATH解析XML</h4><h5 id="1-路径表达式"><a href="#1-路径表达式" class="headerlink" title="1.路径表达式"></a>1.路径表达式</h5><pre class="line-numbers language-none"><code class="language-none">通过路径快速的查找一个或一组元素 路径表达式: 1. &#x2F; : 从根节点开始查找 2. &#x2F;&#x2F; : 从发起查找的节点位置 查找后代节点 3. . : 查找当前节点 4. .. : 查找父节点 5. @ : 选择属性 属性使用方式: [@属性名&#x3D;&#39;值&#39;] [@属性名&gt;&#39;值&#39;] [@属性名&lt;&#39;值&#39;] [@属性名!&#x3D;&#39;值&#39;]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="2-解析本地文件-1"><a href="#2-解析本地文件-1" class="headerlink" title="2.解析本地文件"></a>2.解析本地文件</h5><pre class="line-numbers language-java" data-language="java"><code class="language-java">      <span class="token comment">//1.获取输入流</span>      <span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"E://developer//kaikeba//课件与笔记xml//课件与笔记//工具//Demo1.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//2.创建XML读取对象</span>      <span class="token class-name">SAXReader</span> sr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SAXReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//3.读取并且得到文档对象(相当于把流指向的文件加载到了内存变成树状结构)</span>      <span class="token class-name">Document</span> doc <span class="token operator">=</span> sr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>fis<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//4.通过文档对象+xpath,查找所有的name节点</span>     <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">></span></span> names <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">selectNodes</span><span class="token punctuation">(</span><span class="token string">"//book//name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> names<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>names<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>names<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//5.查找单个节点</span>      <span class="token class-name">Node</span> node <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">selectSingleNode</span><span class="token punctuation">(</span><span class="token string">"//book[@id = '1002']//name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> node<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211020231057859.png"> </p><h5 id="3-解析网络文件-1"><a href="#3-解析网络文件-1" class="headerlink" title="3.解析网络文件"></a>3.解析网络文件</h5><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> phone <span class="token operator">=</span> <span class="token string">"13860690901"</span><span class="token punctuation">;</span><span class="token comment">//1.获取XML资源的输入流</span><span class="token class-name">URL</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">URL</span><span class="token punctuation">(</span><span class="token string">"https://apis.juhe.cn/mobile/get?%20phone="</span> <span class="token operator">+</span> phone <span class="token operator">+</span> <span class="token string">"&amp;dtype=xml&amp;key=9f3923e8f87f1ea50ed4ec8c39cc9253"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">URLConnection</span> conn <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">openConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">InputStream</span> is <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2.创建一个XML读取对象</span><span class="token class-name">SAXReader</span> sr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SAXReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3.通过读取对象，读取XML数据，返回文档对象</span><span class="token class-name">Document</span> doc <span class="token operator">=</span> sr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Node</span> node <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">selectSingleNode</span><span class="token punctuation">(</span><span class="token string">"//company"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//选择单一节点不加属性过滤默认找第一个</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> node<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211020231316434.png"> </p><h3 id="5-Java生成XML-熟悉"><a href="#5-Java生成XML-熟悉" class="headerlink" title="5.Java生成XML(熟悉)"></a>5.Java生成XML(熟悉)</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//1.通过文档帮助器，创建一个空的文档对象</span><span class="token class-name">Document</span> doc <span class="token operator">=</span> <span class="token class-name">DocumentHelper</span><span class="token punctuation">.</span><span class="token function">createDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2.给文档添加一个根节点</span><span class="token class-name">Element</span> books <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token string">"books"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3.通过根节点丰富子节点</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span>   <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Element</span> book <span class="token operator">=</span> books<span class="token punctuation">.</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token string">"book"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Element</span> name <span class="token operator">=</span> book<span class="token punctuation">.</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    name<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"java程序设计"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Element</span> info <span class="token operator">=</span> book<span class="token punctuation">.</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token string">"info"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    info<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"非常好的一本书"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    book<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//增加属性</span><span class="token punctuation">&#125;</span><span class="token comment">//4.创建一个文件的输出流</span><span class="token class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"G://大三上//books.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//5.将输出流转换成xml输出流</span><span class="token class-name">XMLWriter</span> xw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLWriter</span><span class="token punctuation">(</span>fos<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//6.写出文档</span>xw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//7.释放资源</span>xw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211020232121985.png"> </p><h3 id="6-XStream的使用-了解"><a href="#6-XStream的使用-了解" class="headerlink" title="6.XStream的使用(了解)"></a>6.XStream的使用(了解)</h3><ul><li>快速的将Java中的对象, 转换为 XML字符串. </li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Person</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>p<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"林小婷"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>p<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//XStream</span><span class="token comment">//1.创建一个XStream对象</span><span class="token class-name">XStream</span> xs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2.修改某个类型生成的根节点（可选的，默认包名.类名）</span>xs<span class="token punctuation">.</span><span class="token function">alias</span><span class="token punctuation">(</span><span class="token string">"person"</span><span class="token punctuation">,</span><span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3.传入对象，开始生成</span><span class="token class-name">String</span> s <span class="token operator">=</span> xs<span class="token punctuation">.</span><span class="token function">toXML</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这个person类需要自己建static Person&#123;...&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211020232822207.png"> </p><h3 id="7-xml的解析时遇到的问题"><a href="#7-xml的解析时遇到的问题" class="headerlink" title="7.xml的解析时遇到的问题"></a>7.xml的解析时遇到的问题</h3><p>遇到的问题：</p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211019163455678.png" style="zoom: 67%;" /> <p>解决方法二：文件另存修改编码集，还能处理节点.getText()显示到内存时的乱码问题！</p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211019164654629.png" style="zoom:67%;" /> <h3 id="8-面试题"><a href="#8-面试题" class="headerlink" title="8.面试题"></a>8.面试题</h3><pre class="line-numbers language-none"><code class="language-none">问: Java中有几种XML解析方式 ? 分别是什么 ? 有什么样的优缺点 ? 答: 四种. 1. SAX解析解析方式是事件驱动机制 ! SAX解析器, 逐行读取XML文件解析 , 每当解析到一个标签的开始&#x2F;结束&#x2F;内容&#x2F;属性时,触 发事件. 我们可以编写程序在这些事件发生时, 进行相应的处理. 优点:分析能够立即开始，而不是等待所有的数据被处理    逐行加载,节省内存.有助于解析大于系统内存的文档    有时不必解析整个文档,它可以在某个条件得到满足时停止解析. 缺点:1. 单向解析，无法定位文档层次，无法同时访问同一文档的不同部分数据(因为逐 行解析, 当解析第n行是, 第n-1行已经被释放了, 无法在进行操作了). 2. 无法得知事件发生时元素的层次, 只能自己维护节点的父&#x2F;子关系. 3. 只读解析方式, 无法修改XML文档的内容. 2. DOM解析是用与平台和语言无关的方式表示XML文档的官方W3C标准，分析该结构通常需要加载整个 文档和内存中建立文档树模型.程序员可以通过操作文档树, 来完成数据的获取 修改 删除等. 优点:文档在内存中加载, 允许对数据和结构做出更改. 访问是双向的，可以在任何时候在树中双向解析数据。 缺点:文档全部加载在内存中 , 消耗资源大.（其实也不大可以忽略不计） 3. JDOM解析目的是成为Java特定文档模型，它简化与XML的交互并且比使用DOM实现更快。由于是第一 个Java特定模型，JDOM一直得到大力推广和促进。 JDOM文档声明其目的是“使用20%（或更少）的精力解决80%（或更多）Java&#x2F;XML问题” （根据学习曲线假定为20%） 优点:使用具体类而不是接口，简化了DOM的API。大量使用了Java集合类，方便了Java开发人员。 缺点:没有较好的灵活性。 性能不是那么优异。DOM4J解析XML 掌握4. DOM4J解析 它是JDOM的一种智能分支。它合并了许多超出基本XML文档表示的功能，包括集成的XPath 支持、XML Schema支持以及用于大文档或流化文档的基于事件的处理。它还提供了构建文档表示的选项， DOM4J是一个非常优秀的Java XML API，具有性能优异、功能强大和极端易用使用的特点，同时它也是一 个开放源代码的软件。如今你可以看到越来越多的Java软件都在使用DOM4J来读写XML。 目前许多开源项目中大量采用DOM4J , 例如:Hibernate<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="二、JSON"><a href="#二、JSON" class="headerlink" title="二、JSON"></a>二、JSON</h2><h3 id="1-简介-1"><a href="#1-简介-1" class="headerlink" title="1.简介"></a>1.简介</h3><ul><li>JSON: JavaScript Object Notation JS对象简谱 , 是一种轻量级的数据交换格式. </li></ul><h3 id="2-组成"><a href="#2-组成" class="headerlink" title="2.组成"></a>2.组成</h3><h4 id="对象格式"><a href="#对象格式" class="headerlink" title="对象格式"></a>对象格式</h4><pre class="line-numbers language-none"><code class="language-none">一本书书名简介 java:    class Book&#123;    private String name;     private String info;    get&#x2F;set...     &#125;    Book b &#x3D; new Book();     b.setName(“金苹果”);     b.setInfo(“种苹果”); ...js:     var b &#x3D; new Object();     b.name &#x3D; &quot;金苹果&quot;;     b.info &#x3D; &quot;种苹果&quot;; XML:    &lt;book&gt;    &lt;name&gt;金苹果&lt;&#x2F;name&gt;     &lt;info&gt;种苹果&lt;&#x2F;info&gt;     &lt;&#x2F;book&gt; JSON:    &#123;     &quot;name&quot;:&quot;金苹果&quot;,     &quot;info&quot;:&quot;种苹果&quot;     json一个对象, 由一个大括号表示.     括号中 描述对象的属性 . 通过键值对来描述对象的属性     (可以理解为, 大括号中, 包含的是一个个的键值对.)     格式:    键与值之间使用冒号连接, 多个键值对之间使用逗号分隔.     键值对的键 应使用引号引住 (通常Java解析时, 键不使用引号会报错. 而JS能正确解析.)    键值对的值, 可以是JS中的任意类型的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="数组格式"><a href="#数组格式" class="headerlink" title="数组格式"></a>数组格式</h4><pre class="line-numbers language-none"><code class="language-none">在JSON格式中可以与对象互相嵌套 [元素1,元素2...]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>     <span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"伟杰老师"</span><span class="token punctuation">,</span>     <span class="token property">"age"</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span>    <span class="token property">"pengyou"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"张三"</span><span class="token punctuation">,</span><span class="token string">"李四"</span><span class="token punctuation">,</span><span class="token string">"王二"</span><span class="token punctuation">,</span><span class="token string">"麻子"</span><span class="token punctuation">,</span>               <span class="token punctuation">&#123;</span> <span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"野马老师"</span><span class="token punctuation">,</span>                 <span class="token property">"info"</span><span class="token operator">:</span><span class="token string">"像匹野马一样狂奔在技术钻研的道路上"</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>     <span class="token property">"heihei"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span> <span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"大长刀"</span><span class="token punctuation">,</span> <span class="token property">"length"</span><span class="token operator">:</span><span class="token string">"40m"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-Java和JSON的联系"><a href="#3-Java和JSON的联系" class="headerlink" title="3.Java和JSON的联系"></a>3.Java和JSON的联系</h3><p><strong>要做什么?</strong></p><ul><li>将Java中的对象 快速的转换为 JSON格式的字符串. </li><li>将JSON格式的字符串, 转换为Java的对象.</li></ul><h3 id="4-Gson"><a href="#4-Gson" class="headerlink" title="4.Gson"></a>4.Gson</h3><h4 id="下载jar包"><a href="#下载jar包" class="headerlink" title="下载jar包"></a>下载jar包</h4><p>首先到<a href="https://search.maven.org/artifact/com.google.code.gson/gson/2.8.8/jar%E4%B8%8B%E8%BD%BD%E5%AF%B9%E5%BA%94%E7%9A%84gson%E7%9A%84jar%E5%8C%85%E3%80%82">https://search.maven.org/artifact/com.google.code.gson/gson/2.8.8/jar下载对应的gson的jar包。</a></p><p>选择第一个jar，然后导入工程才能使用</p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211021004251712.png"> </p><h4 id="对象转换为JSON字符串"><a href="#对象转换为JSON字符串" class="headerlink" title="对象转换为JSON字符串"></a>对象转换为JSON字符串</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//1.创建Gson对象</span><span class="token class-name">Gson</span> g <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2.对象转json</span><span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">"100"</span><span class="token punctuation">,</span><span class="token string">"金苹果"</span><span class="token punctuation">,</span><span class="token string">"种植苹果真辛苦"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> s <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="JSON字符串转换为对象"><a href="#JSON字符串转换为对象" class="headerlink" title="JSON字符串转换为对象"></a>JSON字符串转换为对象</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//3.通过Gson对象将json字符串转成对象</span><span class="token class-name">Book</span> book1 <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span><span class="token string">"&#123;\"id\":\"100\",\"name\":\"金苹果\",\"info\":\"种植苹果真辛苦\"&#125;"</span><span class="token punctuation">,</span> <span class="token class-name">Book</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book1<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4.也可以通过Gson对象将json字符串转换成集合</span><span class="token class-name">HashMap</span> hashMap <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span><span class="token string">"&#123;\"id\":\"100\",\"name\":\"金苹果\",\"info\":\"种植苹果真辛苦\"&#125;"</span><span class="token punctuation">,</span> <span class="token class-name">HashMap</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hashMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id=""><a href="#" class="headerlink" title=""></a><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211021005043330.png"></h5><h3 id="5-FastJson"><a href="#5-FastJson" class="headerlink" title="5.FastJson"></a>5.FastJson</h3><h4 id="下载jar包-1"><a href="#下载jar包-1" class="headerlink" title="下载jar包"></a>下载jar包</h4><p><a href="https://github.com/alibaba/fastjson">https://github.com/alibaba/fastjson</a></p><p>选择：the lastest jar</p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211021005441971.png">  </p><h4 id="对象转换为JSON字符串-1"><a href="#对象转换为JSON字符串-1" class="headerlink" title="对象转换为JSON字符串"></a>对象转换为JSON字符串</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">"1001"</span><span class="token punctuation">,</span><span class="token string">"唐诗三百首"</span><span class="token punctuation">,</span><span class="token string">"床前明月光，地上鞋两双"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1.对象转换json字符串</span><span class="token class-name">String</span> json <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//直接调用 JSON静态方法</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="JSON字符串转换为对象-1"><a href="#JSON字符串转换为对象-1" class="headerlink" title="JSON字符串转换为对象"></a>JSON字符串转换为对象</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//2.json字符串转换成对象</span><span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token string">"&#123;\"id\":\"1001\",\"info\":\"床前明月光，地上鞋两双\",\"name\":\"唐诗三百首\"&#125;"</span><span class="token punctuation">;</span><span class="token class-name">Book</span> book1 <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token class-name">Book</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book1<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3.转换数组["一二三",四五六","七八九"]</span><span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">"[\"一二三\",\"四五六\",\"七八九\"]"</span><span class="token punctuation">;</span>     <span class="token comment">// '\'是转义符</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> strings <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">parseArray</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211021005609329.png"> </p>]]></content>
      
      
      <categories>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> xml </tag>
            
            <tag> json </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java多线程</title>
      <link href="/2021/10/15/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
      <url>/2021/10/15/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211015230118962.png"></p><h1 id="Java-多线程"><a href="#Java-多线程" class="headerlink" title="Java 多线程"></a>Java 多线程</h1><h2 id="一、-多线程技术概述"><a href="#一、-多线程技术概述" class="headerlink" title="一、    多线程技术概述"></a>一、    多线程技术概述</h2><h3 id="1-线程与进程"><a href="#1-线程与进程" class="headerlink" title="1.线程与进程"></a>1.线程与进程</h3><p>进程<br>    - 是指一个内存中运行的应用程序，每个进程都有一个独立的内存空间</p><p>线程</p><ul><li>是进程中的一个执行路径，共享一个内存空间，线程之间可以自由切换，并发执行. 一个进程最少<br> 有一个线程</li><li>线程实际上是在进程基础之上的进一步划分，一个进程启动之后，里面的若干执行路径又可以划分<br> 成若干个线程</li><li></li></ul><h3 id="2-线程调度"><a href="#2-线程调度" class="headerlink" title="2.线程调度"></a>2.线程调度</h3><p>分时调度</p><ul><li>所有线程轮流使用 CPU 的使用权，平均分配每个线程占用 CPU 的时间。</li></ul><p>抢占式调度</p><ul><li>优先让优先级高的线程使用 CPU，如果线程的优先级相同，那么会随机选择一个(线程随机性)，<br>Java使用的为抢占式调度。</li><li>CPU使用抢占式调度模式在多个线程间进行着高速的切换。对于CPU的一个核新而言，某个时刻，<br>只能执行一个线程，而 CPU的在多个线程间切换速度相对我们的感觉要快，看上去就是 在同一时<br>刻运行。 其实，多线程程序并不能提高程序的运行速度，但能够提高程序运行效率，让CPU的 使<br>用率更高。</li></ul><h3 id="3-同步与异步"><a href="#3-同步与异步" class="headerlink" title="3.同步与异步"></a>3.同步与异步</h3><p><strong>同步</strong>:排队执行 , 效率低但是安全.（在一条道路上一起执行）</p><p><strong>异步</strong>:同时执行 , 效率高但是数据不安全.（在多条道路上同时执行）</p><h3 id="4-并发与并行"><a href="#4-并发与并行" class="headerlink" title="4.并发与并行"></a>4.并发与并行</h3><p><strong>并发</strong>：指两个或多个事件在<strong>同一个时间段内</strong>发生。</p><p>​    多个CPU同时执行多个任务。比如：多个人同时做不同的事情</p><p><strong>并行</strong>：指两个或多个事件在<strong>同一时刻</strong>发生（同时发生）。</p><p>​    一个CPU（采用时间片）同时执行多个任务。不如：秒杀、多个人做同一件事情    </p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211015232327814.png"> </p><h2 id="二、线程的常用方法"><a href="#二、线程的常用方法" class="headerlink" title="二、线程的常用方法"></a>二、线程的常用方法</h2><h3 id="1-Thread中常用方法"><a href="#1-Thread中常用方法" class="headerlink" title="1.Thread中常用方法"></a>1.Thread中常用方法</h3><ul><li>可以看jdk11API,这里只是列出几个常用</li></ul><table><thead><tr><th>方法</th><th>概述</th></tr></thead><tbody><tr><td>1.start()</td><td>启动当前线程；调用当前线程的run()方法</td></tr><tr><td>2.run()</td><td>通常重写继承Thread类中的此方法，将创建多线程要执行的操作声明在此方法中</td></tr><tr><td>3.currentThread()</td><td>静态方法，返回执行当前代码的线程</td></tr><tr><td>4.getName()</td><td>获取当前线程的名字</td></tr><tr><td>5.setName()</td><td>设置当前线程的名字</td></tr><tr><td>6.yield()</td><td>释放当前cpu的执行权</td></tr><tr><td>7.join()</td><td>线程a中调用线程b的join()，此时线程a就会进入阻塞状态，直到线程b完全执行完以后，线程a才结束阻塞状态</td></tr><tr><td>8.sleep(long millis)</td><td>让当前线程“休眠”指定millis毫秒。在改时间段内，当前线程处于阻塞状态</td></tr><tr><td>9.isAlive()</td><td>判断当前线程是否存活</td></tr></tbody></table><h3 id="2-线程的优先级"><a href="#2-线程的优先级" class="headerlink" title="2.线程的优先级"></a>2.线程的优先级</h3><h4 id="①-描述"><a href="#①-描述" class="headerlink" title="①.描述"></a>①.描述</h4><table><thead><tr><th>变量和类型</th><th>字段</th><th>描述</th></tr></thead><tbody><tr><td><code>static int</code></td><td><code>MAX_PRIORITY</code></td><td>线程可以拥有的最大优先级。 <strong>10</strong></td></tr><tr><td><code>static int</code></td><td><code>MIN_PRIORITY</code></td><td>线程可以拥有的最低优先级。 <strong>1</strong></td></tr><tr><td><code>static int</code></td><td><code>NORM_PRIORITY</code></td><td>分配给线程的默认优先级。 <strong>5是默认优先级</strong></td></tr></tbody></table><h4 id="②-如何获取和设置当前线程的优先级"><a href="#②-如何获取和设置当前线程的优先级" class="headerlink" title="②.如何获取和设置当前线程的优先级"></a>②.如何获取和设置当前线程的优先级</h4><ul><li>int getPriority()    ：获取当前线程的优先级</li><li>void setPriority(int newPriority)    ：设置线程的优先级</li></ul><p><strong>说明：</strong>高优先级的线程要抢占低优先级线程的CPU执行权。但是只是从概率上来讲，高优先级的线程高概率下被执行。并不意味着只有高优先级的线程被执行完以后，低优先级的线程才执行！！！</p><h2 id="三、创建线程的方式以及区别"><a href="#三、创建线程的方式以及区别" class="headerlink" title="三、创建线程的方式以及区别"></a>三、创建线程的方式以及区别</h2><h3 id="1-方式一：继承Thread类"><a href="#1-方式一：继承Thread类" class="headerlink" title="1.方式一：继承Thread类"></a>1.方式一：继承Thread类</h3><ul><li>步骤</li></ul><ol><li>创建一个继承于Thread类的子类</li><li>重写Thread类的run()方法 –&gt;将此线程执行的操作声明在run()中</li><li>创建Thread类的子类对象</li><li>通过此对象调用start()方法</li></ol><h3 id="2-方式二：实现Runnable接口"><a href="#2-方式二：实现Runnable接口" class="headerlink" title="2.方式二：实现Runnable接口"></a>2.方式二：实现Runnable接口</h3><ul><li>步骤</li></ul><ol><li>创建一个实现Runnable接口的类</li><li>实现类中去实现Runnable接口中的抽象方法：run()</li><li>创建实现类对象</li><li>将此对象作为参数传递到Thread类的构造器中，创建Thread类的对象</li><li>通过Thread类的对象调用start()</li></ol><h3 id="3-比较创建线程的两种方式"><a href="#3-比较创建线程的两种方式" class="headerlink" title="3.比较创建线程的两种方式"></a>3.比较创建线程的两种方式</h3><ul><li><p>开发中：优先选择：实现Runnable接口的方式</p></li><li><p>原因：</p></li></ul><p>1.实现的方式没有类单继承的局限性</p><p>2.实现的方式更适合来处理多个线程共享数据的情况<em><strong>（可以把实现Runnable接口的实现类看做一个任务，多个线程共同执行一项任务）</strong></em></p><ul><li>相同点：</li></ul><p>两种方式都要重写run()方法，将线程要执行的逻辑声明在run()中</p><h2 id="四、线程的生命周期"><a href="#四、线程的生命周期" class="headerlink" title="四、线程的生命周期"></a>四、线程的生命周期</h2><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211015175559120.png"></p><h2 id="五、线程同步"><a href="#五、线程同步" class="headerlink" title="五、线程同步"></a>五、线程同步</h2><ul><li>关键字：<strong>synchronized</strong>：任何对象都能作为锁放在synchronized(){}的括号里，通常this表示当前类实现对象充当锁</li></ul><p> <strong>1.同步代码块：</strong></p><p>synchronized(this){</p><p>​    //要执行的操作</p><p>}</p><p><strong>2.同步方法：</strong></p><p>哪个类调用这个同步方法，就用这个类的this充当锁</p><p>public synchronized boolean sale(){</p><p>​    //要执行的操作</p><p>}</p><p>(注意同步方法声明为静态时，使用调用该方法的<strong>类名.class</strong>当做锁)</p><p><strong>3.ReentrantLock（显示锁）</strong></p><p>两个构造方法：</p><table><thead><tr><th>构造器</th><th>描述</th></tr></thead><tbody><tr><td><code>ReentrantLock()</code></td><td>创建一个 <code>ReentrantLock</code>的实例。</td></tr><tr><td><code>ReentrantLock(boolean fair)</code></td><td>使用给定的<strong>公平</strong>策略创建 <code>ReentrantLock</code>的实例。</td></tr></tbody></table><p>常用方法：lock() //获得锁   ;  unlock() //尝试释放此锁定</p><h2 id="六、线程通信"><a href="#六、线程通信" class="headerlink" title="六、线程通信"></a>六、线程通信</h2><h3 id="1-线程通信的例子："><a href="#1-线程通信的例子：" class="headerlink" title="1.线程通信的例子："></a>1.线程通信的例子：</h3><ul><li>使用两个线程打印100到1，线程一，线程二交替打印</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NumThread</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">NumberThread</span> numberThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NumberThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>numberThread<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>numberThread<span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"线程1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"线程2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">NumberThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//第一次没有含义，没有线程可以释放</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>                    num<span class="token operator">--</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//让线程阻塞</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-涉及到的三个方法："><a href="#2-涉及到的三个方法：" class="headerlink" title="2.涉及到的三个方法："></a>2.涉及到的三个方法：</h3><p>1.wait():一旦执行此方法，当前线程进入阻塞状态，并释放同步监视器。</p><p>2.notify():一旦执行此方法，就会唤醒被wait的一个线程。如果有多个线程被wait，就会唤醒优先级最高的线程</p><p>3.notifyAll():一旦执行此方法，就会唤醒所有被wait的线程</p><p>​    <strong>说明：</strong></p><ul><li>1.上述三个方法必须用在同步代码块或同步方法中；</li><li>2.上述三个方法调用者必须是同步代码块或同步方法中的同步监视器；</li><li>3.上述三个方法的定义是在java.lang.Object类中；</li></ul><h3 id="3-面试题：sleep-和wait-的异同？"><a href="#3-面试题：sleep-和wait-的异同？" class="headerlink" title="3.面试题：sleep()和wait()的异同？"></a>3.面试题：sleep()和wait()的异同？</h3><p>1.相同点：一旦执行此方法，都可以使当前线程进入阻塞状态</p><p>2.不同点：</p><ul><li>两个方法声明的位置不同：Thread类中声明sleep()；Object类中声明wait()；</li><li>调用的要求不同：sleep()可以在任何需要的场景下调用；wait()必须使用在同步代码块或同步方法中；</li><li>关于是否释放同步监视器：如果两个方法都是用在同步代码块或同步方法中，sleep()不会释放锁，wait()会释放锁</li></ul><h2 id="七、新线程的创建方式"><a href="#七、新线程的创建方式" class="headerlink" title="七、新线程的创建方式"></a>七、新线程的创建方式</h2><h3 id="1-实现Calllable接口创建线程"><a href="#1-实现Calllable接口创建线程" class="headerlink" title="1.实现Calllable接口创建线程"></a>1.实现Calllable接口创建线程</h3><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211015222117014.png"></p><h3 id="2-线程池"><a href="#2-线程池" class="headerlink" title="2.线程池"></a>2.线程池</h3><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211015222903251.png"></p><p><strong>四种线程池：</strong><a href="https://www.cnblogs.com/laojiao/p/9559002.html">https://www.cnblogs.com/laojiao/p/9559002.html</a></p><p><strong>1.</strong> <strong>缓存线程池</strong></p><p><strong>2.</strong> <strong>定长线程池</strong></p><p><strong>3.</strong> <strong>单线程线程池</strong></p><p><strong>4.</strong> <strong>周期性任务定长线程池</strong></p>]]></content>
      
      
      <categories>
          
          <category> JavaSe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 多线程 </tag>
            
            <tag> Thread </tag>
            
            <tag> Runnable </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaIO总结归纳</title>
      <link href="/2021/10/13/JavaIO%E6%80%BB%E7%BB%93%E5%BD%92%E7%BA%B3/"/>
      <url>/2021/10/13/JavaIO%E6%80%BB%E7%BB%93%E5%BD%92%E7%BA%B3/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211013003945218.png"></p><h1 id="JavaIO"><a href="#JavaIO" class="headerlink" title="JavaIO"></a>JavaIO</h1><h2 id="一、IO流的概述"><a href="#一、IO流的概述" class="headerlink" title="一、IO流的概述"></a>一、IO流的概述</h2><h3 id="1-了解什么是IO流"><a href="#1-了解什么是IO流" class="headerlink" title="1.了解什么是IO流"></a>1.了解什么是IO流</h3><ol><li>可以将这种数据传输操作看做是一种数据的流动，按照数据流动的方向分为输入Input和输出Output(相对的来看)。</li><li>Java中的IO操作主要指的是 java.io包下的一些常用类的使用，通过这些常用类对数据进行读取（输入Input）和写出（Output）</li></ol><h3 id="2-IO流的分类"><a href="#2-IO流的分类" class="headerlink" title="2.IO流的分类:"></a>2.IO流的分类:</h3><ol><li><p>按照流的方向分为：输入流和输出流</p></li><li><p>按照流的数据类型分为：字节流和字符流</p><p> 字节流：<strong>以字节为单位操作</strong></p><p> ​        输入流：InputStream</p><p> ​        输出流：OutStream</p><p> 字符流：<strong>以字符为单位操作</strong></p><p> ​        输入流：Reader</p><p> ​        输出流：Writer</p></li></ol><h2 id="二、FileOutputStream-从内存写出到文件"><a href="#二、FileOutputStream-从内存写出到文件" class="headerlink" title="二、FileOutputStream(从内存写出到文件)"></a>二、FileOutputStream(从内存写出到文件)</h2><h3 id="1-常用方法："><a href="#1-常用方法：" class="headerlink" title="1.常用方法："></a>1.常用方法：</h3><table><thead><tr><th align="left"><code>void</code></th><th><code>close()</code></th><th>关闭此文件输出流并释放与此流关联的所有系统资源。</th></tr></thead><tbody><tr><td align="left"><code>void</code></td><td><code>write(byte[] b)</code></td><td>将指定字节数组中的 <code>b.length</code>字节写入此文件输出流。</td></tr><tr><td align="left"><code>void</code></td><td><code>write(byte[] b, int off,  int len)</code></td><td>将从偏移量 <code>off</code>开始的指定字节数组中的 <code>len</code>字节写入此文件输出流。</td></tr><tr><td align="left"><code>void</code></td><td><code>write(int b)</code></td><td>将指定的字节写入此文件输出流。</td></tr></tbody></table><h3 id="2-使用："><a href="#2-使用：" class="headerlink" title="2.使用："></a>2.使用：</h3><p>1.write(int b)</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"G://a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//会自动生成文件</span>fos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//传入的是(转换后的)字节，int类型8个低位，也就是一个字节，换算整型是0-255</span>fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"成功写出"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//默认一个对象fos从内存写出到文件，修改write内的内容默认是会覆盖文件</span><span class="token comment">//FileOutputStream fos = new FileOutputStream("G://a.txt",true); 此true表示在文件后追加内容</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2.write(byte[] b) 和 write(byte[] b, int off,  int len)</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"G://a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> b <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">65</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token number">67</span><span class="token punctuation">,</span><span class="token number">68</span><span class="token punctuation">,</span><span class="token number">69</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">//fos.write(b);//a.txt文件会显示ABCDEF</span>fos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//显示CD</span>fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"成功写出"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="三、FileInputstream-从文件读入到内存"><a href="#三、FileInputstream-从文件读入到内存" class="headerlink" title="三、FileInputstream(从文件读入到内存)"></a>三、FileInputstream(从文件读入到内存)</h2><h3 id="1-常用方法：-1"><a href="#1-常用方法：-1" class="headerlink" title="1.常用方法："></a>1.常用方法：</h3><ul><li><strong>返回值为int是将8位二进制数转换成的</strong></li><li><strong>int返回值为-1的时候表示读到文件末尾，没东西读入了，因此返回-1</strong></li></ul><table><thead><tr><th><code>int</code></th><th><code>read()</code></th><th>从此输入流中读取一个字节的数据。</th></tr></thead><tbody><tr><td><code>int</code></td><td><code>read(byte[] b)</code></td><td>从此输入流 <code>b.length</code>最多 <code>b.length</code>字节的数据读  <code>b.length</code>字节数组。</td></tr><tr><td><code>int</code></td><td><code>read(byte[] b, int off,  int len)</code></td><td>从此输入流 <code>len</code>最多 <code>len</code>字节的数据读入一个字节数组。</td></tr></tbody></table><h3 id="2-使用：-1"><a href="#2-使用：-1" class="headerlink" title="2.使用："></a>2.使用：</h3><p>1.read()</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"G://a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">byte</span> b <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span> fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//只读一个，返回的是67--> 'C' </span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"G://a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">byte</span> b <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span> fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">byte</span> b1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span> fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span>b1<span class="token punctuation">)</span><span class="token punctuation">;</span>fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//控制台会连续读出C和D两个字符</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2.read(byte[] b)</p><p>首先将a.txt改为26英文字符</p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211012190331409.png"> </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"G://a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">byte</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//表示一个读10个字符</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/*末尾四个字符qrst表示字节数组末尾没被替换一起被输出了，是错误的abcdefghijklmnopqrstuvwxyzqrst*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>正确写法</strong>：不会导致qrst被读入，调用String指定位置读入指定长度</p><p><img src="C:/Users/10452/AppData/Roaming/Typora/typora-user-images/image-20211012191141218.png"> </p><h2 id="四、FileWriter-字符写出"><a href="#四、FileWriter-字符写出" class="headerlink" title="四、FileWriter(字符写出)"></a>四、FileWriter(字符写出)</h2><ul><li><strong>会识别中文等各个字符一整个进行输出，不会导致读取一半导致乱码</strong></li></ul><h3 id="1-采用上面方法进行编码，控制台输出"><a href="#1-采用上面方法进行编码，控制台输出" class="headerlink" title="1.采用上面方法进行编码，控制台输出"></a>1.采用上面方法进行编码，控制台输出</h3><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211012223121614.png">     </p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211012223534510.png">    </p><p><strong>原因：正常一个中文字符占2个字节，但是采用utf-8动态编码集，因此一个中文字符不一定是两个字节。</strong></p><p>‘<strong>？</strong>’<strong>表示只读了一半的字，因此需要字符流来解决读取一半字的问题，但是编码集还得手动控制</strong></p><h3 id="2-常用方法："><a href="#2-常用方法：" class="headerlink" title="2.常用方法："></a>2.常用方法：</h3><table><thead><tr><th><code>void</code></th><th><code>flush()</code></th><th>刷新流。</th></tr></thead><tbody><tr><td><code>void</code></td><td><code>write(char[] cbuf, int off,  int len)</code></td><td>写一个字符数组的一部分。</td></tr><tr><td><code>void</code></td><td><code>write(int c)</code></td><td>写一个字符。</td></tr><tr><td><code>void</code></td><td><code>write(String str, int off,  int len)</code></td><td>写一个字符串的一部分。</td></tr></tbody></table><h3 id="3-使用："><a href="#3-使用：" class="headerlink" title="3.使用："></a>3.使用：</h3><p>1.write(int c):</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">FileWriter</span> fw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">"G://a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//因为字符a的范围比整形小，所以会自动转换成整数传进去！</span>fw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>2.write(String str):</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">FileWriter</span> fw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">"G://a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"你好中国！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>fw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="4-flush-刷新管道"><a href="#4-flush-刷新管道" class="headerlink" title="4.flush()刷新管道"></a>4.flush()刷新管道</h3><ul><li>​    <strong>默认流关闭会自动调用flush()，但是在流没有关闭的情况下，字符从内存输出到磁盘时若不手动调用flush()可能会导致磁盘文件没有内容显示，字符可能还在缓冲当中</strong></li></ul><h2 id="五、FileReader-字符读入"><a href="#五、FileReader-字符读入" class="headerlink" title="五、FileReader(字符读入)"></a>五、FileReader(字符读入)</h2><h3 id="1-常用方法：-2"><a href="#1-常用方法：-2" class="headerlink" title="1.常用方法："></a>1.常用方法：</h3><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211012230433888.png"> </p><h3 id="2-使用：-2"><a href="#2-使用：-2" class="headerlink" title="2.使用："></a>2.使用：</h3><p><img src="C:/Users/10452/AppData/Roaming/Typora/typora-user-images/image-20211012230728868.png"> 此时a.txt内容</p><p>1.read():</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">FileReader</span> fr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"G://a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> read <span class="token operator">=</span> fr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> read<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//将整型转换成字符--->'锄'</span>fr<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>2.利用循环和read()读完所有内容</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">FileReader</span> fr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"G://a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> read <span class="token operator">=</span> fr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>read <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> read<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//锄禾日当午，汗滴禾下土，谁知盘中餐，粒粒皆辛苦</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3.利用char[]指定大小数组和read(char[] c)以及String构造函数new String(char,0,len)d读完所有内容</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">FileReader</span> fr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"G:/a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chars <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//读入时用于存储字符的容器</span><span class="token keyword">int</span> len <span class="token operator">=</span> fr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>chars<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//返回的char数组中实际存储字符的个数</span><span class="token class-name">String</span> text <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>chars<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>fr<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//锄禾日当午，汗滴禾下土，谁知盘中餐，粒粒皆辛苦</span><span class="token comment">//23</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="六、转换流"><a href="#六、转换流" class="headerlink" title="六、转换流"></a>六、转换流</h2><ul><li>​    <strong>特点：字节流装饰为字符流：使用装饰者设计模式</strong></li></ul><h3 id="1-字节读入—-gt-字符读入："><a href="#1-字节读入—-gt-字符读入：" class="headerlink" title="1.字节读入—&gt;字符读入："></a>1.字节读入—&gt;字符读入：</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"G://a.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//假设用到了网络爬虫，绝大部分几乎都是字节流，要获取中文等字符必须转换为字符流。</span><span class="token comment">//参数1：要转换的字节流</span><span class="token comment">//参数2：指定编码名称</span><span class="token class-name">InputStreamReader</span> isr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>fis<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> read <span class="token operator">=</span> isr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>read <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> read<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//锄禾日当午，汗滴禾下土，谁知盘中餐，粒粒皆辛苦</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-字节写出—-gt-字符写出："><a href="#2-字节写出—-gt-字符写出：" class="headerlink" title="2.字节写出—&gt;字符写出："></a>2.字节写出—&gt;字符写出：</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//假设下面这一行获取的字节输出流是获取到的一个要给客户端发送数据的流，这里new是为了演示代码</span><span class="token class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"G://b.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">OutputStreamWriter</span> osw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span>fos<span class="token punctuation">)</span><span class="token punctuation">;</span>osw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"床前明月光"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>osw<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//尤其是在调用字符流写出时不要忘记加flush()刷新缓存</span>osw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211012234708059.png"> </p><h2 id="七、打印流和缓存读取流"><a href="#七、打印流和缓存读取流" class="headerlink" title="七、打印流和缓存读取流"></a>七、打印流和缓存读取流</h2><h3 id="1-打印流"><a href="#1-打印流" class="headerlink" title="1.打印流"></a>1.打印流</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//字符输出(打印流)</span><span class="token class-name">PrintStream</span> ps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span><span class="token string">"G://c.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//字节的打印流，所以不要flush()，在c.txt中也有内容</span>ps<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"锄禾日当午，汗滴禾下土1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ps<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"锄禾日当午，汗滴禾下土2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ps<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"锄禾日当午，汗滴禾下土3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//在c.txt文件里有如下内容</span><span class="token comment">//锄禾日当午，汗滴禾下土1</span><span class="token comment">//锄禾日当午，汗滴禾下土2</span><span class="token comment">//锄禾日当午，汗滴禾下土3</span><span class="token class-name">PrintWriter</span> pw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token string">"G://c.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//字符的打印流，所以得手动flush</span>pw<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"锄禾日当午，汗滴禾下土1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>pw<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"锄禾日当午，汗滴禾下土2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>pw<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"锄禾日当午，汗滴禾下土3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>pw<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-缓存读取流"><a href="#2-缓存读取流" class="headerlink" title="2.缓存读取流"></a>2.缓存读取流</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//缓存读取流：将字符输入流，转换为带有缓存，可以一次读取一行的缓存字符读取流</span><span class="token class-name">FileReader</span> fr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"G://c.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>fr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> text <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//返回读取一行的数据，数据末尾返回null</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//c.txt中三行只读取一行</span><span class="token comment">//锄禾日当午，汗滴禾下土1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaSe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IO </tag>
            
            <tag> InputStream </tag>
            
            <tag> OutStream </tag>
            
            <tag> Reader </tag>
            
            <tag> Writer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java集合总结归纳</title>
      <link href="/2021/10/10/Java%E9%9B%86%E5%90%88%E6%80%BB%E7%BB%93%E5%BD%92%E7%BA%B3/"/>
      <url>/2021/10/10/Java%E9%9B%86%E5%90%88%E6%80%BB%E7%BB%93%E5%BD%92%E7%BA%B3/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211011001259291.png"></p><h1 id="Java集合总结归纳"><a href="#Java集合总结归纳" class="headerlink" title="Java集合总结归纳"></a>Java集合总结归纳</h1><p>​    <strong>集合框架：</strong></p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211010014537419.png" alt="image-20211010014537419" style="zoom:80%;" /> <img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211010014356487.png" alt="image-20211010014356487" style="zoom:80%;" /> <h2 id="一-Collcetion接口"><a href="#一-Collcetion接口" class="headerlink" title="一.Collcetion接口"></a>一.Collcetion接口</h2><p>●Collection接口是List、Set 和Queue接口的父接口，该接口里定义的方法既可用于操作Set集合，也可用于操作List和Queue集合。</p><p>（1）List：有序，可以存放重复的内容<br>（2）Set：无序，不能存放重复的内容，所以的重复内容靠hashCode()和equals()两个方法区分<br>（3）Queue：队列接口<br>（4）SortedSet：可以对集合中的数据进行排序</p><p>●collection的常见方法<br>1.添加<br>　　boolean add(Object obj); –添加<br>　　boolean addAll(Collection coll) –添加集合<br>2.删除<br>　　boolean remove(Ooject obj); –删除<br>　　boolean remove(Collection coll) –删除集合<br>　　void clear() –移除所有内容<br>3.判断<br>　　boolean contains(object obj); –判断些集合指定的元素，则返回true<br>　　boolean containsAll(Collection coll) –判断些集合指定的合集，则返回true<br>　　boolean isEmpty(): –判断集合中是否有元素。<br>4.获取：<br>　　int size(); –返回集合中的元素数<br>　　Iterator iterator(); –取出元素的方式：迭代器</p><h3 id="1-List"><a href="#1-List" class="headerlink" title="1.List"></a>1.List</h3><p>●List:元素有序，可重复的集合–”动态”数组</p><h4 id="①-ArrayList"><a href="#①-ArrayList" class="headerlink" title="①.ArrayList"></a>①.ArrayList</h4><p>​        线程不安全，查询速度快。底层都是基于数组来储存集合元素，封装了一个动态的Object[]数组，是一种顺序存储的线性表。</p><h4 id="②-LinkedList"><a href="#②-LinkedList" class="headerlink" title="②.LinkedList"></a>②.LinkedList</h4><p>​        线程不安全，增删速度快，没有同步方法，是一个链式存储的线性变，本质上是一个双向链表。</p><h3 id="2-Set"><a href="#2-Set" class="headerlink" title="2.Set"></a>2.Set</h3><p>●Set：元素无序、不可重复的集合–类似高中的”集合”</p><h4 id="①HashSet"><a href="#①HashSet" class="headerlink" title="①HashSet"></a>①HashSet</h4><p>底层数据结构由HashMap的键来实现。不保证集合中元素的顺序，即不能保证迭代的顺序与插入的顺序一致。是线程不安全的。</p><h4 id="②TreeSet"><a href="#②TreeSet" class="headerlink" title="②TreeSet"></a>②TreeSet</h4><p>有序的存放，线程不安全，可以对Set集合中的元素进行排序，由红黑树来实现排序，TreeSet实际上也是SortedSet接口的子类，其在方法中实现了SortedSet的所有方法，并使用comparator()方法进行排序。</p><h4 id="③LinkedHashSet"><a href="#③LinkedHashSet" class="headerlink" title="③LinkedHashSet"></a>③LinkedHashSet</h4><p>底层由链表实现，按照元素插入的顺序进行迭代，即迭代输出的顺序与插入的顺序保持一致</p><h2 id="二-Map接口"><a href="#二-Map接口" class="headerlink" title="二.Map接口"></a>二.Map接口</h2><p>●Map接口:具有映射关系“key-value键值对” 的集合–类似于高中的“函数”y=f(x) (x1,y1) (x2,y2)</p><h3 id="1-HashMap（子类：LinkedHashMap）"><a href="#1-HashMap（子类：LinkedHashMap）" class="headerlink" title="1.HashMap（子类：LinkedHashMap）"></a>1.HashMap（子类：LinkedHashMap）</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">*</span> <span class="token operator">--</span><span class="token operator">-</span><span class="token class-name">HaspMap</span> <span class="token operator">:</span> 作为<span class="token class-name">Map</span>的主要实现类<span class="token punctuation">;</span>线程不安全，效率高<span class="token punctuation">;</span>可以存储<span class="token keyword">null</span>的key和value<span class="token operator">*</span>    <span class="token operator">--</span><span class="token operator">-</span><span class="token class-name">LinkedHashMap</span><span class="token operator">:</span>保证在遍历map元素时，可以按照添加顺序实现遍历。<span class="token operator">*</span>                  原因<span class="token operator">:</span>在原有的<span class="token class-name">HaspMap</span>底层结构基础上<span class="token punctuation">,</span>添加了一对指针，指向前一个元素和后一个元素。<span class="token operator">*</span>                  对于频繁的遍历操作，此类执行效率高于<span class="token class-name">HaspMap</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>​            HashMap的底层:数组+链表(jdk 7以前)<br>​            数组+链表+红黑树(jdk 8以后)</p><h3 id="2-TreeMap"><a href="#2-TreeMap" class="headerlink" title="2.TreeMap"></a>2.TreeMap</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">*</span> <span class="token operator">--</span><span class="token operator">-</span><span class="token class-name">TreeMap</span> <span class="token operator">:</span> 可以按照添加的key<span class="token operator">-</span>value对进行排序，实现排序遍历。此时考虑key的自然排序或定制排序<span class="token operator">*</span>             底层使用红黑树<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><em><strong>使用定制排序需要注意的点：</strong></em></p><h4 id="①实现Comparable对象的比较"><a href="#①实现Comparable对象的比较" class="headerlink" title="①实现Comparable对象的比较"></a>①实现Comparable对象的比较</h4><p><strong>compareTo方法的真正用途：比较当前自己（x）和下一个元素（y）值，当返回值大于0时，则替换位置。。。。。。。这句话很重要，请细品！！！！！！！！比较方法的实现是可以自定义的，也许是x&gt;y时，返回值大于0，替换位置，这时升序；x&lt;y,返回值也可以大于0，替换位置，这时降序</strong></p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211008195230866.png"> </p><p>​    这里的意思是按照成绩升序：因为this.score &gt; o.score 表示传新增加People对象成绩更大的话应该排在原本已有对象的下面！！return 1 表示返回的是this的对象，也就是新增加的的对象！！</p><h4 id="②传入Comparator匿名实现类进行对象比较"><a href="#②传入Comparator匿名实现类进行对象比较" class="headerlink" title="②传入Comparator匿名实现类进行对象比较"></a>②传入Comparator匿名实现类进行对象比较</h4><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211009014304325.png" alt="image-20211009014304325" style="zoom:67%;" /> <p>​    这里o1 &gt; o2 return -1；表示按成绩降序！！</p><h3 id="3-HashTable（子类Properties）"><a href="#3-HashTable（子类Properties）" class="headerlink" title="3.HashTable（子类Properties）"></a>3.HashTable（子类Properties）</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">*</span> <span class="token operator">--</span><span class="token operator">-</span><span class="token class-name">Hashtable</span> <span class="token operator">:</span> 作为古老实现类<span class="token punctuation">,</span>线程安全，效率低<span class="token punctuation">;</span>不能存储<span class="token keyword">null</span>的key，value<span class="token operator">*</span>       <span class="token operator">--</span><span class="token operator">-</span><span class="token operator">:</span><span class="token class-name">Properties</span><span class="token operator">:</span>常用来处理配置文件。key<span class="token operator">-</span>value 都是<span class="token class-name">String</span>类型<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="三-Iterator接口和ListIterator接口"><a href="#三-Iterator接口和ListIterator接口" class="headerlink" title="三.Iterator接口和ListIterator接口"></a>三.Iterator接口和ListIterator接口</h2><p>Iterator是一个接口，它是集合的迭代器。集合可以通过Iterator去遍历集合中的元素。Iterator提供的API接口如下：</p><p>　　♦ boolean hasNext()：判断集合里是否存在下一个元素。如果有，hasNext()方法返回 true。<br>　　♦ Object next()：返回集合里下一个元素。<br>　　♦ void remove()：删除集合里上一次next方法返回的元素。</p><p>　　ListIterator接口继承Iterator接口，提供了专门操作List的方法。ListIterator接口在Iterator接口的基础上增加了以下几个方法：</p><p>　　♦ boolean hasPrevious()：判断集合里是否存在上一个元素。如果有，该方法返回 true。<br>　　♦ Object previous()：返回集合里上一个元素。<br>　　♦ void add(Object o)：在指定位置插入一个元素。</p><p>　　以上两个接口相比较，不难发现，ListIterator增加了向前迭代的功能（Iterator只能向后迭代），ListIterator还可以通过add()方法向List集合中添加元素（Iterator只能删除元素）。</p><h2 id="四-常见面试题"><a href="#四-常见面试题" class="headerlink" title="四.常见面试题"></a>四.常见面试题</h2><h3 id="1-Collection-和-Collections的区别"><a href="#1-Collection-和-Collections的区别" class="headerlink" title="1.Collection 和 Collections的区别"></a>1.Collection 和 Collections的区别</h3><p>答：Collection是集合类的上级接口，继承于他的接口主要有Set 和List.</p><p>Collections是针对集合类的一个帮助类，他提供一系列静态方法实现对各种集合的搜索、排序、线程安全化等操作</p><h3 id="2-Set里的元素是不能重复的，那么用什么方法来区分重复与否呢-是用-还是equals-它们有何区别"><a href="#2-Set里的元素是不能重复的，那么用什么方法来区分重复与否呢-是用-还是equals-它们有何区别" class="headerlink" title="2.Set里的元素是不能重复的，那么用什么方法来区分重复与否呢? 是用==还是equals()? 它们有何区别"></a>2.Set里的元素是不能重复的，那么用什么方法来区分重复与否呢? 是用==还是equals()? 它们有何区别</h3><p>答：Set里的元素是不能重复的，用equals()方法判读两个Set是否相等</p><p>  equals()和==方法决定引用值是否指向同一对象equals()在类中被覆盖，为的是当两个分离的对象的内容和类型相配的话，返回真值</p><h3 id="3-List-Set-Map是否继承自Collection接口"><a href="#3-List-Set-Map是否继承自Collection接口" class="headerlink" title="3.List, Set, Map是否继承自Collection接口"></a>3.List, Set, Map是否继承自Collection接口</h3><p>答： List，Set是，Map不是</p><h3 id="4-两个对象值相同-x-equals-y-true-，但却可有不同的hash-code，这句话对不对"><a href="#4-两个对象值相同-x-equals-y-true-，但却可有不同的hash-code，这句话对不对" class="headerlink" title="4. 两个对象值相同(x.equals(y) == true)，但却可有不同的hash code，这句话对不对?"></a>4. 两个对象值相同(x.equals(y) == true)，但却可有不同的hash code，这句话对不对?</h3><p>答：不对，有相同的hash code</p><h3 id="5-说出ArrayList-Vector-LinkedList的存储性能和特性"><a href="#5-说出ArrayList-Vector-LinkedList的存储性能和特性" class="headerlink" title="5. 说出ArrayList,Vector, LinkedList的存储性能和特性"></a>5. 说出ArrayList,Vector, LinkedList的存储性能和特性</h3><p>答：ArrayList和Vector都是使用数组方式存储数据，此数组元素数大于实际存储的数据以便增加和插入元素，它们都允许直接按序号索引元素，但是插入元素要涉及数组元素移动等内存操作，所以索引数据快而插入数据慢，Vector由于使用了synchronized方法（线程安全），通常性能上较ArrayList差，而LinkedList使用双向链表实现存储，按序号索引数据需要进行前向或后向遍历，但是插入数据时只需要记录本项的前后项即可，所以插入速度较快。</p><h3 id="6-HashMap和Hashtable的区别"><a href="#6-HashMap和Hashtable的区别" class="headerlink" title="6.HashMap和Hashtable的区别"></a>6.HashMap和Hashtable的区别</h3><p>答：</p><p>1.HashMap与Hashtable都实现了Map接口。由于HashMap的非线程安全性，效率上可能高于Hashtable。Hashtable的方法是Synchronize的，而HashMap不是，在多个线程访问Hashtable时，不需要自己为它的方法实现同步，而HashMap 就必须为之提供外同步。</p><p>2.HashMap允许将null作为一个entry的key或者value，而Hashtable不允许。</p><p>3.HashMap把Hashtable的contains方法去掉了，改成containsvalue和containsKey。因为contains方法容易让人引起误解。 </p><p>4.Hashtable继承自Dictionary类，而HashMap是Java1.2引进的Map interface的一个实现。</p><p>5.Hashtable和HashMap采用的hash/rehash算法都大概一样，所以性能不会有很大的差异。</p><h3 id="7-ArrayList和Vector的区别"><a href="#7-ArrayList和Vector的区别" class="headerlink" title="7.ArrayList和Vector的区别"></a>7.ArrayList和Vector的区别</h3><p>答：就ArrayList与Vector主要从二方面来说.</p><p>一.同步性:Vector是线程安全的，也就是说是同步的，而ArrayList是线程序不安全的，不是同步的</p><p>二.数据增长:当需要增长时,Vector默认增长为原来一培，而ArrayList却是原来的一半</p><h3 id="8-你所知道的集合类都有哪些？主要方法"><a href="#8-你所知道的集合类都有哪些？主要方法" class="headerlink" title="8.你所知道的集合类都有哪些？主要方法?"></a>8.你所知道的集合类都有哪些？主要方法?</h3><p>答：最常用的集合类是 List 和 Map。 List 的具体实现包括 ArrayList 和 Vector，它们是可变大小的列表，比较适合构建、存储和操作任何类型对象的元素列表。 List 适用于按数值索引访问元素的情形。 </p><p>Map 提供了一个更通用的元素存储方法。 Map 集合类用于存储元素对（称作”键”和”值”），其中每个键映射到一个值。</p><h3 id="9-以下代码的运行结果"><a href="#9-以下代码的运行结果" class="headerlink" title="9.以下代码的运行结果?"></a>9.以下代码的运行结果?</h3><table><thead><tr><th><strong>public</strong> <strong>static</strong> <strong>void</strong> main(String[] args) {        Integer[] datas = {1,2,3,4,5};        List<Integer> list = Arrays.<em>asList</em>(datas);        list.add(5);        System.*<strong>out*</strong>.println(list.size());    }</th></tr></thead><tbody><tr><td>运行异常，不允许添加元素,因为asList的返回对象是一个Arrays内部类,并没有实现集合的修改方法。</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> JavaSe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java集合 </tag>
            
            <tag> Collection </tag>
            
            <tag> Map </tag>
            
            <tag> Iterator </tag>
            
            <tag> 集合面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>markdown入门语法</title>
      <link href="/2021/10/10/markdown%E5%85%A5%E9%97%A8%E8%AF%AD%E6%B3%95/"/>
      <url>/2021/10/10/markdown%E5%85%A5%E9%97%A8%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211011000448621.png"></p><h1 id="markdown-快速入门语法"><a href="#markdown-快速入门语法" class="headerlink" title="markdown 快速入门语法"></a>markdown 快速入门语法</h1><h2 id="java开发学习路线-https-shimo-im-docs-KY8RHjcgdqwq88kq-read"><a href="#java开发学习路线-https-shimo-im-docs-KY8RHjcgdqwq88kq-read" class="headerlink" title="java开发学习路线 https://shimo.im/docs/KY8RHjcgdqwq88kq/read"></a>java开发学习路线 <a href="https://shimo.im/docs/KY8RHjcgdqwq88kq/read">https://shimo.im/docs/KY8RHjcgdqwq88kq/read</a></h2><h2 id="代码块："><a href="#代码块：" class="headerlink" title="代码块："></a>代码块：</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//代码块语法:</span>```java    ```shell    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>1.java代码</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java">```<span class="token operator">*</span><span class="token operator">*</span><span class="token number">2</span>shell脚本<span class="token operator">*</span><span class="token operator">*</span>```shell<span class="token comment">//linux下spring项目的启动命令</span>#java <span class="token operator">-</span>jar blog start<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2、标题："><a href="#2、标题：" class="headerlink" title="2、标题："></a>2、标题：</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//标题语法</span># 一级标题## 二级标题### 三级标题#### 四级标题##### 五级标题###### 六级标题    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="三级标题"></a>三级标题</h3><h4 id="四级标题"><a href="#四级标题" class="headerlink" title="四级标题"></a>四级标题</h4><h5 id="五级标题"><a href="#五级标题" class="headerlink" title="五级标题"></a>五级标题</h5><h6 id="六级标题"><a href="#六级标题" class="headerlink" title="六级标题"></a>六级标题</h6><h2 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//加粗</span><span class="token operator">*</span><span class="token operator">*</span>等不到天黑（加粗）<span class="token operator">*</span><span class="token operator">*</span><span class="token comment">//代码高亮显示</span><span class="token operator">==</span>代码高亮部分显示<span class="token operator">==</span><span class="token comment">//删除线</span><span class="token operator">~</span><span class="token operator">~</span>被删除的文字<span class="token operator">~</span><span class="token operator">~</span><span class="token comment">//斜体</span><span class="token operator">*</span>斜体内容<span class="token operator">*</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>//加粗<br><strong>等不到天黑（加粗）</strong><br>//代码高亮显示<br>==代码高亮部分显示==<br>//删除线<br><del>被删除的文字</del><br>//斜体<br><em>斜体内容</em></p><h2 id="引用："><a href="#引用：" class="headerlink" title="引用："></a>引用：</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//引用语法</span><span class="token operator">></span>作者<span class="token operator">:</span>lxy<span class="token operator">>></span>作者<span class="token operator">:</span>lxy<span class="token operator">>>></span>作者<span class="token operator">:</span>lxy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>作者:lxy</p><blockquote><p>作者:lxy</p><blockquote><p>作者:lxy</p></blockquote></blockquote></blockquote><h2 id="5-分割线："><a href="#5-分割线：" class="headerlink" title="5.分割线："></a>5.分割线：</h2><pre class="line-numbers language-jav" data-language="jav"><code class="language-jav">&#x2F;&#x2F;分割线1:---&#x2F;&#x2F;分割线2:***<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><hr><h3 id="6-图片插入"><a href="#6-图片插入" class="headerlink" title="6.图片插入:"></a>6.图片插入:</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//在线图片 and 本地图片</span><span class="token operator">!</span><span class="token punctuation">[</span>图片名字<span class="token punctuation">]</span><span class="token punctuation">(</span>图片路径<span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="7-超链接："><a href="#7-超链接：" class="headerlink" title="7.超链接："></a>7.超链接：</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//超链接语法：</span><span class="token punctuation">[</span>我的hexo<span class="token punctuation">]</span><span class="token punctuation">(</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>lxy197120<span class="token punctuation">.</span>github<span class="token punctuation">.</span>io<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><a href="http://lxy197120.github.io/">我的hexo</a></p><h2 id="8-列表："><a href="#8-列表：" class="headerlink" title="8.列表："></a>8.列表：</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//无序列表</span><span class="token operator">-</span> 目录<span class="token number">1</span><span class="token operator">-</span> 目录<span class="token number">2</span><span class="token operator">-</span> 目录<span class="token number">3</span><span class="token comment">//有序列表</span><span class="token comment">//1+. + 名称</span><span class="token number">1</span> <span class="token punctuation">.</span> 首页<span class="token number">2</span> <span class="token punctuation">.</span> 分类<span class="token number">3</span> <span class="token punctuation">.</span> 标签<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>目录1</li><li>目录2</li><li>目录3</li></ul><p>1 . 首页<br>2 . 分类<br>3 . 标签</p><h2 id="9-表格："><a href="#9-表格：" class="headerlink" title="9.表格："></a>9.表格：</h2><table><thead><tr><th>成绩</th><th>语文</th><th>数学</th></tr></thead><tbody><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Typora </category>
          
      </categories>
      
      
        <tags>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java常用类库简单说明</title>
      <link href="/2021/10/06/java%E5%B8%B8%E7%94%A8%E7%B1%BB%E5%BA%93%E8%AF%B4%E6%98%8E/"/>
      <url>/2021/10/06/java%E5%B8%B8%E7%94%A8%E7%B1%BB%E5%BA%93%E8%AF%B4%E6%98%8E/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211011000831318.png"></p><h1 id="java常用类库："><a href="#java常用类库：" class="headerlink" title="java常用类库："></a>java常用类库：</h1><h2 id="1-java-util-Objects"><a href="#1-java-util-Objects" class="headerlink" title="1.java.util.Objects"></a>1.java.util.Objects</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">isNull</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">nonNull</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果是空会抛异常，让程序中断</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-java-lang-Math"><a href="#2-java-lang-Math" class="headerlink" title="2.java.lang.Math"></a>2.java.lang.Math</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//简单实例</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//100</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//100</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//200</span><span class="token comment">//四舍五入</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">100.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//101</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//-100</span><span class="token comment">//返回小于等于参数的最大整数</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">3.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3.0</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//-4.5</span><span class="token comment">//返回大于等于参数的最大整数</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">3.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4.0</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//-3.0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-java-math-Arrays"><a href="#3-java-math-Arrays" class="headerlink" title="3.java.math.Arrays"></a>3.java.math.Arrays</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[I@58ceff1 -->地址</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[1, 6, 7, 5, 4, 3, 9, 2]</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[1, 2, 3, 4, 5, 6, 7, 9]</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">binarySearch</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//二分查找返回找到元素下标</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//8</span>arr <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//扩容数组</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//15</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-java-math-BigDecimal-–-gt-要运算不产生误差可以使用："><a href="#4-java-math-BigDecimal-–-gt-要运算不产生误差可以使用：" class="headerlink" title="4.java.math.BigDecimal –&gt;要运算不产生误差可以使用："></a>4.java.math.BigDecimal –&gt;要运算不产生误差可以使用：</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token operator">+</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//0.30000000000000004 -->java小数运算误差</span><span class="token class-name">BigDecimal</span> b1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">"0.1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">BigDecimal</span> b2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">"0.2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">BigDecimal</span> b3 <span class="token operator">=</span> b1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>b2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//加</span><span class="token class-name">BigDecimal</span> b4 <span class="token operator">=</span> b1<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>b2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//减</span><span class="token class-name">BigDecimal</span> b5 <span class="token operator">=</span> b1<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>b2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//乘</span><span class="token class-name">BigDecimal</span> b6 <span class="token operator">=</span> b1<span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span>b2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//除</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//0.3</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b4<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//-0.1</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b5<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//0.02</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b6<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//0.5</span><span class="token comment">//可以通过BigDecimal的对象.xxxValue()方法获取对象里的值！！！</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-java-util-Date"><a href="#5-java-util-Date" class="headerlink" title="5.java.util.Date"></a>5.java.util.Date</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//获取当前时间</span><span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span><span class="token keyword">long</span> time <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">24</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//往前推一天</span><span class="token class-name">Date</span> date1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Wed Oct 06 00:33:39 CST 2021</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Tue Oct 05 00:33:39 CST 2021</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="6-java-util-DateFormat"><a href="#6-java-util-DateFormat" class="headerlink" title="6.java.util.DateFormat"></a>6.java.util.DateFormat</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//DateFormat是抽象类，得实例化它的子类SimpleDateFormat</span><span class="token comment">/** y : 年* M : 月* d : 日* H : 时* m : 分* s : 秒* */</span><span class="token class-name">SimpleDateFormat</span> format <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy年MM月dd日 HH:mm ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//format将data对象装换为字符串yyyy年MM月dd日 HH:mm ss</span><span class="token class-name">SimpleDateFormat</span> format1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> text <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2021年10月06日 00:46 50</span><span class="token class-name">String</span> text1 <span class="token operator">=</span> format1<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2021-10-06 00:46 50</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>text1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//parse:将 yyyy-MM-dd HH:mm ss 日期字符串装换为date对象</span><span class="token class-name">Date</span> date <span class="token operator">=</span> format1<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"2021-12-12 12:12 12"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1000</span><span class="token operator">/</span><span class="token number">60</span><span class="token operator">/</span><span class="token number">60</span><span class="token operator">/</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//时间戳转换为距指定时间的天数：-67</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="7-java-util-Calendar"><a href="#7-java-util-Calendar" class="headerlink" title="7.java.util.Calendar"></a>7.java.util.Calendar</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//Calendar.Year的值是底层Calendar里数组下标</span><span class="token class-name">Calendar</span> cl <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> year <span class="token operator">=</span> cl<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>YEAR<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2021</span><span class="token keyword">int</span> day <span class="token operator">=</span> cl<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DAY_OF_YEAR<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//279</span>cl<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>YEAR<span class="token punctuation">,</span><span class="token number">2022</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cl<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>YEAR<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2022</span>cl<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>YEAR<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cl<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>YEAR<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2032</span><span class="token comment">//getTime:获取日历时间表示的Date对象</span><span class="token class-name">Date</span> date <span class="token operator">=</span> cl<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取修改操作完毕后的Date对象</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="8-java-lang-System"><a href="#8-java-lang-System" class="headerlink" title="8.java.lang.System"></a>8.java.lang.System</h2><p>System.gc()、System.exit()…… //看jdk11_API</p><h2 id="9-String"><a href="#9-String" class="headerlink" title="9.String"></a>9.String</h2><p>在进行字符串拼接的时候尽量不用”+“进行连接，会造成内存浪费，（存在永久区里，地址不用也没有删除）</p><p>常用方法看API</p>]]></content>
      
      
      <categories>
          
          <category> JavaSe </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java常用类库 </tag>
            
            <tag> Arrays </tag>
            
            <tag> Date </tag>
            
            <tag> DateFormat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle数据库开发基础</title>
      <link href="/2021/09/28/Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/"/>
      <url>/2021/09/28/Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211011001535361.png"></p><h1 id="Oracle数据库开发基础"><a href="#Oracle数据库开发基础" class="headerlink" title="Oracle数据库开发基础"></a>Oracle数据库开发基础</h1><h2 id="一-SQL-Structure-Query-Language-，基本语句"><a href="#一-SQL-Structure-Query-Language-，基本语句" class="headerlink" title="一.SQL(Structure Query Language)，基本语句"></a>一.SQL(Structure Query Language)，基本语句</h2><h2 id="1-基本认识："><a href="#1-基本认识：" class="headerlink" title="1.基本认识："></a>1.基本认识：</h2><p>1.DQL(Data Query Language)</p><p>​    select…from…where…</p><p>2.DML(Data Manipulation操作 Language)</p><p>​    insert…    update…    delete…</p><p>3.TPL(Transaction Processing Language)</p><p>​    commit    rollback    savepoint</p><p>4.DCL(Data Control Language)</p><p>​    grant授予    revoke撤销</p><p>5.DDL(Data Definition Language)</p><p>​    create    alter    drop    truncate    rename</p><p>6.CCL(Cursor Control    Language)</p><p>​    cursor游标</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--建表操作</span><span class="token keyword">create</span> <span class="token keyword">table</span> info<span class="token punctuation">(</span>id varchar2<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    name varchar2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>    <span class="token keyword">constraint</span> pk_info <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">create</span> <span class="token keyword">table</span> sc<span class="token punctuation">(</span>id varchar2<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    subject varchar2<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>    score <span class="token keyword">integer</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token comment">--number(15,2)</span>    <span class="token keyword">constraint</span> uk_sc <span class="token keyword">unique</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>subject<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">constraint</span> fk_sc_id <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">references</span> info<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">constraint</span> ck_sc_score <span class="token keyword">check</span><span class="token punctuation">(</span>score <span class="token operator">between</span> <span class="token number">0</span> <span class="token operator">and</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-删除语句"><a href="#2-删除语句" class="headerlink" title="2.删除语句"></a>2.删除语句</h3><p>drop table xx </p><p>作用：删除内容和定义，释放空间。简单来说就是把整个表去掉.以后要新增数据是不可能的,除非新增一个表。 drop table test,就是把整个表 移除.里面的数据都消失</p><p>truncate table xx</p><p>作用：删除内容、释放空间但不删除定义。与drop不同的是,他只是清空表数据而已,不删除表结构。<strong>没有该删除的日志信息，不能回退！</strong>，在企业里除非备份</p><p> delete table + 表名 //删除所有表中信息</p><p>作用：也是删除整个表的数据,但是过程是痛苦的(系统一行一行地删,效率较truncate低) 或delete table tb where 条件</p><p>删除内容不删除定义，不释放空间。<strong>就算数据都删除了但可以回退</strong></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--删表</span><span class="token comment">--先删除sc，在删info，因为sc唯一主键被外键</span><span class="token keyword">drop</span> <span class="token keyword">table</span> sc<span class="token punctuation">;</span><span class="token keyword">drop</span> <span class="token keyword">table</span> info<span class="token punctuation">;</span><span class="token comment">--或者直接无视约束删表！</span><span class="token keyword">drop</span> <span class="token keyword">table</span> sc <span class="token keyword">cascade</span> <span class="token keyword">constraint</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-数据类型，约束，数据字典以及对表的操作"><a href="#3-数据类型，约束，数据字典以及对表的操作" class="headerlink" title="3.数据类型，约束，数据字典以及对表的操作"></a>3.数据类型，约束，数据字典以及对表的操作</h3><p>1.数据类型：</p><p>Integer    Number    Date    Varchar2…</p><p>2.约束：</p><p>Not null    Primary key    Foreign key    Unique    Check</p><p>3.描述表</p><p>desc + 表名 //查看表结构，不用加分号，属于命令</p><p>4.Information from Data Dictionary</p><pre class="line-numbers language-none"><code class="language-none">--以user开头普通账户都能查，只能看自己能够看到的表select *from user_tables where table_name &#x3D; &#39;INFO&#39;;select *from user_tables where table_name &#x3D; &#39;SC&#39;;select *from user_tab_columns where table_name &#x3D; &#39;INFO&#39;--注:若以dba_tables开头能查所有用户的表，因为是数据库管理员！！!<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210928003601195.png" alt="image-20210928003601195"> </p><p>5.新增列：</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> info <span class="token keyword">add</span> grade <span class="token keyword">integer</span> <span class="token keyword">default</span> <span class="token number">2020</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>6.修改表：</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> sc <span class="token keyword">modify</span> subject varchar2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">alter</span> <span class="token keyword">table</span> info <span class="token keyword">modify</span> grade <span class="token keyword">default</span> <span class="token number">2021</span><span class="token punctuation">;</span><span class="token comment">--已经在表的默认2020不变，新加默认2021</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>7.删除列：</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> info <span class="token keyword">drop</span> <span class="token keyword">column</span> birthday<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>8.删除约束：</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> sc <span class="token keyword">drop</span> <span class="token keyword">constraint</span> fk_sc_id<span class="token punctuation">;</span><span class="token comment">--删除sc表外键约束</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>9.新增约束：</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> sc <span class="token keyword">modify</span> id <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span> <span class="token comment">--添加非空约束用modify，原来是可以为空修改为非空</span><span class="token keyword">alter</span> <span class="token keyword">table</span> sc <span class="token keyword">add</span> <span class="token keyword">constraint</span> fk_sc_id <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">references</span> info<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> user_constraints <span class="token keyword">where</span> table_name <span class="token operator">=</span> <span class="token string">'SC'</span> <span class="token comment">--查看SC表所有约束(以当前用户查看)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>10.给表或列些注释：desc + 表名 可以看到Comments注释！！</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">comment</span> <span class="token keyword">on</span> <span class="token keyword">table</span> info <span class="token operator">is</span> <span class="token string">'Student Information'</span><span class="token punctuation">;</span><span class="token comment">//表名的注释</span><span class="token keyword">comment</span> <span class="token keyword">on</span> <span class="token keyword">column</span> info<span class="token punctuation">.</span>id <span class="token operator">is</span> <span class="token string">'Student ID'</span><span class="token punctuation">;</span><span class="token comment">//给info表里的id这个列加注释</span><span class="token keyword">comment</span> <span class="token keyword">on</span> <span class="token keyword">column</span> info<span class="token punctuation">.</span>name <span class="token operator">is</span> <span class="token string">'Student Name'</span><span class="token keyword">comment</span> <span class="token keyword">on</span> <span class="token keyword">column</span> info<span class="token punctuation">.</span>grade <span class="token operator">is</span> <span class="token string">'Student Grade'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Oracle </tag>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaEE入门必备知识-Servlet篇</title>
      <link href="/2021/09/25/JavaEE%E5%85%A5%E9%97%A8%E5%BF%85%E5%A4%87%E7%9F%A5%E8%AF%86-Servlet%E7%AF%87/"/>
      <url>/2021/09/25/JavaEE%E5%85%A5%E9%97%A8%E5%BF%85%E5%A4%87%E7%9F%A5%E8%AF%86-Servlet%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211011001024371.png"></p><h2 id="1-Servlet-工作流程以及实现"><a href="#1-Servlet-工作流程以及实现" class="headerlink" title="1.Servlet 工作流程以及实现"></a>1.Servlet 工作流程以及实现</h2><h3 id="1-1：主要内容"><a href="#1-1：主要内容" class="headerlink" title="1.1：主要内容"></a>1.1：主要内容</h3><ul><li>1.创建普通java类</li><li>2.满足Servlet规范（继承HTTPServlet类）</li><li>3.重写service方法（当请求Servlet类时，会自动调用service方法）</li><li>4.设置Servlet对外访问路径<br> 如下：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210925163435755.png"></p><p>//其中参数代表，localhost:8080/项目名/value可以访问到service（）</p><h3 id="1-2：实现流程"><a href="#1-2：实现流程" class="headerlink" title="1.2：实现流程"></a>1.2：实现流程</h3><p>然后启动Tomcat，idea控制台会显示 Hello！！！，因为接收请求成功，执行service（）方法，然后向浏览器响应66666!</p><p>谷歌浏览器，鼠标右击打开检查，打开Network，点击viewsource如下：查看请求头和响应头！！</p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210922215455802.png"> </p><p>通过请求头获知浏览器访问的哪个主机</p><p>再通过请求行获取访问的是哪一个web应用</p><p>再通过请求行中的请求路径获知访问的是哪一个资源</p><p>通过获取资源路径在配置中匹配到真实路径</p><p>服务器会创建servlet对象，（如果是第一次访问，创建servlet实例，并调用init方法进行初始化操作）</p><p>调用service（request，response）方法来处理请求和响应的操作<br>调用service完毕后会返回服务器，由服务器讲response缓冲区的数据取出，以http响应的格式发送给浏览器</p><h3 id="1-3：最终流程总结"><a href="#1-3：最终流程总结" class="headerlink" title="1.3：最终流程总结"></a>1.3：最终流程总结</h3><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210925163212830.png"></p><h2 id="2-HttpServletRequest对象-请求"><a href="#2-HttpServletRequest对象-请求" class="headerlink" title="2.HttpServletRequest对象(请求)"></a>2.HttpServletRequest对象(请求)</h2><p>​    HttpServletRequest对象代表客户端的请求，当客户端通过HTTP协议访问服务器时，HTTP请求头中的所有信息都封装在这个对象中，通过这个对象提供的方法，可以获得客户端请求的所有信息。</p><h3 id="2-1-接收请求"><a href="#2-1-接收请求" class="headerlink" title="2.1.接收请求"></a>2.1.接收请求</h3><h4 id="2-1-1-常用方法"><a href="#2-1-1-常用方法" class="headerlink" title="2.1.1.常用方法"></a>2.1.1.常用方法</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*1.常用方法*   1.获取请求方式（get/post等）*   2.获取请求路径（从http开始到？结束）*   3.获取请求部分路径（从项目路径开始到？结束）*   4.获取请求的参数字符串（从？开始到最后）*   5.获取请求协议版本*   6.获取项目的访问路径（站点名，例ser04）//        System.out.println(req.getMethod());//        System.out.println(req.getRequestURL());//        System.out.println(req.getRequestURI());//        System.out.println(req.getQueryString());//        System.out.println(req.getProtocol());//        System.out.println(req.getContextPath());</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210925163053662.png"></p><h4 id="2-1-2-获取请求参数"><a href="#2-1-2-获取请求参数" class="headerlink" title="2.1.2.获取请求参数"></a>2.1.2.获取请求参数</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">*</span>   <span class="token number">1.</span>获取指定参数名的参数值<span class="token operator">*</span>       request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"参数名"</span><span class="token punctuation">)</span><span class="token operator">*</span>       注：<span class="token operator">*</span>           <span class="token number">1.</span>表单提交：<span class="token operator">*</span>               参数名表示的是表单元素的name属性值<span class="token operator">*</span>           <span class="token number">2.</span>地址栏输入：<span class="token operator">*</span>               参数名表示的是：<span class="token string">"?键=值&amp;键=值"</span>的键<span class="token operator">*</span>   <span class="token number">2.</span>获取指定参数名的所有参数值<span class="token operator">*</span>       request<span class="token punctuation">.</span><span class="token function">getParameterValue</span><span class="token punctuation">(</span><span class="token string">"参数名"</span><span class="token punctuation">)</span><span class="token operator">*</span> <span class="token operator">*</span><span class="token operator">/</span><span class="token comment">//获取指定参数</span><span class="token class-name">String</span> uname <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"userName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> upwd <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"userPwd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"姓名："</span><span class="token operator">+</span> uname<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"密码："</span><span class="token operator">+</span> upwd<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取多个参数</span><span class="token comment">//System.out.println(req.getParameterValues("hobby").length);</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210923105454863.png"></p><h3 id="2-2-请求乱码问题"><a href="#2-2-请求乱码问题" class="headerlink" title="2.2.请求乱码问题"></a>2.2.请求乱码问题</h3><h4 id="2-2-1-乱码原因"><a href="#2-2-1-乱码原因" class="headerlink" title="2.2.1.乱码原因"></a>2.2.1.乱码原因</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java">request有默认的解析编码，ISO<span class="token operator">-</span><span class="token number">8859</span><span class="token operator">-</span><span class="token number">1</span>，这种编码不支持中文，传递中文参数必定乱码<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="2-2-2-解决方案"><a href="#2-2-2-解决方案" class="headerlink" title="2.2.2.解决方案"></a>2.2.2.解决方案</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">*</span>      <span class="token number">1.</span>只针对POST请求的乱码问题（处理所有参数）<span class="token operator">*</span>          request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span>UTF<span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token operator">*</span>      <span class="token number">2.</span>任意请求方式都有效（一次处理一个参数）<span class="token operator">*</span>          <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"参数名"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">"ISO-8859-1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span>          目前<span class="token class-name">Tomcat8</span>及以上版本<span class="token class-name">Get</span>请求不会出现乱码，所以只要处理<span class="token class-name">Post</span>请求参数乱码即可<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-3-请求转发"><a href="#2-3-请求转发" class="headerlink" title="2.3.请求转发"></a>2.3.请求转发</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">*</span>   一种跳转方式<span class="token operator">*</span>   <span class="token number">1.</span>服务端跳转<span class="token operator">*</span>   <span class="token number">2.</span>地址栏不发生改变<span class="token operator">*</span>   <span class="token number">3.</span>只有一次请求<span class="token operator">*</span>   <span class="token number">4.</span>数据可以共享<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-4-request作用域"><a href="#2-4-request作用域" class="headerlink" title="2.4.request作用域"></a>2.4.request作用域</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">*</span>     只在一次请求中有效，只在请求转发跳转有效      req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"姓名或者密码不正确！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置作用域，（任意类型的数据）</span>      req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"login.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>  req<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"参数名"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取作用域的值</span>  req<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">"参数名"</span><span class="token punctuation">)</span><span class="token comment">//移除指定作用域的值</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-HttpServletResponse对象"><a href="#3-HttpServletResponse对象" class="headerlink" title="3.HttpServletResponse对象"></a>3.HttpServletResponse对象</h2><p>　　HttpServletResponse对象代表服务器的响应。这个对象中封装了向客户端发送数据、发送响应头，发送响应状态码的方法。查看HttpServletResponse的API，可以看到这些相关的方法。</p><h3 id="3-1-响应数据"><a href="#3-1-响应数据" class="headerlink" title="3.1.响应数据"></a>3.1.响应数据</h3><p>​        接收到客户端请求后，可以通过HttPServletResponse对象直接进行响应，响应时需要获取输出流</p><p>​        有两种形式：</p><p>​                字符输出流 getWriter()</p><p>​                字节输出流getOutputStream()</p><p>​                注：两种流不能同时使用！</p><pre class="line-numbers language-none"><code class="language-none">        &#x2F;&#x2F;得到字符输出流&#x2F;&#x2F;        PrintWriter writer &#x3D; resp.getWriter();&#x2F;&#x2F;        writer.write(&quot;Hello!&quot;);        &#x2F;&#x2F;得到字节输出流        ServletOutputStream outputStream &#x3D; resp.getOutputStream();        outputStream.write(&quot;你好世界&quot;.getBytes());    &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-2-响应乱码问题"><a href="#3-2-响应乱码问题" class="headerlink" title="3.2.响应乱码问题"></a>3.2.响应乱码问题</h3><p>​        对于getWriter()获取到的字符流，响应中文必定出现字符乱码问题，由于服务器端在进行编码时刻<br>​    会默认使用ISO-8859-1，该编码方式不支持中文<br>​        要解决这种乱码只能在服务器端告知服务器使用一种能支持中文编码格式，比如我们常用的”UTF-8”</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>​        此时只完成了一半的工作，要保证数据显示。还还需要指定客户端解码方式</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"content-type"</span><span class="token punctuation">,</span><span class="token string">"text/html;charset = UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>​        保证发送端和接收端的编码一致</p><p>或者使用如下代码替代上诉操作，同时指定服务器和客户端</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset = UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3-3-重定向"><a href="#3-3-重定向" class="headerlink" title="3.3.重定向"></a>3.3.重定向</h3><pre class="line-numbers language-none"><code class="language-none">* 3.重定向*      一种跳转方式*      由服务端指导客户端跳转*      1.客户端跳转*      2.地址栏会发生改变*      3.存在两次请求*      4.数据不能共享** 请求转发只能跳转到当前站点下的资源，不可以跨域，重定向可以跳转到任意资源<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-4-重定向和转发的区别"><a href="#3-4-重定向和转发的区别" class="headerlink" title="3.4.重定向和转发的区别"></a>3.4.重定向和转发的区别</h3><p>​    请求转发:一种跳转方式</p><p>1.服务端跳转</p><p>2.地址栏不发生改变</p><p>3.存在一次请求</p><p>4.数据可以共享</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">后面<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token punctuation">)</span>表示请求转发但前站点其他资源时，把对象一起传过去req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"login.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="4-Cookie对象"><a href="#4-Cookie对象" class="headerlink" title="4.Cookie对象"></a>4.Cookie对象</h2><p>​        Cookie是浏览器提供的一种技术，通过服务器的程序将一些只需保存在客户端，或者在客户端进行处理大数据，放在本地计算机上，不需要通过网络传输，因而提高网页处理效率，并且能够减少服务器的负载，但是由于Cookie是服务端保存在客户端的信息，所以其安全性也是很差的。例如常用的记住密码则可以通过Cookie来实现</p><p>​        有一个专门操作Cookie的类javax.servlet.http.Cookie ，随着服务器端的响应发送给客户端，保存在浏览器，当下一再访问服务器时把Cookie再带回服务器</p><p>​        Cookie的格式： 键值对用“=”连接，多个键值对用“；”隔开</p><h3 id="4-1-cookie的创建与发送"><a href="#4-1-cookie的创建与发送" class="headerlink" title="4.1.cookie的创建与发送"></a>4.1.cookie的创建与发送</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//得到Cookie对象</span><span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//发送Cookie（将cookie对象响应发送给客户端）</span>resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Cookie</span> cookie1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"pwd"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie1<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-2-cookie的获取"><a href="#4-2-cookie的获取" class="headerlink" title="4.2.cookie的获取"></a>4.2.cookie的获取</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">*</span> <span class="token class-name">Cookie</span>的获取<span class="token operator">*</span>      获取所有<span class="token class-name">Cookie</span>对象，返回<span class="token class-name">Cookie</span>数组<span class="token operator">*</span>      request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//获取所有Cookie对象</span>        <span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//判断后遍历</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>cookies <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> cookies<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie <span class="token operator">:</span> cookies<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"name:"</span> <span class="token operator">+</span> cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"value:"</span> <span class="token operator">+</span> cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//获取指定name的cookie对象</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"值为："</span> <span class="token operator">+</span> cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-3-cookie设置到期时间"><a href="#4-3-cookie设置到期时间" class="headerlink" title="4.3.cookie设置到期时间"></a>4.3.cookie设置到期时间</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">*</span> <span class="token class-name">Cookie</span>失效时间<span class="token operator">*</span>      cookie默认是关闭浏览器失效<span class="token punctuation">(</span>与服务器是否关闭无关<span class="token punctuation">)</span><span class="token operator">*</span><span class="token operator">*</span>      通过maxAge设置cookie失效时间<span class="token operator">*</span>      <span class="token number">1.</span>正整数<span class="token operator">*</span>          表示cookie存活指定秒数<span class="token operator">*</span>      <span class="token number">2.</span>负整数<span class="token operator">*</span>          表示cookie只在浏览器中存活，浏览器关闭即失效，默认值：<span class="token operator">-</span><span class="token number">1</span><span class="token operator">*</span>      <span class="token number">3.</span>零<span class="token operator">*</span>          表示删除cookie<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//得到Cookie对象</span><span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"uname"</span><span class="token punctuation">,</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置cookie存活秒数</span><span class="token comment">//设置7天失效</span>cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token operator">*</span><span class="token number">24</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//发送Cookie（将cookie对象响应发送给客户端）</span>resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Cookie</span> cookie1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"uname1"</span><span class="token punctuation">,</span><span class="token string">"lisi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//表示关闭浏览器cookie失效</span>cookie1<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Cookie</span> cookie2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"uname2"</span><span class="token punctuation">,</span><span class="token string">"wangwu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//零：表示立即删除</span>cookie2<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//删除已有的cookie对象</span><span class="token class-name">Cookie</span> cook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cook<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cook<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-4-cookie的注意点"><a href="#4-4-cookie的注意点" class="headerlink" title="4.4.cookie的注意点"></a>4.4.cookie的注意点</h3><ul><li><p>Cookie保存在当前浏览器中</p><p>​    在一般站点常常有记住用户名这样一个操作，该操作只是将该信息保存在本机上，换电脑以后这些信息就无效了。而且cookie还不能跨浏览器。</p></li><li><p>Cookie存在中文问题</p><p>​    Cookie中不能出现中文，如果有中文则通过URLEncoder.encode()来进行编码，获取时通过URLDecoder.decode()来进行解码</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//Cookie中不能出现中文，如果有中文则通过URLEncoder.encode()来进行编码</span><span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"，名字"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> value <span class="token operator">=</span> <span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"，测试"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Cookie cookie = new Cookie("名字","测试");//这个会报错，name不能是中文</span><span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这个不编码会报错</span>resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210925163627061.png">只编码不解码，在输出端会出现这个问题!</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//用这个解码响应浏览器</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"name:"</span> <span class="token operator">+</span> <span class="token class-name">URLDecoder</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"value:"</span> <span class="token operator">+</span> <span class="token class-name">URLDecoder</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210923151228648.png">解码后的样子！</p></li><li><p>同名Cookie问题</p></li></ul><p>  ​    在cookie的domian和path相同时，如果服务器端发送重复的Cookie那么会覆盖原有的Cookie</p><p>  ​    但是不同浏览器可以重名Cookie</p><ul><li><p>浏览器存放Cookie数量</p><p>​    不同浏览器对Cookie也有限定，Cookie的存储也是有上限的。Cookie是存储在客户端（浏览器）的，而且一般是由服务器端创建和设定的。后期结合Session来实现回话跟踪。</p></li></ul><h3 id="4-5-cookie的路径"><a href="#4-5-cookie的路径" class="headerlink" title="4.5.cookie的路径"></a>4.5.cookie的路径</h3><p>​        Cookie的setPath()可以设置cookie的路径，这个路径直接决定服务器的请求是否会从浏览器加载某些cookie。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">*</span> <span class="token number">1.</span>在当前项目下的资可以获取<span class="token operator">*</span> <span class="token number">2.</span>在当前服务器下的资源可以获取<span class="token operator">-></span>设置路径为<span class="token string">"/"</span><span class="token operator">*</span> <span class="token number">3.</span>在指定项目的资源下可以访问<span class="token operator">*</span> <span class="token number">4.</span>在指定路径的资源可以访问        <span class="token comment">//1.在当前项目的资源都可以获取，包括前端的.jsp文件也能拿到cookie</span>        <span class="token class-name">Cookie</span> cookie01 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"a1"</span><span class="token punctuation">,</span><span class="token string">"aaa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        cookie01<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">"/JavaWeb"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie01<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2.在当前服务器下的资源可以获取->设置路径为"/"</span>        <span class="token class-name">Cookie</span> cookie02 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"a2"</span><span class="token punctuation">,</span><span class="token string">"bbb"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        cookie02<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie02<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//3.在指定项目下的资源可以访问</span>        <span class="token class-name">Cookie</span> cookie03 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"a3"</span><span class="token punctuation">,</span><span class="token string">"ccc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        cookie03<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">"/JavaWeb"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie03<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//在指定路径的资源可以访问</span>        <span class="token class-name">Cookie</span> cookie04 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"a4"</span><span class="token punctuation">,</span><span class="token string">"ddd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        cookie04<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">"/JavaWeb/cook"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie04<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210923153610785.png">一个项目下可以设置多个资源路径</p><h2 id="5-HttpSession对象"><a href="#5-HttpSession对象" class="headerlink" title="5.HttpSession对象"></a>5.HttpSession对象</h2><p>​        HTTPSession是Java平台对session机制的实现规范，因为它仅仅是个接口，具体到每个web应用服务器的提供商，除了对规范支持之外，仍然会有一些规范里没有规定的细微差异。<br>HTTPSession对象将在用户第1次访问服务器时由容器创建(只有访问JSP、Servlet等程序时才会创建，只访问HTML、image等静态资源并不会创建)，当用户调用其失效方法(invalidate()方法)或超过其最大不活动时间时会失效。在会话有效期间，用户与服务器之间的多次请求都属于同一个会话。<br>————————————————<br>原文链接：<a href="https://blog.csdn.net/weixin_49092628/article/details/109287535">https://blog.csdn.net/weixin_49092628/article/details/109287535</a></p><h3 id="5-1-标识符JSESSIONID"><a href="#5-1-标识符JSESSIONID" class="headerlink" title="5.1.标识符JSESSIONID"></a>5.1.标识符JSESSIONID</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">*</span>      <span class="token number">2.</span>JSESSIONID标识符<span class="token operator">*</span>          <span class="token number">2.1</span>当请求达到服务器时，如果使用了session，服务器回去获取一个JSESSIONID的cookie对象<span class="token operator">*</span>          <span class="token number">2.2</span>如果cookie对象不存在，则新建立session对象，并设置sessionId，将sessionId回传给客户端中，设置对应的cookie。<span class="token operator">*</span>             如果cookie对象存在，服务器会比较客户端传递的sessionId是否与服务端一致<span class="token operator">*</span>                  如果不一致，新建session对象，并设置sessionId，将sessionId回传给客户端中，重新设置对应的cookie<span class="token operator">*</span>                  如果一致，则获取到当前session对象<span class="token operator">*</span>             <span class="token operator">&lt;</span><span class="token class-name">Session</span>底层是依赖cookie的，默认关闭浏览器失效<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;获取session对象HttpSession session &#x3D; req.getSession();&#x2F;&#x2F;常用方法System.out.println(&quot;SessionId:&quot; + session.getId());System.out.println(&quot;会话创建时间：&quot; + session.getCreationTime());System.out.println(&quot;最后一次访问时间&quot; + session.getLastAccessedTime());System.out.println(&quot;是否是新的对象&quot; + session.isNew());<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-2-session域对象"><a href="#5-2-session域对象" class="headerlink" title="5.2.session域对象"></a>5.2.session域对象</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">*</span>      <span class="token number">3.</span>session作用域<span class="token operator">*</span>          再一次会话有效，可以有多次请求和响应，在会话中数据共享<span class="token operator">*</span>          <span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span>          <span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span>          <span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token operator">*</span>          request作用域<span class="token operator">*</span>              一次请求中有效，在请求转发中有效，在重定向失效<span class="token operator">*</span>          session作用域<span class="token operator">*</span>               一次回话中有效，无论请求转发还是重定向都有效，会话销毁则失败<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** 作用域* */</span><span class="token comment">//设置request作用域</span>req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"request"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置session作用域</span>session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"name1"</span><span class="token punctuation">,</span><span class="token string">"session"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//请求转发(一次请求)</span><span class="token comment">//req.getRequestDispatcher("se02").forward(req,resp);</span><span class="token comment">//重定向(两次请求->request不共享)</span>resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"se02"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211014002144048.png"></p><h3 id="5-3-session对象的销毁"><a href="#5-3-session对象的销毁" class="headerlink" title="5.3.session对象的销毁"></a>5.3.session对象的销毁</h3><p>​        当客户第一次请求servlet并且操作session时，session对象生成，Tomcat中session默认存活时间式神30min，即你不操作界面的时间，一旦有操作，session会重新计时</p><p>​        那么session的默认时间在哪里可以更改呢？</p><p>​        -&gt;在Tomcat中的conf目录下的web.xml文件中可以进行修改，不建议修改</p><!-- session默认最大不活动时间，单位：分钟 -->   <session-config>        <session-timeout>30</session-timeout>    </session-config><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">*</span>      <span class="token number">4.</span>session的销毁<span class="token operator">*</span>          <span class="token number">1.</span>关闭服务器<span class="token operator">*</span>          <span class="token number">2.</span>关闭浏览器<span class="token operator">*</span>              session底层依赖cookie，cookie默认只在浏览器存活，浏览器关闭则失效<span class="token operator">*</span>          <span class="token number">3.</span>默认最大不活动时间<span class="token operator">*</span>              服务器设置了session的最大不活动时间，<span class="token class-name">Tomcat</span>服务器设置的是<span class="token number">30</span>分钟。在指定时间<span class="token operator">*</span>              内不操作，session失效<span class="token operator">*</span>          <span class="token number">4.</span>手动设置失效时间<span class="token punctuation">(</span>单位：秒<span class="token punctuation">)</span><span class="token operator">*</span>          <span class="token number">5.</span>手动销毁<span class="token operator">*</span>              session<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//最大不活动时间</span><span class="token keyword">int</span> sec <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getMaxInactiveInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"session的最大不活动时间："</span> <span class="token operator">+</span> sec<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置最大不活动时间</span>session<span class="token punctuation">.</span><span class="token function">setMaxInactiveInterval</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//20秒失效</span><span class="token comment">//手动销毁</span>session<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210924112816982.png"> </p><p><strong>重定向后session不发生改变，SessionId保持一致</strong></p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210924113030929.png"> </p><p><strong>20秒后session失效，重定向到新页面创建新的SessionId，对比前后Session02的SessionId即可</strong></p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210924113227570.png"> </p><p><strong>设置session失效，所以重定向后两个页面的sessionId不一致</strong></p><h2 id="6-ServletContext对象"><a href="#6-ServletContext对象" class="headerlink" title="6.ServletContext对象"></a>6.ServletContext对象</h2><p>​        每一个web应用有且只有一个ServletContext对象，又称Application对象，从名称中可以得知，该对象是与应用程序相关的。在WEB容器启动的时候，会为每一个WEB应用程序创建一个对应的ServletContext对象。</p><p>​        该对象有两大作用，第一：作为域对象用来共享数据，此时数据在整个应用程序中共享；第二：该对象保存了当前应用程序相关信息，例如可以通过getServerInfo()获取当前服务器信息，getRealPath(String path)获取资源的真实路径等。</p><h3 id="6-1-ServletContext对象的获取"><a href="#6-1-ServletContext对象的获取" class="headerlink" title="6.1.ServletContext对象的获取"></a>6.1.ServletContext对象的获取</h3><p>​        获取ServletContext对象的途径有很多。比如：</p><ul><li>通过request 对象获取</li></ul><ul><li>通过session 对象获取</li></ul><ul><li>通过servletConfig 对象获取，在Servlet标准中提供了ServletConfig方法</li></ul><ul><li>直接获取，Servlet类中提供了直接获取ServletContext对象的方法</li></ul><p><strong>常用方法</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** 常用方法* */</span><span class="token comment">//获取项目的真实路径</span><span class="token class-name">String</span> realPath <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"获取项目的真实路径"</span> <span class="token operator">+</span> realPath<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取当前服务器的版本信息</span><span class="token class-name">String</span> serverInfo <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServerInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"当前服务器的版本信息"</span> <span class="token operator">+</span> serverInfo<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210924135524146.png"></p><h3 id="6-2-ServletContext域对象"><a href="#6-2-ServletContext域对象" class="headerlink" title="6.2.ServletContext域对象"></a>6.2.ServletContext域对象</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** 作用域*      在这个应用程序中有效，只要服务器关闭就失效*       getAttribute*       setAttribute*       removeAttribute* */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="7-文件上传和下载"><a href="#7-文件上传和下载" class="headerlink" title="7.文件上传和下载"></a>7.文件上传和下载</h2><p>​        在上网的时候我们常常会遇到文件上传的问题，例如上传头像，上传资料；当然除了上传，下载的情况也很多，接下来来看看我们Servlet中是怎么实现文件的上传和下载！</p><h3 id="7-1-文件上传"><a href="#7-1-文件上传" class="headerlink" title="7.1.文件上传"></a>7.1.文件上传</h3><h4 id="7-1-1-前台页面"><a href="#7-1-1-前台页面" class="headerlink" title="7.1.1.前台页面"></a>7.1.1.前台页面</h4><p>​        在做文件上传的时候，会有一个上传文件的页面，首先我们需要一个表单，并且表单的请求方式为POST；其次我们的form表单的enctype必须设为”multipart/form-data”,即 <strong>enctype=”multipart/form-data”</strong>,意思是设置表单的类型为文件上传表单。默认情况下这个表单类型是”application/x-www-form-urlencoded”,不能用于文件上传。只有使用了multipart/form-data才可以完整的传输数据！</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!--文件上传表单1.表单提交类型 method = "post"2.表单类型 enctype="multipart/form-data" 二进制表单3.表单元素类型 文件域设置name属性值--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uploadServlet<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        姓名:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uname<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>        文件:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myfile<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="7-1-2-后台实现"><a href="#7-1-2-后台实现" class="headerlink" title="7.1.2.后台实现"></a>7.1.2.后台实现</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * @author Lxy * @create 2021-09-24 14:33 * * 如果文件上传类型为二进制表单，则需要添加@MultipartConfig注解，否则所有数据无法获取！！！ */</span><span class="token annotation punctuation">@MultipartConfig</span><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/uploadServlet"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> uploadServlet <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//设置请求的编码格式</span>        req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//接收参数（普通参数）</span>        <span class="token class-name">String</span> uname <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"uname"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"uname:"</span> <span class="token operator">+</span> uname<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//获得part对象</span>        <span class="token class-name">Part</span> part <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getPart</span><span class="token punctuation">(</span><span class="token string">"myfile"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//得到上传文件的名称</span>        <span class="token class-name">String</span> fileName <span class="token operator">=</span> part<span class="token punctuation">.</span><span class="token function">getSubmittedFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//得到项目存放的真实路径(得到文件需要存放的路径)</span>        <span class="token class-name">String</span> realPath <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/upload/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//文件上传操作</span>        part<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>realPath <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>​        <img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210924145634704.png" alt="image-20210924145634704"  /> </p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210924145653564.png"> </p><h3 id="7-2-文件下载"><a href="#7-2-文件下载" class="headerlink" title="7.2.文件下载"></a>7.2.文件下载</h3><p>​        文件下载，即将服务器上的资源下载（拷贝）到本地，我们可以通过两种方式下载。第一只是通过超链接本身的特性来下载；第二种是通过代码下载。</p><h4 id="7-2-1-超链接下载"><a href="#7-2-1-超链接下载" class="headerlink" title="7.2.1.超链接下载"></a>7.2.1.超链接下载</h4><p>​        当我们在Html或者Jsp页面中使用a标签时，原意是希望能够进行跳转，但当超链接遇到浏览器不识别的资源时也会自动下载；当遇到浏览器能够直接显示的资源，浏览器会默认显示出来，不如txt，png，jpg等。当然我们也可以通过<strong>download属性</strong>规定浏览器进行下载。但有些浏览器不支持。</p><p>​        <strong>默认下载：</strong></p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;h2&gt;超链接下载&lt;&#x2F;h2&gt;&lt;h4&gt;浏览器可以识别的资源&lt;&#x2F;h4&gt;&lt;a href&#x3D;&quot;test.html&quot;&gt;Html页面&lt;&#x2F;a&gt;&lt;a href&#x3D;&quot;test&quot;&gt;Txt文件&lt;&#x2F;a&gt;&lt;a href&#x3D;&quot;bg.png&quot;&gt;图片&lt;&#x2F;a&gt;&lt;h4&gt;浏览器无法识别的资源&lt;&#x2F;h4&gt;&lt;a href&#x3D;&quot;bg1.7z&quot;&gt;压缩图片&lt;&#x2F;a&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>​        </p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210924151944322.png" alt="image-20210924151944322" style="zoom:50%;"/> <p>​        <strong>指定download属性下载：</strong></p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;h4&gt;download属性&lt;&#x2F;h4&gt;&lt;a href&#x3D;&quot;test.html&quot; download&gt;Html文件&lt;&#x2F;a&gt;&lt;a href&#x3D;&quot;test.html&quot; download&#x3D;&quot;demo.txt&quot;&gt;下载(.Html转换.Txt文件)&lt;&#x2F;a&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210924152501024.png" alt="image-20210924152501024" style="zoom:80%;" /> 点击Html文件</p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210924152550593.png" alt="image-20210924152550593" style="zoom: 80%;" /> 点击下载链接</p><h4 id="7-2-2-后台实现下载"><a href="#7-2-2-后台实现下载" class="headerlink" title="7.2.2.后台实现下载"></a>7.2.2.后台实现下载</h4><p>​        <strong>实现步骤</strong></p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;form action&#x3D;&quot;downloadServlet&quot;&gt;    文件名:&lt;input type&#x3D;&quot;text&quot;name&#x3D;&quot;filename&quot;&gt;    &lt;button type&#x3D;&quot;submit&quot;&gt;下载&lt;&#x2F;button&gt;&lt;&#x2F;form&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/downloadServlet"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> downloadServlet <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//设置请求的编码格式</span>        req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//接收要下载的文件名</span>        <span class="token class-name">String</span> filename <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"filename"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//判断文件名是否为空</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>filename <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请输入要下载的文件名："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//得到文件存放的路径</span>        <span class="token class-name">String</span> filePath <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//通过路径得到file对象</span>        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>filePath <span class="token operator">+</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//判断文件是否存在且是一个标准文件</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">//设置响应类型(浏览器无法使用某种方式或激活某个程序来处理的类型)->下载弹出的确定保存提示框。</span>            resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/x-msdownload"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//设置头信息</span>            resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Disposition"</span><span class="token punctuation">,</span><span class="token string">"attachment;filename="</span> <span class="token operator">+</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//得到文件的输入流</span>            <span class="token class-name">InputStream</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//得到字节输出流</span>            <span class="token class-name">ServletOutputStream</span> out <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chars <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>chars<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>chars<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            in<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"要下载的文件不存在！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210925145311713.png"> 后台下载会在服务器内部找到对应文件，找得到则跳出下载提示框！！</p><p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20210925145144128.png"></p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tomcat </tag>
            
            <tag> Servlet </tag>
            
            <tag> Cookie </tag>
            
            <tag> Session </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo上传博客</title>
      <link href="/2021/09/25/hello-world/"/>
      <url>/2021/09/25/hello-world/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/lxy197120/PicBed/img/image-20211011001916654.png"></p><p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
